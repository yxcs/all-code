<!DOCTYPE html>
<html>
  <head>
    <title>NPAPI 插件 - Google Chrome 扩展程序开发文档（非官方中文版）</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link href="../static/css/site.css" rel="stylesheet" type="text/css">
    <link href="../../developer.chrome.com/static/css/print.css" rel="stylesheet" type="text/css" media="print">
    <link href="../../developer.chrome.com/static/css/prettify.css" rel="stylesheet" type="text/css">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
  </head>

  <body>


<!-- Copyright  2005. Spidersoft Ltd -->
<style>
A.applink:hover {border: 2px dotted #DCE6F4;padding:2px;background-color:#ffff00;color:green;text-decoration:none}
A.applink       {border: 2px dotted #DCE6F4;padding:2px;color:#2F5BFF;background:transparent;text-decoration:none}
A.info          {color:#2F5BFF;background:transparent;text-decoration:none}
A.info:hover    {color:green;background:transparent;text-decoration:underline}
</style>
<div style='BORDER: 1px solid #DCE6F4; MARGIN-TOP: 20px; MARGIN-BOTTOM: 20px; MARGIN-LEFT: 5px; MARGIN-RIGHT: 5px; PADDING: 5px; BACKGROUND-COLOR: #eef8ff;line-height:180%; COLOR: #000000; font-family: Arial; font-size: 8pt; width=100%; FILTER: progid:DXImageTransform.Microsoft.Gradient(GradientType=0, StartColorStr="#FFFFFFFF", EndColorStr="#F2F5FAFF");'>
This page was saved using <a class="applink" href="http://www.spidersoft.com"><b>WebZIP 7.0.3.1030</b></a> <a class="applink" href="http://www.spidersoft.com"><b>offline browser</b></a>  on  12/24/13 11:31:36.<br>
<b>Address:</b> <a class="info" href="https://crxdoc-zh.appspot.com/extensions/npapi.html">https://crxdoc-zh.appspot.com/extensions/npapi.html</a><br>
<b>Title:</b> NPAPI 插件 - Google Chrome 扩展程序开发文档（非官方中文版） &nbsp;&bull;&nbsp; <b>Size:</b> 20886<br></div>
<!-- /Copyright  2005. Spidersoft Ltd -->


    <div id="gc-topnav">
      <table><tr>
      <td id="chrome-logo">
        <a href="extensions.html" title="Google Chrome 扩展程序" id="view-original">
          <img src="../../developer.chrome.com/static/images/chrome-logo.png" alt=""> chrome
        </a>
        <script type="text/javascript">
          document.getElementById('view-original').href = "https://developer.chrome.com" + location.pathname;
        </script>
        <div id="platform-chooser">
          <button id="platform-chooser-toggle" data-menu="platform-chooser-popup">
            扩展程序 &#x25be;&#x202F;
          </button>
          <div id="platform-chooser-popup">
            <button class="apps" data-href="/apps/about_apps.html"><!--@apps-->应用</button>
            <button class="extensions" data-href="/extensions"><!--@extensions-->扩展程序</button>
          </div>
        </div>（非官方中文版）
      </td>
      <td>
        <ul>
          <li>
            <a href="samples.html"
               title="示例 扩展程序（包含源代码）"><!--@Samples-->示例</a>
          </li>
          <li>
            <a href="http://groups.google.com/a/chromium.org/group/chromium-extensions"
               title="Google Chrome 扩展程序开发者论坛"
               target="_blank"><!--@Group-->论坛（英文）</a>
          </li>
          <li>
            <a href="http://stackoverflow.com/tags/google-chrome-extension/info"
               title="Stack Overflow 上的 [google-chrome-extension] 标签"
               target="_blank">Stack overflow</a>
          </li>
        </ul>
      </td>
      </tr></table>
    </div>
    <div id="gc-topnav-space"></div>
    <div id="gc-container">
      <div id="gc-sidebar">
        <g:plusone></g:plusone>
        <ul 
            class="level1 ">
        <li class="level2">
              <a href="getstarted.html" class="level2 ">入门</a>
        </li><li class="level2">
              <a href="overview.html" class="level2 ">概述</a>
        </li><li class="level2">
              <a href="whats_new.html" class="level2 ">新增功能</a>
        </li><li class="level2">
              <a href="devguide.html" class="level2 ">开发者指南</a>
          <ul 
              class="level2 ">
          <li class="level3">
              <a class="button level3">
                <span class="level3">浏览器用户界面</span>
                <div class="toggleIndicator level3"></div>
              </a>
            <ul toggleable
                class="level3 hidden">
            <li class="level4">
                  <a href="browserAction.html" class="level4 ">浏览器按钮</a>
            </li><li class="level4">
                  <a href="contextMenus.html" class="level4 ">右键菜单</a>
            </li><li class="level4">
                  <a href="desktop_notifications.html" class="level4 ">桌面通知</a>
            </li><li class="level4">
                  <a href="omnibox.html" class="level4 ">多功能框</a>
            </li><li class="level4">
                  <a href="options.html" class="level4 ">选项页面</a>
            </li><li class="level4">
                  <a href="override.html" class="level4 ">替代页面</a>
            </li><li class="level4">
                  <a href="pageAction.html" class="level4 ">页面按钮</a>
            </li>
            </ul>
          </li><li class="level3">
              <a class="button level3">
                <span class="level3">浏览器交互</span>
                <div class="toggleIndicator level3"></div>
              </a>
            <ul toggleable
                class="level3 hidden">
            <li class="level4">
                  <a href="bookmarks.html" class="level4 ">书签</a>
            </li><li class="level4">
                  <a href="cookies.html" class="level4 ">Cookie</a>
            </li><li class="level4">
                  <a href="devtools.html" class="level4 ">扩展开发者工具</a>
            </li><li class="level4">
                  <a href="events.html" class="level4 ">事件</a>
            </li><li class="level4">
                  <a href="history.html" class="level4 ">历史记录</a>
            </li><li class="level4">
                  <a href="management.html" class="level4 ">管理</a>
            </li><li class="level4">
                  <a href="tabs.html" class="level4 ">标签页</a>
            </li><li class="level4">
                  <a href="windows.html" class="level4 ">窗口</a>
            </li>
            </ul>
          </li><li class="level3">
              <a class="button level3">
                <span class="level3">实现</span>
                <div class="toggleIndicator level3 toggled"></div>
              </a>
            <ul toggleable
                class="level3 ">
            <li class="level4">
                  <a href="a11y.html" class="level4 ">辅助功能</a>
            </li><li class="level4">
                  <a href="event_pages.html" class="level4 ">事件页面</a>
            </li><li class="level4">
                  <a href="contentSecurityPolicy.html" class="level4 ">内容安全策略</a>
            </li><li class="level4">
                  <a href="content_scripts.html" class="level4 ">内容脚本</a>
            </li><li class="level4">
                  <a href="xhr.html" class="level4 ">跨站 XHR</a>
            </li><li class="level4">
                  <a href="i18n.html" class="level4 ">国际化支持</a>
            </li><li class="level4">
                  <a href="messaging.html" class="level4 ">消息传递</a>
            </li><li class="level4">
                  <a href="permissions.html" class="level4 ">可选权限</a>
            </li><li class="level4">
                  <a  class="level4 selected">NPAPI 插件</a>
            </li>
            </ul>
          </li><li class="level3">
              <a class="button level3">
                <span class="level3">完成</span>
                <div class="toggleIndicator level3"></div>
              </a>
            <ul toggleable
                class="level3 hidden">
            <li class="level4">
                  <a href="hosting.html" class="level4 ">托管</a>
            </li><li class="level4">
                  <a href="external_extensions.html" class="level4 ">其他发布选项</a>
            </li>
            </ul>
          </li>
          </ul>
        </li><li class="level2">
              <a href="tutorials.html" class="level2 ">教程</a>
          <ul 
              class="level2 ">
          <li class="level3">
                <a href="tut_migration_to_manifest_v2.html" class="level3 ">清单文件版本 2</a>
          </li><li class="level3">
                <a href="tut_debugging.html" class="level3 ">调试</a>
          </li><li class="level3">
                <a href="tut_analytics.html" class="level3 ">Google Analytics（分析）</a>
          </li><li class="level3">
                <a href="tut_oauth.html" class="level3 ">OAuth</a>
          </li>
          </ul>
        </li><li class="level2">
              <span class="level2">参考</span>
          <ul 
              class="level2 ">
          <li class="level3">
              <a class="button level3">
                <span class="level3">格式</span>
                <div class="toggleIndicator level3"></div>
              </a>
            <ul toggleable
                class="level3 hidden">
            <li class="level4">
                  <a href="manifest.html" class="level4 ">清单文件</a>
            </li><li class="level4">
                  <a href="match_patterns.html" class="level4 ">匹配表达式</a>
            </li>
            </ul>
          </li><li class="level3">
                <a href="permission_warnings.html" class="level3 ">权限警告</a>
          </li><li class="level3">
                <a href="api_index.html" class="level3 ">chrome.* API</a>
          </li><li class="level3">
                <a href="api_other.html" class="level3 ">其他 API</a>
          </li>
          </ul>
        </li><li class="level2">
              <span class="level2">更多</span>
          <ul 
              class="level2 ">
          <li class="level3">
                <a href="faq.html" class="level3 ">常见问题</a>
          </li><li class="level3">
                <a href="http://code.google.com/chrome/webstore/docs/index.html" class="level3 ">Chrome 网上应用店</a>
          </li><li class="level3">
                <a href="http://code.google.com/chrome/apps/docs/developers_guide.html" class="level3 ">托管应用</a>
          </li><li class="level3">
                <a href="themes.html" class="level3 ">主题背景</a>
          </li>
          </ul>
        </li>
        </ul>
      </div>
      <div id="gc-pagecontent">

<div id="toc">
  <ol>
    <li >
      <a href="#warning"
         data-list-item
         >警告</a>
    </li>
    <li >
      <a href="#details"
         data-list-item
         >详情</a>
    </li>
    <li >
      <a href="#security-considerations"
         data-list-item
         >安全性考虑</a>
    </li>
  </ol>
</div>

<h1>NPAPI <!--@Plugins-->插件</h1>

<p>
<!--@Leveraging HTML and JavaScript
makes developing new extensions really easy,
but what if you have existing legacy or proprietary code
that you want to reuse in your extension?
You can bundle an NPAPI plugin with your extension,
allowing you to call into native binary code from JavaScript.-->
利用 HTML 与 JavaScript 使您开发新的扩展程序变得非常容易，但是如果您有现存的遗留代码或专有代码，并且希望在您的扩展程序中重用，那该怎么办？您可以将
NPAPI 插件和您的扩展程序一起打包，使您可以从 JavaScript
中调用本机二进制代码。
</p>

<h2 id="warning"><!--@Warning-->警告</h2>

<p align="center"><b><a href="http://blog.chromium.org/2013/09/saying-goodbye-to-our-old-friend-npapi.html"><!--@NPAPI is being phased out.-->NPAPI
将要淘汰</a><!--@
Consider using alternatives.-->，请考虑使用其他替代方式。</b></p>

<p align="center"><b><!--@NPAPI is a really big hammer that should only be used when no other approach will work.-->NPAPI 应该尽可能地避免，除非没有其他任何可行的方式。</b>

<p><!--@Code running in an NPAPI plugin has the full permissions of the current user and is not sandboxed or shielded from malicious input by Google Chrome in any way. You should be especially cautious when processing input from untrusted sources, such as when working with <a href="https://crxdoc-zh.appspot.com/extensions/content_scripts.html#security-considerations">content scripts</a> or XMLHttpRequest.-->
运行在NPAPI插件中的代码拥有当前用户的所有权限，不在沙箱中运行，对于恶意的输入不受到
Google Chrome
浏览器的任何保护。您在处理来自不受信任来源的输入时应当尤其小心（例如与<a
href="https://crxdoc-zh.appspot.com/extensions/content_scripts.html#security-considerations">内容脚本</a>或者
XMLHttpRequest 一起使用时）。

<p><!--@Because of the additional security risks NPAPI poses to users, extensions that use it will require manual review before being accepted in the
<a href="https://chrome.google.com/webstore">Chrome Web Store</a>.-->
由于 NPAPI 可能会给用户带来额外的安全风险，使用它的扩展程序在被 Chrome
网上应用店接受前要求人工审核。
</p>

<h2 id="details"><!--@Details-->详情</h2>

<p>
<!--@How to develop an NPAPI plugin is outside the scope of this document.
See <a href="https://developer.mozilla.org/en/Plugins">Mozilla's
NPAPI plugin reference</a> for information on how to do that.-->
如何开发 NPAPI 插件的内容不在本文档的范围内，有关信息请参见
<a href="https://developer.mozilla.org/en/Plugins">Mozilla 的 NPAPI
插件参考</a>（英文）。
</p>

<p>
<!--@Once you have an NPAPI plugin,
follow these steps to get your extension using it.-->
一旦您开发好了 NPAPI 插件，请遵循以下步骤让您的扩展程序使用它。
</p>

<ol>
  <li>
    <!--@Add a section to your extension's <code>manifest.json</code>
    that describes where to find the plugin,
    along with other properties about it:-->
    在您的扩展程序的 <code>manifest.json</code>
    文件中添加一部分内容，描述插件的位置及其他有关属性：

<pre data-filename="manifest.json">
{
  "name": "我的扩展程序",
  ...
  <b>"plugins": [
    { "path": "extension_plugin.dll" }
  ]</b>,
  ...
}
</pre>

    <p>
    <!--@The "path" property specifies the path to your plugin,
    relative to the manifest file.
    The "public" property specifies whether
    your plugin can be accessed by regular web pages;
    the default is false,
    meaning only your extension can load the plugin. Add
    <code>"public": true</code> to make your plugin accessible on
    regular web pages and content scripts. But
    <a href="#security-considerations">be careful</a> - any
    web page will then be able to call into your plugin.-->
    "path" 属性指定插件的路径，相对于清单文件。"public"
    属性指定普通的网页能否访问您的插件，默认为
    false，只有您的扩展程序才能加载插件。添加 <code>"public": true</code>
    可以使您的插件能够在普通网页和内容脚本中访问，但是<a
    href="#security-considerations">一定要小心</a>，任何网页都能调用您的插件。
    </p>
   </li>

   <li>
     <!--@Create an HTML file that loads your plugin by mime-type.
     Assuming your mime-type is "application/x-my-extension":-->
     创建一个 HTML 文件，通过 MIME 类型加载您的插件。假定您的 MIME 类型为
     "application/x-my-extension"：

<pre>
&lt;embed type="application/x-my-extension" id="pluginId"></embed>
&lt;script>
  var plugin = document.getElementById("pluginId");
  var result = plugin.myPluginMethod();  // 调用您的插件中的方法
  console.log("我的插件返回了：" + result);
&lt;/script></pre>

     <p>
     <!--@This can be inside a background page
     or any other HTML page used by your extension.
     If your plugin is "public",
     you can even use a content script to programmatically
     insert your plugin into a web page.-->
     这些代码可以放在后台页面或者您的扩展程序使用的其他任何
     HTML
     页面中。如果您的插件是公共（"public"）的，您甚至可以使用内容脚本通过编程方式向网页中插入您的插件。
     </p>
   </li>
</ol>

<h2 id="security-considerations"><!--@Security considerations-->安全性考虑</h2>

<p>
<!--@Including an NPAPI plugin in your extension is dangerous because plugins
have unrestricted access to the local machine.  If your plugin contains
a vulnerability, an attacker might be able to exploit that vulnerability
to install malicious software on the user's machine.  Instead, avoid
including an NPAPI plugin whenever possible.-->
在您的扩展程序中包含 NPAPI
插件是危险的，因为插件对本地计算机的访问不受限制。如果您的插件包含漏洞，攻击者可能会利用漏洞在用户的计算机上安装恶意软件。所以要尽可能地避免使用
NPAPI 插件。
</p>

<p>
<!--@Marking your NPAPI plugin "public" increase the attack surface of your
extension because the plugin is exposed directly to web content, making
it easier for a malicious web site to manipulate your plugin.  Instead,
avoid making your NPAPI plugin public whenever possible.-->
将您的 NPAPI
插件标记为公共的（"public"）增加了您的扩展程序受到攻击的可能性，因为插件直接暴露在网页内容中，使得恶意网站更容易操纵您的插件。所以尽可能不要将您的
NPAPI 插件标记为公共的。
</p>
      </div>
    </div>
  </body>

  <div id="gc-footer">
    <button class="google-button" id="scroll-to-top">↑</button>
    <button class="google-button" id="send-feedback" style="display:none">Send Feedback</button>
    <div class="text">
      <p>
        <!--@Except as otherwise <a href="http://code.google.com/policies.html#restrictions">noted</a>,
        the content of this page is licensed under the <a rel="license" href="http://creativecommons.org/licenses/by/3.0/">Creative Commons
        Attribution 3.0 License</a>, and code samples are licensed under the
        <a rel="license" href="http://code.google.com/google_bsd_license.html">BSD License</a>.-->
        该页面翻译自
        <a href="https://developer.chrome.com/extensions/">Google Chrome Extensions</a>
        与
        <a href="https://developer.chrome.com/apps/">Google Chrome Apps</a>。除非特别<a href="https://code.google.com/policies.html#restrictions">说明</a>，该页面的内容遵循
        <a rel="license" href="http://creativecommons.org/licenses/by/3.0/">Creative Commons Attribution 3.0
        License</a>，代码示例遵循
        <a rel="license" href="http://code.google.com/google_bsd_license.html">BSD License</a>。
      </p>
      <p class="crxdoczh-footer">
        <a href="https://code.google.com/p/crxdoczh/">crxdoczh 项目主页</a>
        <a href="https://code.google.com/p/crxdoczh/issues/entry?template=%E7%BD%91%E7%AB%99%E5%8F%8D%E9%A6%88">发送反馈</a>
        <a href="" rel="publisher">
          Google+ 页面
        </a>
        <a href="https://plus.google.com/communities/105384952265487436177">Google+ 社群</a>
      </p>
      <script src="../../developer.chrome.com/static/js/platform_chooser.js" type="text/javascript"></script>
      <script src="../../developer.chrome.com/static/js/popup.js" type="text/javascript"></script>
      <script src="../../developer.chrome.com/static/js/prettify.js" type="text/javascript"></script>
      <script src="../../developer.chrome.com/static/js/scroll.js" type="text/javascript"></script>
      <script src="../../developer.chrome.com/static/js/sidebar.js" type="text/javascript"></script>
      <script src="../../developer.chrome.com/static/js/tabs.js" type="text/javascript"></script>
      <script>
        (function() {
          // Auto syntax highlight all pre tags.
          var preElements = document.getElementsByTagName('pre');
          for (var i = 0; i < preElements.length; i++) {
            var preElement = preElements[i];
            preElement.classList.add('prettyprint');
            var datasetFilename = preElement.getAttribute('data-filename');
            if (datasetFilename) {
              var filename = document.createElement('div');
              filename.className = 'filename nocode';
              filename.textContent = datasetFilename;
              preElement.insertBefore(filename, preElement.firstChild);
            }
          }
          prettyPrint();
        })();

        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-25062424-1']);
        _gaq.push(['_trackPageview']);

        (function() {
          var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
          ga.src = 'https://ssl.google-analytics.com/ga.js';
          var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();

        window.___gcfg = {
          lang: 'zh-CN'
        };
        (function() {
          var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
          po.src = 'https://apis.google.com/js/plusone.js';
          var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
        })();
      </script>
    </div>
  </div>
</html>
