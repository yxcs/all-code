<!DOCTYPE html>
<html>
  <head>
    <title>丰富的通知 - Google Chrome 扩展程序开发文档（非官方中文版）</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link href="/static/css/site.css" rel="stylesheet" type="text/css">
    <link href="https://developer.chrome.com/static/css/print.css" rel="stylesheet" type="text/css" media="print">
    <link href="https://developer.chrome.com/static/css/prettify.css" rel="stylesheet" type="text/css">
    <link href='//fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
  </head>

  <body>
    <div id="gc-topnav">
      <table><tr>
      <td id="chrome-logo">
        <a href="/extensions/" title="Google Chrome 扩展程序" id="view-original">
          <img src="https://developer.chrome.com/static/images/chrome-logo.png" alt=""> chrome
        </a>
        <script type="text/javascript">
          document.getElementById('view-original').href = "https://developer.chrome.com" + location.pathname;
        </script>
        <div id="platform-chooser">
          <button id="platform-chooser-toggle" data-menu="platform-chooser-popup">
            扩展程序 &#x25be;&#x202F;
          </button>
          <div id="platform-chooser-popup">
            <button class="apps" data-href="/apps/about_apps.html"><!--@apps-->应用</button>
            <button class="extensions" data-href="/extensions"><!--@extensions-->扩展程序</button>
          </div>
        </div>（非官方中文版）
      </td>
      <td>
        <ul>
          <li>
            <a href="/extensions/samples.html"
               title="示例 扩展程序（包含源代码）"><!--@Samples-->示例</a>
          </li>
          <li>
            <a href="http://groups.google.com/a/chromium.org/group/chromium-extensions"
               title="Google Chrome 扩展程序开发者论坛"
               target="_blank"><!--@Group-->论坛（英文）</a>
          </li>
          <li>
            <a href="http://stackoverflow.com/tags/google-chrome-extension/info"
               title="Stack Overflow 上的 [google-chrome-extension] 标签"
               target="_blank">Stack overflow</a>
          </li>
        </ul>
      </td>
      </tr></table>
    </div>
    <div id="gc-topnav-space"></div>
    <div id="gc-container">
      <div id="gc-sidebar">
        <g:plusone></g:plusone>
        <ul 
            class="level1 ">
        <li class="level2">
              <a href="/extensions/getstarted.html" class="level2 ">入门</a>
        </li><li class="level2">
              <a href="/extensions/overview.html" class="level2 ">概述</a>
        </li><li class="level2">
              <a href="/extensions/whats_new.html" class="level2 ">新增功能</a>
        </li><li class="level2">
              <a href="/extensions/devguide.html" class="level2 ">开发者指南</a>
          <ul 
              class="level2 ">
          <li class="level3">
              <a class="button level3">
                <span class="level3">浏览器用户界面</span>
                <div class="toggleIndicator level3 toggled"></div>
              </a>
            <ul toggleable
                class="level3 ">
            <li class="level4">
                  <a href="/extensions/browserAction.html" class="level4 ">浏览器按钮</a>
            </li><li class="level4">
                  <a href="/extensions/contextMenus.html" class="level4 ">右键菜单</a>
            </li><li class="level4">
                  <a  class="level4 selected">桌面通知</a>
            </li><li class="level4">
                  <a href="/extensions/omnibox.html" class="level4 ">多功能框</a>
            </li><li class="level4">
                  <a href="/extensions/options.html" class="level4 ">选项页面</a>
            </li><li class="level4">
                  <a href="/extensions/override.html" class="level4 ">替代页面</a>
            </li><li class="level4">
                  <a href="/extensions/pageAction.html" class="level4 ">页面按钮</a>
            </li>
            </ul>
          </li><li class="level3">
              <a class="button level3">
                <span class="level3">浏览器交互</span>
                <div class="toggleIndicator level3"></div>
              </a>
            <ul toggleable
                class="level3 hidden">
            <li class="level4">
                  <a href="/extensions/bookmarks.html" class="level4 ">书签</a>
            </li><li class="level4">
                  <a href="/extensions/cookies.html" class="level4 ">Cookie</a>
            </li><li class="level4">
                  <a href="/extensions/devtools.html" class="level4 ">扩展开发者工具</a>
            </li><li class="level4">
                  <a href="/extensions/events.html" class="level4 ">事件</a>
            </li><li class="level4">
                  <a href="/extensions/history.html" class="level4 ">历史记录</a>
            </li><li class="level4">
                  <a href="/extensions/management.html" class="level4 ">管理</a>
            </li><li class="level4">
                  <a href="/extensions/tabs.html" class="level4 ">标签页</a>
            </li><li class="level4">
                  <a href="/extensions/windows.html" class="level4 ">窗口</a>
            </li>
            </ul>
          </li><li class="level3">
              <a class="button level3">
                <span class="level3">实现</span>
                <div class="toggleIndicator level3"></div>
              </a>
            <ul toggleable
                class="level3 hidden">
            <li class="level4">
                  <a href="/extensions/a11y.html" class="level4 ">辅助功能</a>
            </li><li class="level4">
                  <a href="/extensions/event_pages.html" class="level4 ">事件页面</a>
            </li><li class="level4">
                  <a href="/extensions/contentSecurityPolicy.html" class="level4 ">内容安全策略</a>
            </li><li class="level4">
                  <a href="/extensions/content_scripts.html" class="level4 ">内容脚本</a>
            </li><li class="level4">
                  <a href="/extensions/xhr.html" class="level4 ">跨站 XHR</a>
            </li><li class="level4">
                  <a href="/extensions/i18n.html" class="level4 ">国际化支持</a>
            </li><li class="level4">
                  <a href="/extensions/messaging.html" class="level4 ">消息传递</a>
            </li><li class="level4">
                  <a href="/extensions/permissions.html" class="level4 ">可选权限</a>
            </li><li class="level4">
                  <a href="/extensions/npapi.html" class="level4 ">NPAPI 插件</a>
            </li>
            </ul>
          </li><li class="level3">
              <a class="button level3">
                <span class="level3">完成</span>
                <div class="toggleIndicator level3"></div>
              </a>
            <ul toggleable
                class="level3 hidden">
            <li class="level4">
                  <a href="/extensions/hosting.html" class="level4 ">托管</a>
            </li><li class="level4">
                  <a href="/extensions/external_extensions.html" class="level4 ">其他发布选项</a>
            </li>
            </ul>
          </li>
          </ul>
        </li><li class="level2">
              <a href="/extensions/tutorials.html" class="level2 ">教程</a>
          <ul 
              class="level2 ">
          <li class="level3">
                <a href="/extensions/tut_migration_to_manifest_v2.html" class="level3 ">清单文件版本 2</a>
          </li><li class="level3">
                <a href="/extensions/tut_debugging.html" class="level3 ">调试</a>
          </li><li class="level3">
                <a href="/extensions/tut_analytics.html" class="level3 ">Google Analytics（分析）</a>
          </li><li class="level3">
                <a href="/extensions/tut_oauth.html" class="level3 ">OAuth</a>
          </li>
          </ul>
        </li><li class="level2">
              <span class="level2">参考</span>
          <ul 
              class="level2 ">
          <li class="level3">
              <a class="button level3">
                <span class="level3">格式</span>
                <div class="toggleIndicator level3"></div>
              </a>
            <ul toggleable
                class="level3 hidden">
            <li class="level4">
                  <a href="/extensions/manifest.html" class="level4 ">清单文件</a>
            </li><li class="level4">
                  <a href="/extensions/match_patterns.html" class="level4 ">匹配表达式</a>
            </li>
            </ul>
          </li><li class="level3">
                <a href="/extensions/permission_warnings.html" class="level3 ">权限警告</a>
          </li><li class="level3">
                <a href="/extensions/api_index.html" class="level3 ">chrome.* API</a>
          </li><li class="level3">
                <a href="/extensions/api_other.html" class="level3 ">其他 API</a>
          </li>
          </ul>
        </li><li class="level2">
              <span class="level2">更多</span>
          <ul 
              class="level2 ">
          <li class="level3">
                <a href="/extensions/faq.html" class="level3 ">常见问题</a>
          </li><li class="level3">
                <a href="http://code.google.com/chrome/webstore/docs/index.html" class="level3 ">Chrome 网上应用店</a>
          </li><li class="level3">
                <a href="http://code.google.com/chrome/apps/docs/developers_guide.html" class="level3 ">托管应用</a>
          </li><li class="level3">
                <a href="/extensions/themes.html" class="level3 ">主题背景</a>
          </li>
          </ul>
        </li>
        </ul>
      </div>
      <div id="gc-pagecontent">

<div id="toc">
  <ol>
    <li >
      <a href="#example"
         data-list-item
         >例子</a>
    </li>
    <li >
      <a href="#reference"
         data-list-item
         >API 参考</a>
    </li>
    <li >
      <a href="#communication"
         data-list-item
         >与其他视图通信</a>
    </li>
    <li >
      <a href="#examples"
         data-list-item
         >更多例子</a>
    </li>
  </ol>
</div>

<h1><!--@Rich Notifications-->丰富的通知</h1>

<p class="warning"><b><!--@Warning:-->警告：</b><!--@
<code>webKitNotifications.createHTMLNotification()</code> in the
<a href="http://www.chromium.org/developers/design-documents/desktop-notifications/api-specification">web notifications API</a> has been deprecated.
The new <a href="http://www.w3.org/TR/notifications/">web notifications API</a> only allows text.
<a href="notifications.html">Chrome notifications API</a>
will be promoted to stable soon and
web notifications will be updated
to use the new rich notifications format.
--><a href="http://www.chromium.org/developers/design-documents/desktop-notifications/api-specification">网络通知 API</a> 中的
<code>webKitNotifications.createHTMLNotification()</code>
已弃用，新的
<a href="http://www.w3.org/TR/notifications/">网络通知 API</a>
只允许文本通知。<a href="notifications.html">Chrome 浏览器的通知 API</a>
很快就会在稳定版中支持，网络通知将更新为新的丰富通知格式。
</p>

<p>
<!--@Use rich desktop notifications to notify users that something
important has happened.
Notifications appear outside the browser window.
As the following snapshots show,
the details of how notifications look
and where they're shown depend on the platform.-->
使用丰富的通知告诉用户发生了一些重要的事。通知出现在浏览器窗口的外面，如下面的截图所示，通知的显示方式与位置的具体细节取决于具体平台。
</p>

<img src="https://developer.chrome.com/static/images/notification-windows.png"
  width="28%" style="margin:2em 0.5em 1em; border:1px solid black;"
  alt="Notifications on Microsoft Windows"/>
<img src="https://developer.chrome.com/static/images/notification-mac.png"
  width="28%" style="margin:2em 0.5em 1em; border:1px solid black;"
  alt="Notifications on Mac OS X"/>
<img src="https://developer.chrome.com/static/images/notification-linux.png"
  width="28%" style="margin:2em 0.5em 1em; border:1px solid black;"
  alt="Notifications on Ubuntu Linux"/>

<p>
<!--@You create the notification window
using a bit of JavaScript and, optionally,
an HTML page packaged inside your extension.-->
您只要用一点点 JavaScript 代码以及可选的一个与您的扩展程序一起打包的 HTML
页面就能创建通知窗口。
</p>


<h2 id="example"><!--@Example-->例子</h2>

<p><!--@First, declare the <code>notifications</code> permission in your manifest:-->
首先在您的清单文件中声明 <code>notifications</code> 权限：
</p>
<pre data-filename="manifest.json">
{
  "name": "我的扩展程序",
  "manifest_version": 2,
  ...
<b>  "permissions": [
    "notifications"
  ]</b>,
  ...
  // <strong>注意：</strong>由于 <a href="https://code.google.com/p/chromium/issues/detail?id=134315">bug 134315</a>，您必须将您希望与 createNotification()
  // 一起使用的所有图片声明为可以在网页中访问的资源。
<b>  "web_accessible_resources": [
    "48.png"
  ]</b>,
}
</pre>

<p><!--@Then, use <code>webkitNotifications</code> object to create notifications:-->
然后，使用 <code>webkitNotifications</code> 对象创建通知：
</p>

<pre>
// <strong>注意：</strong>没有必要调用 webkitNotifications.checkPermission()。
// 声明了 <em>notifications</em> 权限的扩展程序总是允许创建通知。

// 创建一个简单的文本通知：
var notification = webkitNotifications.createNotification(
  '48.png',  // 图标 URL，可以是相对路径
  '您好！',  // 通知标题
  '内容（Lorem ipsum...）'  // 通知正文文本
);

// 或者创建 HTML 通知：
var notification = webkitNotifications.createHTMLNotification(
  'notification.html'  // HTML 的 URL，可以是相对路径
);

// 然后显示通知。
notification.show();
</pre>

<h2 id="reference">API <!--@Reference-->参考</h2>

<p><!--@See the -->参见<a href="http://dev.chromium.org/developers/design-documents/desktop-notifications/api-specification"><!--@Desktop Notifications Draft Specification-->桌面通知规范草案</a><!--@.-->（英文）。</p>


<h2 id="communication"><!--@Communicating with Other Views-->与其他视图通信</h2>

<p>
<!--@You can communicate between a notification
and other views in your extension using-->您可以使用
<a href="extension.html#method-getBackgroundPage">extension.getBackgroundPage</a> <!--@and-->和
<a href="extension.html#method-getViews">extension.getViews</a><!--@. For example:-->
在您的扩展程序中实现通知与其他视图间的通信。例如：
</p>

<pre data-filename="notification.js">
chrome.extension.getBackgroundPage().doThing();
</pre>
<pre data-filename="background.js">
chrome.extension.getViews({type:"notification"}).forEach(function(win) {
  win.doOtherThing();
});
</pre>


<h2 id="examples"><!--@More Examples-->更多例子</h2>

<p>
<!--@You can find a simple example
of using notifications in the-->
您可以在
<a href="http://src.chromium.org/viewvc/chrome/trunk/src/chrome/common/extensions/docs/examples/api/notifications/">examples/api/notifications</a>
<!--@directory.
For other examples
and for help in viewing the source code,
see -->
目录中找到一个使用通知的简单例子。有关其他例子以及查看源代码的帮助，请参见<a href="samples.html"><!--@Samples-->示例</a><!--@.-->。
</p>

<p>
<!--@Also see html5rocks.com's
-->另外，您也可以参见
html5rocks.com（英文）上的<a href="http://www.html5rocks.com/tutorials/notifications/quick/"><!--@notifications tutorial-->通知教程</a><!--@.
Ignore the permission-related code;
it's unnecessary if you declare the "notifications" permission.-->。请忽略与权限有关的代码，如果您声明了
"notifications" 权限它们就没有必要了。
</p>
      </div>
    </div>
  </body>

  <div id="gc-footer">
    <button class="google-button" id="scroll-to-top">↑</button>
    <button class="google-button" id="send-feedback" style="display:none">Send Feedback</button>
    <div class="text">
      <p>
        <!--@Except as otherwise <a href="http://code.google.com/policies.html#restrictions">noted</a>,
        the content of this page is licensed under the <a rel="license" href="http://creativecommons.org/licenses/by/3.0/">Creative Commons
        Attribution 3.0 License</a>, and code samples are licensed under the
        <a rel="license" href="http://code.google.com/google_bsd_license.html">BSD License</a>.-->
        该页面翻译自
        <a href="https://developer.chrome.com/extensions/">Google Chrome Extensions</a>
        与
        <a href="https://developer.chrome.com/apps/">Google Chrome Apps</a>。除非特别<a href="https://code.google.com/policies.html#restrictions">说明</a>，该页面的内容遵循
        <a rel="license" href="http://creativecommons.org/licenses/by/3.0/">Creative Commons Attribution 3.0
        License</a>，代码示例遵循
        <a rel="license" href="http://code.google.com/google_bsd_license.html">BSD License</a>。
      </p>
      <p class="crxdoczh-footer">
        <a href="https://code.google.com/p/crxdoczh/">crxdoczh 项目主页</a>
        <a href="https://code.google.com/p/crxdoczh/issues/entry?template=%E7%BD%91%E7%AB%99%E5%8F%8D%E9%A6%88">发送反馈</a>
        <a href="https:////plus.google.com/112419687097816423998?prsrc=3" rel="publisher">
          Google+ 页面
        </a>
        <a href="https://plus.google.com/communities/105384952265487436177">Google+ 社群</a>
      </p>
      <script src="https://developer.chrome.com/static/js/platform_chooser.js" type="text/javascript"></script>
      <script src="https://developer.chrome.com/static/js/popup.js" type="text/javascript"></script>
      <script src="https://developer.chrome.com/static/js/prettify.js" type="text/javascript"></script>
      <script src="https://developer.chrome.com/static/js/scroll.js" type="text/javascript"></script>
      <script src="https://developer.chrome.com/static/js/sidebar.js" type="text/javascript"></script>
      <script src="https://developer.chrome.com/static/js/tabs.js" type="text/javascript"></script>
      <script>
        (function() {
          // Auto syntax highlight all pre tags.
          var preElements = document.getElementsByTagName('pre');
          for (var i = 0; i < preElements.length; i++) {
            var preElement = preElements[i];
            preElement.classList.add('prettyprint');
            var datasetFilename = preElement.getAttribute('data-filename');
            if (datasetFilename) {
              var filename = document.createElement('div');
              filename.className = 'filename nocode';
              filename.textContent = datasetFilename;
              preElement.insertBefore(filename, preElement.firstChild);
            }
          }
          prettyPrint();
        })();

        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-25062424-1']);
        _gaq.push(['_trackPageview']);

        (function() {
          var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
          ga.src = 'https://ssl.google-analytics.com/ga.js';
          var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();

        window.___gcfg = {
          lang: 'zh-CN'
        };
        (function() {
          var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
          po.src = 'https://apis.google.com/js/plusone.js';
          var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
        })();
      </script>
    </div>
  </div>
</html>
