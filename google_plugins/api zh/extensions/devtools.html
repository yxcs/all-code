<!DOCTYPE html>
<html>
  <head>
    <title>æ‰©å±•å¼€å‘è€…å·¥å…· - Google Chrome æ‰©å±•ç¨‹åºå¼€å‘æ–‡æ¡£ï¼ˆéå®˜æ–¹ä¸­æ–‡ç‰ˆï¼‰</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link href="../static/css/site.css" rel="stylesheet" type="text/css">
    <link href="../../developer.chrome.com/static/css/print.css" rel="stylesheet" type="text/css" media="print">
    <link href="../../developer.chrome.com/static/css/prettify.css" rel="stylesheet" type="text/css">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
  </head>

  <body>


<!-- Copyright © 2005. Spidersoft Ltd -->
<style>
A.applink:hover {border: 2px dotted #DCE6F4;padding:2px;background-color:#ffff00;color:green;text-decoration:none}
A.applink       {border: 2px dotted #DCE6F4;padding:2px;color:#2F5BFF;background:transparent;text-decoration:none}
A.info          {color:#2F5BFF;background:transparent;text-decoration:none}
A.info:hover    {color:green;background:transparent;text-decoration:underline}
</style>
<div style='BORDER: 1px solid #DCE6F4; MARGIN-TOP: 20px; MARGIN-BOTTOM: 20px; MARGIN-LEFT: 5px; MARGIN-RIGHT: 5px; PADDING: 5px; BACKGROUND-COLOR: #eef8ff;line-height:180%; COLOR: #000000; font-family: Arial; font-size: 8pt; width=100%; FILTER: progid:DXImageTransform.Microsoft.Gradient(GradientType=0, StartColorStr="#FFFFFFFF", EndColorStr="#F2F5FAFF");'>
This page was saved using <a class="applink" href="http://www.spidersoft.com"><b>WebZIP 7.0.3.1030</b></a> <a class="applink" href="http://www.spidersoft.com"><b>offline browser</b></a>  on  12/24/13 11:31:36.<br>
<b>Address:</b> <a class="info" href="https://crxdoc-zh.appspot.com/extensions/devtools.html">https://crxdoc-zh.appspot.com/extensions/devtools.html</a><br>
<b>Title:</b> æ‰©å±•å¼€å‘è€…å·¥å…· - Google Chrome æ‰©å±•ç¨‹åºå¼€å‘æ–‡æ¡£ï¼ˆéå®˜æ–¹ä¸­æ–‡ç‰ˆï¼‰ &nbsp;&bull;&nbsp; <b>Size:</b> 42540<br></div>
<!-- /Copyright © 2005. Spidersoft Ltd -->


    <div id="gc-topnav">
      <table><tr>
      <td id="chrome-logo">
        <a href="extensions.html" title="Google Chrome æ‰©å±•ç¨‹åº" id="view-original">
          <img src="../../developer.chrome.com/static/images/chrome-logo.png" alt=""> chrome
        </a>
        <script type="text/javascript">
          document.getElementById('view-original').href = "https://developer.chrome.com" + location.pathname;
        </script>
        <div id="platform-chooser">
          <button id="platform-chooser-toggle" data-menu="platform-chooser-popup">
            æ‰©å±•ç¨‹åº &#x25be;&#x202F;
          </button>
          <div id="platform-chooser-popup">
            <button class="apps" data-href="/apps/about_apps.html"><!--@apps-->åº”ç”¨</button>
            <button class="extensions" data-href="/extensions"><!--@extensions-->æ‰©å±•ç¨‹åº</button>
          </div>
        </div>ï¼ˆéå®˜æ–¹ä¸­æ–‡ç‰ˆï¼‰
      </td>
      <td>
        <ul>
          <li>
            <a href="samples.html"
               title="ç¤ºä¾‹ æ‰©å±•ç¨‹åºï¼ˆåŒ…å«æºä»£ç ï¼‰"><!--@Samples-->ç¤ºä¾‹</a>
          </li>
          <li>
            <a href="http://groups.google.com/a/chromium.org/group/chromium-extensions"
               title="Google Chrome æ‰©å±•ç¨‹åºå¼€å‘è€…è®ºå›"
               target="_blank"><!--@Group-->è®ºå›ï¼ˆè‹±æ–‡ï¼‰</a>
          </li>
          <li>
            <a href="http://stackoverflow.com/tags/google-chrome-extension/info"
               title="Stack Overflow ä¸Šçš„ [google-chrome-extension] æ ‡ç­¾"
               target="_blank">Stack overflow</a>
          </li>
        </ul>
      </td>
      </tr></table>
    </div>
    <div id="gc-topnav-space"></div>
    <div id="gc-container">
      <div id="gc-sidebar">
        <g:plusone></g:plusone>
        <ul 
            class="level1 ">
        <li class="level2">
              <a href="getstarted.html" class="level2 ">å…¥é—¨</a>
        </li><li class="level2">
              <a href="overview.html" class="level2 ">æ¦‚è¿°</a>
        </li><li class="level2">
              <a href="whats_new.html" class="level2 ">æ–°å¢åŠŸèƒ½</a>
        </li><li class="level2">
              <a href="devguide.html" class="level2 ">å¼€å‘è€…æŒ‡å—</a>
          <ul 
              class="level2 ">
          <li class="level3">
              <a class="button level3">
                <span class="level3">æµè§ˆå™¨ç”¨æˆ·ç•Œé¢</span>
                <div class="toggleIndicator level3"></div>
              </a>
            <ul toggleable
                class="level3 hidden">
            <li class="level4">
                  <a href="browserAction.html" class="level4 ">æµè§ˆå™¨æŒ‰é’®</a>
            </li><li class="level4">
                  <a href="contextMenus.html" class="level4 ">å³é”®èœå•</a>
            </li><li class="level4">
                  <a href="desktop_notifications.html" class="level4 ">æ¡Œé¢é€šçŸ¥</a>
            </li><li class="level4">
                  <a href="omnibox.html" class="level4 ">å¤šåŠŸèƒ½æ¡†</a>
            </li><li class="level4">
                  <a href="options.html" class="level4 ">é€‰é¡¹é¡µé¢</a>
            </li><li class="level4">
                  <a href="override.html" class="level4 ">æ›¿ä»£é¡µé¢</a>
            </li><li class="level4">
                  <a href="pageAction.html" class="level4 ">é¡µé¢æŒ‰é’®</a>
            </li>
            </ul>
          </li><li class="level3">
              <a class="button level3">
                <span class="level3">æµè§ˆå™¨äº¤äº’</span>
                <div class="toggleIndicator level3 toggled"></div>
              </a>
            <ul toggleable
                class="level3 ">
            <li class="level4">
                  <a href="bookmarks.html" class="level4 ">ä¹¦ç­¾</a>
            </li><li class="level4">
                  <a href="cookies.html" class="level4 ">Cookie</a>
            </li><li class="level4">
                  <a  class="level4 selected">æ‰©å±•å¼€å‘è€…å·¥å…·</a>
            </li><li class="level4">
                  <a href="events.html" class="level4 ">äº‹ä»¶</a>
            </li><li class="level4">
                  <a href="history.html" class="level4 ">å†å²è®°å½•</a>
            </li><li class="level4">
                  <a href="management.html" class="level4 ">ç®¡ç†</a>
            </li><li class="level4">
                  <a href="tabs.html" class="level4 ">æ ‡ç­¾é¡µ</a>
            </li><li class="level4">
                  <a href="windows.html" class="level4 ">çª—å£</a>
            </li>
            </ul>
          </li><li class="level3">
              <a class="button level3">
                <span class="level3">å®ç°</span>
                <div class="toggleIndicator level3"></div>
              </a>
            <ul toggleable
                class="level3 hidden">
            <li class="level4">
                  <a href="a11y.html" class="level4 ">è¾…åŠ©åŠŸèƒ½</a>
            </li><li class="level4">
                  <a href="event_pages.html" class="level4 ">äº‹ä»¶é¡µé¢</a>
            </li><li class="level4">
                  <a href="contentSecurityPolicy.html" class="level4 ">å†…å®¹å®‰å…¨ç­–ç•¥</a>
            </li><li class="level4">
                  <a href="content_scripts.html" class="level4 ">å†…å®¹è„šæœ¬</a>
            </li><li class="level4">
                  <a href="xhr.html" class="level4 ">è·¨ç«™ XHR</a>
            </li><li class="level4">
                  <a href="i18n.html" class="level4 ">å›½é™…åŒ–æ”¯æŒ</a>
            </li><li class="level4">
                  <a href="messaging.html" class="level4 ">æ¶ˆæ¯ä¼ é€’</a>
            </li><li class="level4">
                  <a href="permissions.html" class="level4 ">å¯é€‰æƒé™</a>
            </li><li class="level4">
                  <a href="npapi.html" class="level4 ">NPAPI æ’ä»¶</a>
            </li>
            </ul>
          </li><li class="level3">
              <a class="button level3">
                <span class="level3">å®Œæˆ</span>
                <div class="toggleIndicator level3"></div>
              </a>
            <ul toggleable
                class="level3 hidden">
            <li class="level4">
                  <a href="hosting.html" class="level4 ">æ‰˜ç®¡</a>
            </li><li class="level4">
                  <a href="external_extensions.html" class="level4 ">å…¶ä»–å‘å¸ƒé€‰é¡¹</a>
            </li>
            </ul>
          </li>
          </ul>
        </li><li class="level2">
              <a href="tutorials.html" class="level2 ">æ•™ç¨‹</a>
          <ul 
              class="level2 ">
          <li class="level3">
                <a href="tut_migration_to_manifest_v2.html" class="level3 ">æ¸…å•æ–‡ä»¶ç‰ˆæœ¬ 2</a>
          </li><li class="level3">
                <a href="tut_debugging.html" class="level3 ">è°ƒè¯•</a>
          </li><li class="level3">
                <a href="tut_analytics.html" class="level3 ">Google Analyticsï¼ˆåˆ†æï¼‰</a>
          </li><li class="level3">
                <a href="tut_oauth.html" class="level3 ">OAuth</a>
          </li>
          </ul>
        </li><li class="level2">
              <span class="level2">å‚è€ƒ</span>
          <ul 
              class="level2 ">
          <li class="level3">
              <a class="button level3">
                <span class="level3">æ ¼å¼</span>
                <div class="toggleIndicator level3"></div>
              </a>
            <ul toggleable
                class="level3 hidden">
            <li class="level4">
                  <a href="manifest.html" class="level4 ">æ¸…å•æ–‡ä»¶</a>
            </li><li class="level4">
                  <a href="match_patterns.html" class="level4 ">åŒ¹é…è¡¨è¾¾å¼</a>
            </li>
            </ul>
          </li><li class="level3">
                <a href="permission_warnings.html" class="level3 ">æƒé™è­¦å‘Š</a>
          </li><li class="level3">
                <a href="api_index.html" class="level3 ">chrome.* API</a>
          </li><li class="level3">
                <a href="api_other.html" class="level3 ">å…¶ä»– API</a>
          </li>
          </ul>
        </li><li class="level2">
              <span class="level2">æ›´å¤š</span>
          <ul 
              class="level2 ">
          <li class="level3">
                <a href="faq.html" class="level3 ">å¸¸è§é—®é¢˜</a>
          </li><li class="level3">
                <a href="http://code.google.com/chrome/webstore/docs/index.html" class="level3 ">Chrome ç½‘ä¸Šåº”ç”¨åº—</a>
          </li><li class="level3">
                <a href="http://code.google.com/chrome/apps/docs/developers_guide.html" class="level3 ">æ‰˜ç®¡åº”ç”¨</a>
          </li><li class="level3">
                <a href="themes.html" class="level3 ">ä¸»é¢˜èƒŒæ™¯</a>
          </li>
          </ul>
        </li>
        </ul>
      </div>
      <div id="gc-pagecontent">

<div id="toc">
  <ol>
    <li >
      <a href="#overview"
         data-list-item
         >æ¦‚è¿°</a>
    </li>
    <li >
      <a href="#devtools-page"
         data-list-item
         >å¼€å‘è€…å·¥å…·ç½‘é¡µ</a>
    </li>
    <li >
      <a href="#creating"
         data-list-item
         >åˆ›å»ºå¼€å‘è€…å·¥å…·æ‰©å±•ç¨‹åº</a>
    </li>
    <li >
      <a href="#devtools-ui"
         data-list-item
         >å¼€å‘è€…å·¥å…·ç”¨æˆ·ç•Œé¢å…ƒç´ ï¼šé¢æ¿å’Œä¾§è¾¹æ çª—æ ¼</a>
    </li>
    <li >
      <a href="#solutions"
         data-list-item
         >åœ¨æ‰©å±•ç¨‹åºçš„ä¸åŒéƒ¨ä»¶ä¹‹é—´é€šä¿¡</a>
      <ol>
        <li >
          <a href="#injecting"
             data-list-item
             >æ’å…¥å†…å®¹è„šæœ¬</a>
        </li>
        <li >
          <a href="#evaluating-js"
             data-list-item
             >åœ¨å®¡æŸ¥çš„çª—å£ä¸­æ‰§è¡Œ JavaScript</a>
        </li>
        <li >
          <a href="#selected-element"
             data-list-item
             >å°†é€‰å®šå…ƒç´ ä¼ é€’ç»™å†…å®¹è„šæœ¬</a>
        </li>
        <li >
          <a href="#content-script-to-devtools"
             data-list-item
             >å†…å®¹è„šæœ¬ä¸å¼€å‘è€…å·¥å…·ç½‘é¡µé—´çš„æ¶ˆæ¯ä¼ é€’</a>
        </li>
        <li >
          <a href="#detecting-open-close"
             data-list-item
             >æ£€æµ‹å¼€å‘è€…å·¥å…·ä½•æ—¶æ‰“å¼€ä½•æ—¶å…³é—­</a>
        </li>
      </ol>
    </li>
    <li >
      <a href="#more"
         data-list-item
         >æ›´å¤šä¿¡æ¯</a>
    </li>
    <li >
      <a href="#examples"
         data-list-item
         >ä¾‹å­</a>
    </li>
  </ol>
</div>

<h1><!--@Extending DevTools-->æ‰©å±•å¼€å‘è€…å·¥å…·</h1>

<h2 id="overview"><!--@Overview-->æ¦‚è¿°</h2>

<p><!--@A DevTools extension adds functionality to the Chrome DevTools. It can add new
UI panels and sidebars, interact with the inspected page, get information about
network requests, and more. DevTools extensions have access to an additional set
of DevTools-specific extension APIs:-->
å¼€å‘è€…å·¥å…·æ‰©å±•ç¨‹åºä¸º Chrome
æµè§ˆå™¨çš„å¼€å‘è€…å·¥å…·å¢åŠ æ–°åŠŸèƒ½ï¼Œå¯ä»¥åœ¨ç”¨æˆ·ç•Œé¢ä¸­æ·»åŠ æ–°çš„é¢æ¿å’Œä¾§è¾¹æ ã€ä¸å®¡æŸ¥çš„ç½‘é¡µäº¤äº’ã€è·å–ç½‘ç»œè¯·æ±‚çš„æœ‰å…³ä¿¡æ¯ç­‰ã€‚å¼€å‘è€…å·¥å…·æ‰©å±•ç¨‹åºå¯ä»¥è®¿é—®ä¸“é—¨çš„å¼€å‘è€…å·¥å…·æ‰©å±•ç¨‹åº
APIï¼š</p>

<ul>
<li><code><a href="devtools.inspectedWindow.html">devtools.inspectedWindow</a></code></li>
<li><code><a href="devtools.network.html">devtools.network</a></code></a></li>
<li><code><a href="devtools.panels.html">devtools.panels</a></code></a></li>
</ul>

<p><!--@A DevTools extension is structured like any other extension: it can have a
background page, content scripts, and other items. In addition, each DevTools
extension has a DevTools page, which has access to the DevTools APIs.-->
å¼€å‘è€…å·¥å…·æ‰©å±•ç¨‹åºä¸å…¶ä»–æ‰©å±•ç¨‹åºçš„ç»“æ„ç±»ä¼¼ï¼šå¯ä»¥æ‹¥æœ‰åå°ç½‘é¡µã€å†…å®¹è„šæœ¬ç­‰ã€‚æ­¤å¤–ï¼Œæ¯ä¸€ä¸ªå¼€å‘è€…å·¥å…·æ‰©å±•ç¨‹åºéƒ½æœ‰ä¸€ä¸ªå¼€å‘è€…å·¥å…·ç½‘é¡µï¼Œå®ƒèƒ½å¤Ÿè®¿é—®å¼€å‘è€…å·¥å…·
APIã€‚
</p>

<!--@<p><img src="../../developer.chrome.com/static/images/devtools-extension.png" alt="Architecture diagram
showing DevTools page communicating with the inspected window and the background
page. The background page is shown communicating with the content scripts and
accessing extension APIs. The DevTools page has access to the DevTools APIs, for
example, creating panels."/></p>-->
<p><img src="../../developer.chrome.com/static/images/devtools-extension.png" alt="è¯¥æ¶æ„ç¤ºæ„å›¾è¡¨ç¤ºå¼€å‘è€…å·¥å…·ç½‘é¡µä¸å®¡æŸ¥çš„çª—å£ä»¥åŠåå°ç½‘é¡µä¹‹é—´çš„é€šä¿¡ï¼Œå…¶ä¸­ï¼Œåå°ç½‘é¡µæ­£åœ¨ä¸å†…å®¹è„šæœ¬ä»¥åŠè®¿é—®çš„æ‰©å±•ç¨‹åº API é€šä¿¡ï¼Œå¼€å‘è€…å·¥å…·ç½‘é¡µèƒ½å¤Ÿè®¿é—®å¼€å‘è€…å·¥å…· APIï¼Œä¾‹å¦‚åˆ›å»ºé¢æ¿ã€‚"/></p>

<h2 id="devtools-page"><!--@The DevTools Page-->å¼€å‘è€…å·¥å…·ç½‘é¡µ</h2>

<p><!--@An instance of the extension's DevTools page is created each time a DevTools
window opens. The DevTools page exists for the lifetime of the DevTools window.
The DevTools page has access to the DevTools APIs and a limited set of extension
APIs. Specifically, the DevTools page can:-->
æ¯æ¬¡æ‰“å¼€å¼€å‘è€…å·¥å…·çª—å£æ—¶ï¼Œéƒ½ä¼šåˆ›å»ºæ‰©å±•ç¨‹åºçš„å¼€å‘è€…å·¥å…·ç½‘é¡µã€‚å¼€å‘è€…å·¥å…·ç½‘é¡µçš„ç”Ÿå‘½å‘¨æœŸä¸å¼€å‘è€…å·¥å…·çª—å£ç›¸åŒï¼Œå®ƒå¯ä»¥è®¿é—®å¼€å‘è€…å·¥å…·
API ä»¥åŠæœ‰é™çš„æ‰©å±•ç¨‹åº APIã€‚å…·ä½“è¯´æ¥ï¼Œå¼€å‘è€…å·¥å…·ç½‘é¡µå¯ä»¥ï¼š
</p>

<ul>

<li><!--@Create and interact with panels using the <code><a href="devtools.panels.html">devtools.panels</a></code>
APIs.-->
ä½¿ç”¨ <code><a href="devtools.panels.html">devtools.panels</a></code> API åˆ›å»ºé¢æ¿å¹¶ä¸ä¹‹äº¤äº’ã€‚
</li>

<li><!--@Get information about the inspected window and evaluate code in the inspected
window using the <code><a href="devtools.inspectedWindow.html">devtools.inspectedWindow</a></code> APIs.-->
ä½¿ç”¨ <code><a href="devtools.inspectedWindow.html">devtools.inspectedWindow</a></code> API
è·å–å®¡æŸ¥çª—å£çš„æœ‰å…³ä¿¡æ¯ï¼Œå¹¶åœ¨å®¡æŸ¥çš„çª—å£ä¸­æ‰§è¡Œä»£ç ã€‚
</li>

<li><!--@Get information about network requests using the <code><a href="devtools.network.html">devtools.network</a></code>
APIs.-->
ä½¿ç”¨ <code><a href="devtools.network.html">devtools.network</a></code> API è·å–ç½‘ç»œè¯·æ±‚çš„æœ‰å…³ä¿¡æ¯ã€‚
</li>

</ul>

<p><!--@The DevTools page cannot use most of the extensions APIs directly.  It has
access to the same subset of the <code><a href="extension.html">extension</a></code> 
and <code><a href="runtime.html">runtime</a></code>
APIs that a content script has access to. Like a content script, a DevTools page
can communicate with the background page using <a href="messaging.html">Message Passing</a>.
For an example, see <a href="#injecting">Injecting a Content Script</a>.-->
å¼€å‘è€…å·¥å…·ç½‘é¡µä¸èƒ½ç›´æ¥ä½¿ç”¨å¤§éƒ¨åˆ†æ‰©å±•ç¨‹åº APIï¼Œå’Œå†…å®¹è„šæœ¬ä¸€æ ·åªèƒ½è®¿é—®éƒ¨åˆ†
<code><a href="extension.html">extension</a></code> å’Œ <code><a href="runtime.html">runtime</a></code>
APIã€‚ä¸å†…å®¹è„šæœ¬ç±»ä¼¼ï¼Œå¼€å‘è€…å·¥å…·ç½‘é¡µå¯ä»¥ä½¿ç”¨<a href="messaging.html"
>æ¶ˆæ¯ä¼ é€’</a>ä¸åå°ç½‘é¡µé€šä¿¡ï¼Œæœ‰å…³ä¾‹å­è¯·å‚è§<a href="#injecting"
>æ’å…¥å†…å®¹è„šæœ¬</a>ã€‚
</p>

<h2 id="creating"><!--@Creating a DevTools Extension-->åˆ›å»ºå¼€å‘è€…å·¥å…·æ‰©å±•ç¨‹åº</h2>

<p><!--@To create a DevTools page for your extension, add the <code>devtools_page</code>
field in the extension manifest:-->
è¦ä¸ºæ‚¨çš„æ‰©å±•ç¨‹åºåˆ›å»ºä¸€ä¸ªå¼€å‘è€…å·¥å…·ç½‘é¡µï¼Œè¯·åœ¨æ‰©å±•ç¨‹åºçš„æ¸…å•æ–‡ä»¶ä¸­æ·»åŠ 
<code>devtools_page</code> å­—æ®µã€‚
</p>

<pre>
{
  "name": ...
  "version": "1.0",
  "minimum_chrome_version": "10.0",
  "devtools_page": "devtools.html",
  ...
}
</pre>

<p><!--@An instance of the <code>devtools_page</code> specified in your extension's
manifest is created for every DevTools window opened. The page may add other
extension pages as panels and sidebars to the DevTools window using the
<code><a href="devtools.panels.html">devtools.panels</a></code> API.-->
æ¯æ‰“å¼€ä¸€ä¸ªå¼€å‘è€…å·¥å…·çª—å£ï¼Œéƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ‚¨çš„æ‰©å±•ç¨‹åºæ¸…å•æ–‡ä»¶ä¸­æŒ‡å®šçš„
<code>devtools_page</code>ã€‚è¯¥ç½‘é¡µå¯ä»¥ä½¿ç”¨ <code><a href="devtools.panels.html">devtools.panels</a></code>
API æ·»åŠ å…¶ä»–æ‰©å±•ç¨‹åºç½‘é¡µï¼Œä½œä¸ºå¼€å‘è€…å·¥å…·çª—å£ä¸­çš„é¢æ¿å’Œä¾§è¾¹æ ã€‚
</p>

<p class="note"><!--@The <code>devtools_page</code> field must point to an HTML page.
This differs from the <code>background</code> field, used for specifying a background page, 
which lets you specify JavaScript files directly.-->
<code>devtools_page</code> å­—æ®µå¿…é¡»æŒ‡å‘ HTML ç½‘é¡µï¼Œè¿™ä¸€ç‚¹ä¸
æŒ‡å®šåå°ç½‘é¡µçš„ <code>background</code> å­—æ®µä¸åŒï¼Œå®ƒå…è®¸æ‚¨ç›´æ¥æŒ‡å®š JavaScript
æ–‡ä»¶ã€‚
</p>

<p><!--@The <code>chrome.devtools.*</code> API modules are available only to the pages
loaded within the DevTools window. Content scripts and other extension pages do not
have these APIs. Thus, the APIs are available only through the lifetime of the
DevTools window.-->
<code>chrome.devtools.*</code> API
æ¨¡å—ä»…å¯¹æ‰©å±•ç¨‹åºçª—å£ä¸­åŠ è½½çš„ç½‘é¡µå¯ç”¨ï¼Œå†…å®¹è„šæœ¬ä»¥åŠå…¶ä»–æ‰©å±•ç¨‹åºç½‘é¡µä¸èƒ½è®¿é—®è¿™äº›
APIï¼Œå› æ­¤è¿™äº› API ä»…åœ¨å¼€å‘è€…å·¥å…·çª—å£çš„ç”Ÿå‘½å‘¨æœŸå†…å¯ç”¨ã€‚
</p>

<p>
<!--@There are also some DevTools APIs that are still experimental.
Refer to <a href="http://developer.chrome.com/extensions/experimental.html">chrome.experimental.*
APIs</a> for the list of
experimental APIs and guidelines on how to use them.-->
æœ‰ä¸€äº›å¼€å‘è€…å·¥å…· API è¿˜æ˜¯å®éªŒæ€§çš„ï¼Œæœ‰å…³å®éªŒæ€§ API ä»¥åŠå¦‚ä½•ä½¿ç”¨å®ƒä»¬è¯·å‚è§
<a href="experimental.html">chrome.experimental.* API</a>ã€‚
</p>

<h2 id="devtools-ui"><!--@DevTools UI Elements: Panels and Sidebar Panes-->å¼€å‘è€…å·¥å…·ç”¨æˆ·ç•Œé¢å…ƒç´ ï¼šé¢æ¿å’Œä¾§è¾¹æ çª—æ ¼</h2>

<p>
<!--@In addition to the usual extension UI elements, such as browser actions, context
menus and popups, a DevTools extension can add UI elements to the DevTools window:-->
é™¤äº†é€šå¸¸çš„æ‰©å±•ç¨‹åºç”¨æˆ·ç•Œé¢å…ƒç´ ï¼Œå¦‚æµè§ˆå™¨æŒ‰é’®ã€å³é”®èœå•å’Œå¼¹å‡ºèœå•ï¼Œå¼€å‘è€…å·¥å…·æ‰©å±•ç¨‹åºè¿˜å¯ä»¥å‘å¼€å‘è€…å·¥å…·çª—å£æ·»åŠ ç”¨æˆ·ç•Œé¢å…ƒç´ ï¼š
</p>

<ul>

<li><!--@A <em>panel</em> is a top-level tab, like the Elements, Sources, and Network
panels.-->
<em>é¢æ¿</em>æ˜¯é¡¶å±‚æ ‡ç­¾é¡µï¼Œå¦‚ Elementsï¼ˆå…ƒç´ ï¼‰ã€Sourcesï¼ˆæºä»£ç ï¼‰å’Œ
Networkï¼ˆç½‘ç»œï¼‰é¢æ¿ã€‚
</li>

<li><!--@A <em>sidebar pane</em> presents supplementary UI related to a panel. The
Styles, Computed Styles, and Event Listeners panes on the Elements panel are
examples of sidebar panes. Currently your extension can only add sidebar panes to
the Elements panel. (Note that the appearance of sidebar panes may not match the
image, depending on the version of Chrome you're using, and where the DevTools
window is docked.)-->
<em>ä¾§è¾¹æ çª—æ ¼</em>æ˜¾ç¤ºä¸é¢æ¿ç›¸å…³çš„è¾…åŠ©ç”¨æˆ·ç•Œé¢ï¼Œä¾‹å¦‚ Elementsï¼ˆå…ƒç´ ï¼‰é¢æ¿ä¸­çš„
Stylesï¼ˆæ ·å¼ï¼‰ã€Computed Stylesï¼ˆè®¡ç®—åçš„æ ·å¼ï¼‰å’Œ Event
Listenersï¼ˆäº‹ä»¶ç›‘å¬å™¨ï¼‰ä¾§è¾¹æ çª—æ ¼ã€‚ç›®å‰ï¼Œæ‚¨çš„æ‰©å±•ç¨‹åºåªèƒ½åœ¨
Elementsï¼ˆå…ƒç´ ï¼‰é¢æ¿æ·»åŠ ä¾§è¾¹æ çª—æ ¼ã€‚ï¼ˆæ³¨æ„ï¼Œä¾§è¾¹æ çª—æ ¼çš„å¤–è§‚å¯èƒ½ä¸å›¾ç‰‡ä¸­ä¸åŒ¹é…ï¼Œè¿™å–å†³äºæ‚¨æ­£åœ¨ä½¿ç”¨çš„ Chrome æµè§ˆå™¨ç‰ˆæœ¬ä»¥åŠå¼€å‘è€…å·¥å…·çª—å£å›ºå®šçš„ä½ç½®ã€‚ï¼‰
</li>

</ul>

<!--@<img src="https://developer.chrome.com/static/images/devtools-extension-ui.png"
    alt="DevTools window showing Elements panel and Styles sidebar pane." />-->
<img src="../../developer.chrome.com/static/images/devtools-extension-ui.png"
    alt="æ˜¾ç¤º Elementsï¼ˆå…ƒç´ ï¼‰é¢æ¿åŠ Stylesï¼ˆæ ·å¼ï¼‰ä¾§è¾¹æ çª—æ ¼çš„å¼€å‘è€…å·¥å…·çª—å£ã€‚" />
<p>
<!--@Each panel is its own HTML file, which can include other resources (JavaScript, CSS,
images, and so on). Creating a basic panel looks like this:-->
æ¯ä¸€ä¸ªé¢æ¿éƒ½æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ HTML
æ–‡ä»¶ï¼Œå¯ä»¥åŒ…å«å…¶ä»–èµ„æºï¼ˆJavaScriptã€CSSã€å›¾ç‰‡ç­‰ç­‰ï¼‰ã€‚åˆ›å»ºä¸€ä¸ªåŸºæœ¬é¢æ¿çš„ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š
</p>
<pre>
chrome.devtools.panels.create("æˆ‘çš„é¢æ¿",
    "MyPanelIcon.png",
    "Panel.html",
    function(panel) {
      // é¢æ¿åˆ›å»ºæ—¶è°ƒç”¨çš„ä»£ç 
    }
);
</pre>

<p><!--@JavaScript executed in a panel or sidebar pane has access to the the same APIs
as the DevTools page.-->
é¢æ¿æˆ–ä¾§è¾¹æ çª—æ ¼ä¸­æ‰§è¡Œçš„ JavaScript èƒ½å¤Ÿè®¿é—®çš„ API ä¸å¼€å‘è€…å·¥å…·ç½‘é¡µä¸€æ ·ã€‚
</p>

<p><!--@Creating a basic sidebar pane for the Elements panel looks like this:-->
ä¸º Elementsï¼ˆå…ƒç´ ï¼‰é¢æ¿åˆ›å»ºä¸€ä¸ªåŸºæœ¬ä¾§è¾¹æ çª—æ ¼çš„ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre>
chrome.devtools.panels.elements.createSidebarPane("æˆ‘çš„ä¾§è¾¹æ ",  
    function(sidebar) {
        // è¿™é‡Œæ˜¯ä¾§è¾¹æ çš„åˆå§‹åŒ–ä»£ç 
        sidebar.setObject({ some_data: "è¦æ˜¾ç¤ºçš„æŸäº›æ•°æ®" });
});</pre>
<p><!--@There are several ways to display content in a sidebar pane:-->
æ‚¨å¯ä»¥ç”¨å„ç§æ–¹å¼åœ¨ä¾§è¾¹æ çª—æ ¼ä¸­æ˜¾ç¤ºå†…å®¹ï¼š
</p>

<ul>

<li><p><!--@HTML content. Call
<code><a href="https://crxdoc-zh.appspot.com/extensions/devtools.panels.html#method-ExtensionSidebarPane-setPage">setPage</a></code> to specify
an HTML page to display in the pane.-->
HTML å†…å®¹ï¼šè°ƒç”¨
<code><a href="https://crxdoc-zh.appspot.com/extensions/devtools.panels.html#method-ExtensionSidebarPane-setPage">setPage</a></code>
æŒ‡å®šçª—æ ¼ä¸­æ˜¾ç¤ºçš„ HTML ç½‘é¡µã€‚
</p></li>


<li><p><!--@JSON data. Pass a JSON object to
<code><a href="https://crxdoc-zh.appspot.com/extensions/devtools.panels.html#method-ExtensionSidebarPane-setObject">setObject</a></code>.-->
JSON æ•°æ®ï¼šå‘
<code><a href="https://crxdoc-zh.appspot.com/extensions/devtools.panels.html#method-ExtensionSidebarPane-setObject">setObject</a></code>
ä¼ é€’ä¸€ä¸ª JSON å¯¹è±¡ã€‚
</p></li>

<li><p><!--@JavaScript expression.  Pass an expression to
<code><a href="https://crxdoc-zh.appspot.com/extensions/devtools.panels.html#method-ExtensionSidebarPane-setExpression">setExpression</a></code>.
DevTools evaluates the expression in the context of the inspected page, and
displays the return value.-->
JavaScript è¡¨è¾¾å¼ï¼šå‘
<code><a href="https://crxdoc-zh.appspot.com/extensions/devtools.panels.html#method-ExtensionSidebarPane-setExpression">setExpression</a></code>
ä¼ é€’ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œå¼€å‘è€…å·¥å…·ä¼šåœ¨å®¡æŸ¥çš„ç½‘é¡µä¸Šä¸‹æ–‡ä¸­å¯¹è¡¨è¾¾å¼è¿›è¡Œæ±‚å€¼ï¼Œç„¶åæ˜¾ç¤ºè¿”å›å€¼ã€‚
</p></li>

</ul>

<p><!--@For both <code>setObject</code> and <code>setExpression</code>,
the pane displays the value as it would appear in the DevTools console.
However, <code>setExpression</code> lets you display DOM elements and arbitrary
JavaScript objects, while <code>setObject</code> only supports JSON objects.-->
å¯¹äº <code>setObject</code> å’Œ <code>setExpression</code>
æ¥è¯´ï¼Œçª—æ ¼ä¸­æ˜¾ç¤ºå€¼çš„æ–¹å¼ä¸å¼€å‘è€…å·¥å…·çš„æ§åˆ¶å°ç±»ä¼¼ã€‚<code>setExpression</code>å…è®¸æ‚¨æ˜¾ç¤º DOM å…ƒç´ å’Œä»»æ„ JavaScript å¯¹è±¡ï¼Œä½†æ˜¯ <code>setObject</code>
åªæ”¯æŒ JSON å¯¹è±¡ã€‚
</p>

<h2 id="solutions"><!--@Communicating Between Extension Components-->åœ¨æ‰©å±•ç¨‹åºçš„ä¸åŒéƒ¨ä»¶ä¹‹é—´é€šä¿¡</h2>
<p><!--@The following sections describe some typical scenarios for communicating between
the different components of a DevTools extension.-->
è¿™ä¸€éƒ¨åˆ†æè¿°äº†å¼€å‘è€…å·¥å…·æ‰©å±•ç¨‹åºä¸åŒéƒ¨ä»¶ä¹‹é—´é€šä¿¡çš„å…¸å‹æƒ…å†µï¼š
</p>

<h3 id="injecting"><!--@Injecting a Content Script-->æ’å…¥å†…å®¹è„šæœ¬</h3>

<p><!--@The DevTools page can't call <code><a href="https://crxdoc-zh.appspot.com/extensions/tabs.html#method-executeScript">tabs.executeScript</a></code> directly.
To inject a content script from the DevTools page, you must retrieve the ID
of the inspected window's tab using the <code><a href="https://crxdoc-zh.appspot.com/extensions/devtools.inspectedWindow.html#property-tabId">inspectedWindow.tabId</a></code>
property and send a message to the background page. From the background page,
call <code><a href="https://crxdoc-zh.appspot.com/extensions/tabs.html#method-executeScript">tabs.executeScript</a></code> to inject the script.-->
å¼€å‘è€…å·¥å…·ç½‘é¡µä¸èƒ½ç›´æ¥è°ƒç”¨
<code><a href="https://crxdoc-zh.appspot.com/extensions/tabs.html#method-executeScript">tabs.executeScript</a></code>ã€‚å¦‚æœè¦ä»å¼€å‘è€…å·¥å…·ç½‘é¡µä¸­æ’å…¥å†…å®¹è„šæœ¬ï¼Œæ‚¨å¿…é¡»å…ˆä½¿ç”¨
<code><a href="https://crxdoc-zh.appspot.com/extensions/devtools.inspectedWindow.html#property-tabId">inspectedWindow.tabId</a></code>
è·å–å®¡æŸ¥çª—å£çš„æ ‡ç­¾é¡µæ ‡è¯†ç¬¦ï¼Œç„¶åå‘åå°ç½‘é¡µå‘é€æ¶ˆæ¯ã€‚åœ¨åå°ç½‘é¡µä¸­ï¼Œè°ƒç”¨
<code><a href="https://crxdoc-zh.appspot.com/extensions/tabs.html#method-executeScript">tabs.executeScript</a></code> æ’å…¥è„šæœ¬ã€‚
</p>

<p class="note"><!--@If a content script has already been injected, you can add
additional context scripts using the <code>eval</code> method. See
<a href="#selected-element">Passing the Selected Element to a Content Script</a>
for more information.-->
å¦‚æœå†…å®¹è„šæœ¬å·²ç»æ’å…¥ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ <code>eval</code>
æ–¹æ³•æ·»åŠ å…¶ä»–å†…å®¹è„šæœ¬ï¼Œæœ‰å…³æ›´å¤šä¿¡æ¯è¯·å‚è§<a href="#selected-element"
>å°†é€‰å®šå…ƒç´ ä¼ é€’ç»™å†…å®¹è„šæœ¬</a>ã€‚
</p>

<p><!--@The following code snippets show how to inject a content script using
<code>executeScript</code>.-->
å¦‚ä¸‹ä»£ç ç‰‡æ®µæ¼”ç¤ºå¦‚ä½•ä½¿ç”¨ <code>executeScript</code> æ’å…¥å†…å®¹è„šæœ¬ã€‚
</p>

<pre>
// å¼€å‘è€…å·¥å…·ç½‘é¡µâ€”â€”devtools.js
// è¿æ¥åˆ°åå°ç½‘é¡µ
var backgroundPageConnection = chrome.runtime.connect({
    name: "devtools-page"
});

backgroundPageConnection.onMessage.addListener(function (message) {
    // å¤„ç†åå°ç½‘é¡µçš„å“åº”ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰ã€‚
});

// å°†æ ‡ç­¾é¡µæ ‡è¯†ç¬¦å‘é€è‡³åå°ç½‘é¡µ
chrome.runtime.sendMessage({
    tabId: chrome.devtools.inspectedWindow.tabId,
    scriptToInject: "content_script.js"
});
</pre>

<p><!--@Code for the background page:-->åå°ç½‘é¡µçš„ä»£ç ï¼š</p>

<pre>
// åå°ç½‘é¡µâ€”â€”background.js
chrome.runtime.onConnect.addListener(function(devToolsConnection) {
    // å°†ç›‘å¬å™¨å‡½æ•°èµ‹ç»™æŸä¸ªå˜é‡ï¼Œä»¥ä¾¿ä¹‹åç§»é™¤
    var devToolsListener = function(message, sender, sendResponse) {
        // å‘æŒ‡å®šæ ‡ç­¾é¡µæ’å…¥å†…å®¹è„šæœ¬
        chrome.tabs.executeScript(message.tabId,
            { file: message.scriptToInject });
    }
    // æ·»åŠ ç›‘å¬å™¨
    devToolsConnection.onMessage.addListener(devToolsListener);

    devToolsConnection.onDisconnect(function() {
         devToolsConnection.onMessage.removeListener(devToolsListener);
    });
}
</pre>

<h3 id="evaluating-js"><!--@Evaluating JavaScript in the Inspected Window-->åœ¨å®¡æŸ¥çš„çª—å£ä¸­æ‰§è¡Œ JavaScript</h3>

<p><!--@You can use the <code><a href="https://crxdoc-zh.appspot.com/extensions/devtools.inspectedWindow.html#method-eval">inspectedWindow.eval</a></code> method to execute
JavaScript code in the context of the inspected page. You can invoke the
<code>eval</code> method from a DevTools page, panel or sidebar pane.-->
æ‚¨å¯ä»¥ä½¿ç”¨ <code><a href="https://crxdoc-zh.appspot.com/extensions/devtools.inspectedWindow.html#method-eval">inspectedWindow.eval</a></code> æ–¹æ³•åœ¨å®¡æŸ¥çš„ç½‘é¡µä¸Šä¸‹æ–‡ä¸­æ‰§è¡Œ
JavaScript ä»£ç ï¼Œæ‚¨å¯ä»¥åœ¨å¼€å‘è€…å·¥å…·ç½‘é¡µã€é¢æ¿æˆ–ä¾§è¾¹æ ç½‘é¡µä¸­è°ƒç”¨
<code>eval</code> æ–¹æ³•ã€‚
</p>

<p><!--@By default, the expression is evaluated in the context of the main frame of the
page. Use the <code>useContentScriptContext: true</code> option to evaluate the
expression in the same context as the content scripts.-->
é»˜è®¤æƒ…å†µä¸‹ï¼Œè¡¨è¾¾å¼åœ¨ç½‘é¡µçš„ä¸»æ¡†æ¶ä¸Šä¸‹æ–‡ä¸­æ±‚å€¼ï¼Œä½¿ç”¨
<code>useContentScriptContext: true</code> é€‰é¡¹åœ¨å†…å®¹è„šæœ¬çš„ä¸Šä¸‹æ–‡ä¸­å¯¹è¡¨è¾¾å¼æ±‚å€¼ã€‚
</p>

<p><!--@Calling <code>eval</code> with <code>useContentScriptContext: true</code> does
not <em>create</em> a content script context, so you must load a context script
before calling <code>eval</code>, either by calling <code>executeScript</code> or
by specifying a content script in the <code>manifest.json</code> file.-->
è°ƒç”¨ <code>eval</code> æ—¶æŒ‡å®š <code>useContentScriptContext: true</code>
å¹¶ä¸ä¼š<em>åˆ›å»º</em>å†…å®¹è„šæœ¬ä¸Šä¸‹æ–‡ï¼Œæ‰€ä»¥è°ƒç”¨ <code>eval</code>
å‰æ‚¨å¿…é¡»å…ˆåŠ è½½ä¸€ä¸ªå†…å®¹è„šæœ¬ï¼Œå¯ä»¥è°ƒç”¨ <code>executeScript</code>ï¼Œä¹Ÿå¯ä»¥åœ¨
<code>manifest.json</code> æ–‡ä»¶ä¸­æŒ‡å®šå†…å®¹è„šæœ¬ã€‚
</p>

<p><!--@Once the context script context exists, you can use this option to inject
additional content scripts.-->
å†…å®¹è„šæœ¬ä¸Šä¸‹æ–‡å­˜åœ¨åï¼Œæ‚¨å°±å¯ä»¥ä½¿ç”¨è¯¥é€‰é¡¹æ’å…¥å…¶ä»–å†…å®¹è„šæœ¬ã€‚
</p>

<p class="warning"><!--@The <code>eval</code> method is powerful when used in the right
context and dangerous when used inappropriately. Use the
<code><a href="https://crxdoc-zh.appspot.com/extensions/tabs.html#method-executeScript">tabs.executeScript</a></code> method if you don't need access to the
JavaScript context of the inspected page. For detailed cautions and a comparison
of the two methods, see <code><a href="devtools.inspectedWindow.html">devtools.inspectedWindow</a></code>.-->
å¦‚æœåœ¨æ­£ç¡®çš„æƒ…å†µä¸‹ä½¿ç”¨ï¼Œ<code>eval</code>
æ–¹æ³•æ˜¯å¾ˆæœ‰ç”¨çš„ï¼Œä½†æ˜¯ä¸æ°å½“çš„ä½¿ç”¨ä¹Ÿæ˜¯å¾ˆå±é™©çš„ã€‚å¦‚æœæ‚¨ä¸éœ€è¦è®¿é—®å®¡æŸ¥ç½‘é¡µçš„
JavaScript ä¸Šä¸‹æ–‡ï¼Œè¯·ä½¿ç”¨ <code><a href="https://crxdoc-zh.appspot.com/extensions/tabs.html#method-executeScript">tabs.executeScript</a></code>
æ–¹æ³•ã€‚æœ‰å…³è¯¦ç»†çš„æ³¨æ„äº‹é¡¹ä»¥åŠä¸¤ç§æ–¹æ³•çš„æ¯”è¾ƒï¼Œè¯·å‚è§
<code><a href="devtools.inspectedWindow.html">devtools.inspectedWindow</a></code>ã€‚
</p>

<h3 id="selected-element"><!--@Passing the Selected Element to a Content Script-->å°†é€‰å®šå…ƒç´ ä¼ é€’ç»™å†…å®¹è„šæœ¬</h3>

<p><!--@The content script doesn't have direct access to the current selected element.
However, any code you execute using <code><a href="https://crxdoc-zh.appspot.com/extensions/devtools.inspectedWindow.html#method-eval">inspectedWindow.eval</a></code> has
access to the DevTools console and command-line APIs. For example, in evaluated code 
you can use <code>$0</code> to access the selected element.-->
å†…å®¹è„šæœ¬å¹¶ä¸èƒ½ç›´æ¥è®¿é—®å½“å‰é€‰å®šå…ƒç´ ï¼Œä½†æ˜¯æ‚¨ä½¿ç”¨
<code><a href="https://crxdoc-zh.appspot.com/extensions/devtools.inspectedWindow.html#method-eval">inspectedWindow.eval</a></code>
æ‰§è¡Œçš„ä»£ç èƒ½å¤Ÿä½¿ç”¨å¼€å‘è€…å·¥å…·çš„æ§åˆ¶å°ä¸å‘½ä»¤è¡Œ
APIã€‚ä¾‹å¦‚ï¼Œåœ¨æ±‚å€¼çš„ä»£ç ä¸­æ‚¨å¯ä»¥ä½¿ç”¨ <code>$0</code> è®¿é—®é€‰å®šå…ƒç´ ã€‚
</p>

<p><!--@To pass the selected element to a content script:-->å¦‚æœè¦å°†é€‰å®šå…ƒç´ ä¼ é€’ç»™å†…å®¹è„šæœ¬ï¼š</p>

<ul>

<li><!--@Create a method in the content script that takes the selected element as
an argument.-->
åœ¨å†…å®¹è„šæœ¬ä¸­åˆ›å»ºä¸€ä¸ªæ–¹æ³•ï¼Œä»¥é€‰å®šå…ƒç´ ä¸ºå‚æ•°ã€‚
</li>

<li><!--@Call the method from the DevTools page using <code><a href="https://crxdoc-zh.appspot.com/extensions/devtools.inspectedWindow.html#method-eval">inspectedWindow.eval</a></code>
with the <code>useContentScriptContext: true</code> option. -->
ä½¿ç”¨ <code><a href="https://crxdoc-zh.appspot.com/extensions/devtools.inspectedWindow.html#method-eval">inspectedWindow.eval</a></code>ï¼ŒæŒ‡å®š
<code>useContentScriptContext: true</code>
é€‰é¡¹ï¼Œä»å¼€å‘è€…å·¥å…·ç½‘é¡µä¸­è°ƒç”¨è¯¥æ–¹æ³•ã€‚
</li>

</ul>

<p><!--@The code in your content script might look something like this:-->æ‚¨çš„å†…å®¹è„šæœ¬ä¸­çš„ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p>

<pre>
function setSelectedElement(el) {
    // å¯¹é€‰å®šå…ƒç´ è¿›è¡ŒæŸäº›æ“ä½œ
}
</pre>

<p><!--@Invoke the method from the DevTools page like this:-->åœ¨å¼€å‘è€…å·¥å…·ç½‘é¡µä¸­å¦‚ä¸‹æ‰€ç¤ºè°ƒç”¨è¯¥æ–¹æ³•ï¼š</p>

<pre>
chrome.devtools.inspectedWindow.eval("setSelectedElement($0)",
    { useContentScriptContext: true });
</pre>

<p><!--@The <code>useContentScriptContext: true</code> option specifies that the
expression must be evaluated in the same context as the content scripts, so it can
access the <code>setSelectedElement</code> method.-->
<code>useContentScriptContext: true</code>
é€‰é¡¹æŒ‡å®šè¡¨è¾¾å¼å¿…é¡»åœ¨å†…å®¹è„šæœ¬çš„ä¸Šä¸‹æ–‡ä¸­æ±‚å€¼ï¼Œè¿™æ ·å°±èƒ½è®¿é—®
<code>setSelectedElement</code> æ–¹æ³•ã€‚
</p>


<h3 id="content-script-to-devtools"><!--@Messaging from Content Scripts to the DevTools Page-->å†…å®¹è„šæœ¬ä¸å¼€å‘è€…å·¥å…·ç½‘é¡µé—´çš„æ¶ˆæ¯ä¼ é€’</h3>

<p><!--@Messaging between the DevTools page and content scripts is indirect, by way of
the background page. -->
å¼€å‘è€…å·¥å…·ç½‘é¡µä¸å†…å®¹è„šæœ¬é—´çš„æ¶ˆæ¯ä¼ é€’æ˜¯é—´æ¥çš„ï¼Œé€šè¿‡åå°ç½‘é¡µè¿›è¡Œã€‚
</p>

<p><!--@When sending a message <em>to</em> a content script, the background page can use
the <code><a href="https://crxdoc-zh.appspot.com/extensions/tabs.html#method-sendMessage">tabs.sendMessage</a></code> method, which directs a message to the
content scripts in a specific tab, as shown in
<a href="#injecting">Injecting a Content Script</a>.-->
<em>å‘</em>å†…å®¹è„šæœ¬å‘é€æ¶ˆæ¯æ—¶ï¼Œåå°ç½‘é¡µå¯ä»¥ä½¿ç”¨
<code><a href="https://crxdoc-zh.appspot.com/extensions/tabs.html#method-sendMessage">tabs.sendMessage</a></code>
æ–¹æ³•ï¼Œå°†æ¶ˆæ¯å‘é€è‡³æŒ‡å®šæ ‡ç­¾é¡µä¸­çš„å†…å®¹è„šæœ¬ï¼Œå¦‚<a href="#injecting"
>æ’å…¥å†…å®¹è„šæœ¬</a>éƒ¨åˆ†æ‰€è¿°ã€‚
</p>

<p><!--@When sending a message <em>from</em> a content script, there is no ready-made
method to deliver a message to the correct DevTools page instance associated with
the current tab.  As a workaround, you can have the DevTools page establish a
long-lived connection with the background page, and have the background page keep a
map of tab IDs to connections, so it can route each message to the correct
connection.-->
<em>ä»</em>å†…å®¹è„šæœ¬å‘é€æ¶ˆæ¯æ—¶ï¼Œæ²¡æœ‰ç°æœ‰çš„æ–¹æ³•å¯ä»¥å°†æ¶ˆæ¯æŠ•é€’è‡³ä¸å½“å‰æ ‡ç­¾é¡µå¯¹åº”çš„å¼€å‘è€…å·¥å…·ç½‘é¡µã€‚ä¸€ç§å˜é€šçš„æ–¹æ³•æ˜¯ï¼Œæ‚¨å¯ä»¥åœ¨å¼€å‘è€…å·¥å…·ç½‘é¡µä¸åå°ç½‘é¡µé—´å»ºç«‹é•¿æ—¶é—´çš„è¿æ¥ï¼Œå¹¶ä¸”è®©åå°ç½‘é¡µç»´æŠ¤æ ‡ç­¾é¡µä¸è¿æ¥ä¹‹é—´çš„å¯¹åº”å…³ç³»ï¼Œè¿™æ ·å®ƒå°±èƒ½å°†æ¯ä¸€æ¡æ¶ˆæ¯è½¬å‘è‡³æ­£ç¡®çš„è¿æ¥ã€‚
</p>

<pre data-filename="background.js">
var connections = {};

chrome.runtime.onConnect.addListener(function (port) {

    var extensionListener = function (message, sender, sendResponse) {

        // åŸå§‹çš„è¿æ¥äº‹ä»¶ä¸åŒ…å«å¼€å‘è€…å·¥å…·ç½‘é¡µçš„æ ‡ç­¾é¡µæ ‡è¯†ç¬¦ï¼Œ
        // æ‰€ä»¥æˆ‘ä»¬éœ€è¦æ˜¾å¼å‘é€å®ƒã€‚
        if (message.name == "init") {
          connections[message.tabId] = port;
          return;
        }
	
	// å…¶ä»–æ¶ˆæ¯çš„å¤„ç†
    }

    // ç›‘å¬å¼€å‘è€…å·¥å…·ç½‘é¡µå‘æ¥çš„æ¶ˆæ¯
    port.onMessage.addListener(extensionListener);

    port.onDisconnect.addListener(function(port) {
        port.onMessage.removeListener(extensionListener);

        var tabs = Object.keys(connections);
        for (var i=0, len=tabs.length; i &lt; len; i++) {
          if (connections[tabs[i]] == port) {
            delete connections[tabs[i]]
            break;
          }
        }
    });
});

// ä»å†…å®¹è„šæœ¬æ¥æ”¶æ¶ˆæ¯ï¼Œå¹¶è½¬å‘è‡³å½“å‰
// æ ‡ç­¾é¡µå¯¹åº”çš„å¼€å‘è€…å·¥å…·ç½‘é¡µ
chrome.runtime.onMessage.addListener(function(request, sender, sendResponse) {
    // æ¥è‡ªå†…å®¹è„šæœ¬çš„æ¶ˆæ¯åº”è¯¥å·²ç»è®¾ç½® sender.tab
    if (sender.tab) {
      var tabId = sender.tab.id;
      if (tabId in connections) {
        connections[tabId].postMessage(request);
      } else {
        console.log("è¿æ¥åˆ—è¡¨ä¸­æ‰¾ä¸åˆ°è¯¥æ ‡ç­¾é¡µã€‚");
      }
    } else {
      console.log("sender.tab æœªå®šä¹‰ã€‚");
    }
    return true;
});
</pre>

<p><!--@The DevTools page (or panel or sidebar pane) establishes the connection like
this:-->
å¼€å‘è€…å·¥å…·ç½‘é¡µï¼ˆæˆ–é¢æ¿æˆ–ä¾§è¾¹æ çª—æ ¼ï¼‰å¦‚ä¸‹æ‰€ç¤ºå»ºç«‹è¿æ¥ï¼š
</p>

<pre>
// åˆ›å»ºè¿æ¥è‡³åå°ç½‘é¡µ
var backgroundPageConnection = chrome.runtime.connect({
    name: "panel"
});

backgroundPageConnection.postMessage({
    name: 'init',
    tabId: chrome.devtools.inspectedWindow.tabId
});
</pre>

<h3 id="detecting-open-close"><!--@Detecting When DevTools Opens and Closes-->æ£€æµ‹å¼€å‘è€…å·¥å…·ä½•æ—¶æ‰“å¼€ä½•æ—¶å…³é—­</h3>

<p><!--@If your extension needs to track whether the DevTools window is open, you can
add an <a href="https://crxdoc-zh.appspot.com/extensions/runtime.html#event-onConnect">onConnect</a> listener to the background page, and call
<a href="https://crxdoc-zh.appspot.com/extensions/runtime.html#method-connect">connect</a> from the DevTools page. Since each tab can have its
own DevTools window open, you may receive multiple connect events. To track whether
any DevTools window is open, you need to count the connect and disconnect events as
shown below:-->
å¦‚æœæ‚¨çš„æ‰©å±•ç¨‹åºéœ€è¦è·Ÿè¸ªå¼€å‘è€…å·¥å…·çª—å£æ˜¯å¦æ‰“å¼€ï¼Œæ‚¨å¯ä»¥åœ¨åå°ç½‘é¡µä¸­æ·»åŠ 
<a href="https://crxdoc-zh.appspot.com/extensions/runtime.html#event-onConnect">onConnect</a> ç›‘å¬å™¨ï¼Œå¹¶åœ¨å¼€å‘è€…å·¥å…·ç½‘é¡µä¸­è°ƒç”¨
<a href="https://crxdoc-zh.appspot.com/extensions/runtime.html#method-connect">connect</a>ã€‚ç”±äºæ¯ä¸€ä¸ªæ ‡ç­¾é¡µéƒ½å¯ä»¥æ‰“å¼€å„è‡ªçš„å¼€å‘è€…å·¥å…·çª—å£ï¼Œæ‚¨å¯èƒ½ä¼šæ”¶åˆ°å¤šä¸ªè¿æ¥äº‹ä»¶ã€‚è¦è·Ÿè¸ªæ˜¯å¦æœ‰æ‰“å¼€çš„å¼€å‘è€…å·¥å…·çª—å£ï¼Œæ‚¨éœ€è¦ç»Ÿè®¡è¿æ¥ä¸æ–­å¼€è¿æ¥äº‹ä»¶çš„æ¬¡æ•°ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š
</p>

<pre data-filename="background.js">
var openCount = 0;
chrome.runtime.onConnect.addListener(function (port) {
    if (port.name == "devtools-page") {
      if (openCount == 0) {
        alert("å¼€å‘è€…å·¥å…·çª—å£æ‰“å¼€ã€‚");
      }
      openCount++;
   
      port.onDisconnect.addListener(function(port) {
          openCount--;
          if (openCount == 0) {
            alert("æœ€åä¸€ä¸ªå¼€å‘è€…å·¥å…·çª—å£å…³é—­ã€‚");
          }
      });
    }
});</pre>

<p><!--@The DevTools page creates a connection like this:-->
å¼€å‘è€…å·¥å…·ç½‘é¡µå¦‚ä¸‹æ‰€ç¤ºåˆ›å»ºè¿æ¥ï¼š</p>

<pre data-filename="devtools.js">
// åˆ›å»ºè¿æ¥è‡³åå°ç½‘é¡µ
var backgroundPageConnection = chrome.runtime.connect({
    name: "devtools-page"
});
</pre>

<h2 id="more"><!--@More information-->æ›´å¤šä¿¡æ¯</h2>

<p><!--@For information on the standard APIs that extensions can use, see
<a href="http://developer.chrome.com/extensions/api_index.html">chrome.* APIs</a>
and <a href="http://developer.chrome.com/extensions/api_other.html">Other APIs</a>.-->
æœ‰å…³æ‰©å±•ç¨‹åºå¯ä»¥ä½¿ç”¨çš„æ ‡å‡† APIï¼Œè¯·å‚è§
<a href="api_index.html">chrome.* APIs</a>
å’Œ<a href="api_other.html">å…¶ä»– API</a>ã€‚
</p>

<p>
<a href="https://groups.google.com/group/google-chrome-developer-tools/topics"><!--@Give
us feedback!-->ç»™æˆ‘ä»¬åé¦ˆï¼</a><!--@
Your comments and suggestions help us improve the APIs.
-->æ‚¨çš„è¯„è®ºä¸å»ºè®®å¯ä»¥å¸®åŠ©æˆ‘ä»¬æ”¹è¿›è¿™äº› APIã€‚</p>

<h2 id="examples"><!--@Examples-->ä¾‹å­</h2>

<p><!--@You can find examples that use DevTools APIs in
<a href="http://developer.chrome.com/extensions/samples.html#devtools">Samples</a>.-->
æ‚¨å¯ä»¥åœ¨<a href="https://crxdoc-zh.appspot.com/extensions/samples.html#devtools">ç¤ºä¾‹</a>ä¸­æ‰¾åˆ°ä½¿ç”¨å¼€å‘è€…å·¥å…· API
çš„ä¾‹å­ã€‚
</p>
      </div>
    </div>
  </body>

  <div id="gc-footer">
    <button class="google-button" id="scroll-to-top">â†‘</button>
    <button class="google-button" id="send-feedback" style="display:none">Send Feedback</button>
    <div class="text">
      <p>
        <!--@Except as otherwise <a href="http://code.google.com/policies.html#restrictions">noted</a>,
        the content of this page is licensed under the <a rel="license" href="http://creativecommons.org/licenses/by/3.0/">Creative Commons
        Attribution 3.0 License</a>, and code samples are licensed under the
        <a rel="license" href="http://code.google.com/google_bsd_license.html">BSD License</a>.-->
        è¯¥é¡µé¢ç¿»è¯‘è‡ª
        <a href="https://developer.chrome.com/extensions/">Google Chrome Extensions</a>
        ä¸
        <a href="https://developer.chrome.com/apps/">Google Chrome Apps</a>ã€‚é™¤éç‰¹åˆ«<a href="https://code.google.com/policies.html#restrictions">è¯´æ˜</a>ï¼Œè¯¥é¡µé¢çš„å†…å®¹éµå¾ª
        <a rel="license" href="http://creativecommons.org/licenses/by/3.0/">Creative Commons Attribution 3.0
        License</a>ï¼Œä»£ç ç¤ºä¾‹éµå¾ª
        <a rel="license" href="http://code.google.com/google_bsd_license.html">BSD License</a>ã€‚
      </p>
      <p class="crxdoczh-footer">
        <a href="https://code.google.com/p/crxdoczh/">crxdoczh é¡¹ç›®ä¸»é¡µ</a>
        <a href="https://code.google.com/p/crxdoczh/issues/entry?template=%E7%BD%91%E7%AB%99%E5%8F%8D%E9%A6%88">å‘é€åé¦ˆ</a>
        <a href="" rel="publisher">
          Google+ é¡µé¢
        </a>
        <a href="https://plus.google.com/communities/105384952265487436177">Google+ ç¤¾ç¾¤</a>
      </p>
      <script src="../../developer.chrome.com/static/js/platform_chooser.js" type="text/javascript"></script>
      <script src="../../developer.chrome.com/static/js/popup.js" type="text/javascript"></script>
      <script src="../../developer.chrome.com/static/js/prettify.js" type="text/javascript"></script>
      <script src="../../developer.chrome.com/static/js/scroll.js" type="text/javascript"></script>
      <script src="../../developer.chrome.com/static/js/sidebar.js" type="text/javascript"></script>
      <script src="../../developer.chrome.com/static/js/tabs.js" type="text/javascript"></script>
      <script>
        (function() {
          // Auto syntax highlight all pre tags.
          var preElements = document.getElementsByTagName('pre');
          for (var i = 0; i < preElements.length; i++) {
            var preElement = preElements[i];
            preElement.classList.add('prettyprint');
            var datasetFilename = preElement.getAttribute('data-filename');
            if (datasetFilename) {
              var filename = document.createElement('div');
              filename.className = 'filename nocode';
              filename.textContent = datasetFilename;
              preElement.insertBefore(filename, preElement.firstChild);
            }
          }
          prettyPrint();
        })();

        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-25062424-1']);
        _gaq.push(['_trackPageview']);

        (function() {
          var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
          ga.src = 'https://ssl.google-analytics.com/ga.js';
          var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();

        window.___gcfg = {
      Â  Â  lang: 'zh-CN'
      Â  };
      Â  (function() {
      Â  Â  var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
      Â  Â  po.src = 'https://apis.google.com/js/plusone.js';
      Â  Â  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
      Â  })();
      </script>
    </div>
  </div>
</html>
