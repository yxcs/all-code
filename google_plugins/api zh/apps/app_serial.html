<!DOCTYPE html>
<html>
  <head>
    <title>ä¸²è¡Œç«¯å£è®¾å¤‡ - Google Chrome åº”ç”¨å¼€å‘æ–‡æ¡£ï¼ˆéå®˜æ–¹ä¸­æ–‡ç‰ˆï¼‰</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link href="../static/css/site.css" rel="stylesheet" type="text/css">
    <link href="../../developer.chrome.com/static/css/print.css" rel="stylesheet" type="text/css" media="print">
    <link href="../../developer.chrome.com/static/css/prettify.css" rel="stylesheet" type="text/css">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
  </head>

  <body>


<!-- Copyright © 2005. Spidersoft Ltd -->
<style>
A.applink:hover {border: 2px dotted #DCE6F4;padding:2px;background-color:#ffff00;color:green;text-decoration:none}
A.applink       {border: 2px dotted #DCE6F4;padding:2px;color:#2F5BFF;background:transparent;text-decoration:none}
A.info          {color:#2F5BFF;background:transparent;text-decoration:none}
A.info:hover    {color:green;background:transparent;text-decoration:underline}
</style>
<div style='BORDER: 1px solid #DCE6F4; MARGIN-TOP: 20px; MARGIN-BOTTOM: 20px; MARGIN-LEFT: 5px; MARGIN-RIGHT: 5px; PADDING: 5px; BACKGROUND-COLOR: #eef8ff;line-height:180%; COLOR: #000000; font-family: Arial; font-size: 8pt; width=100%; FILTER: progid:DXImageTransform.Microsoft.Gradient(GradientType=0, StartColorStr="#FFFFFFFF", EndColorStr="#F2F5FAFF");'>
This page was saved using <a class="applink" href="http://www.spidersoft.com"><b>WebZIP 7.0.3.1030</b></a> <a class="applink" href="http://www.spidersoft.com"><b>offline browser</b></a>  on  12/24/13 11:31:37.<br>
<b>Address:</b> <a class="info" href="https://crxdoc-zh.appspot.com/apps/app_serial.html">https://crxdoc-zh.appspot.com/apps/app_serial.html</a><br>
<b>Title:</b> ä¸²è¡Œç«¯å£è®¾å¤‡ - Google Chrome åº”ç”¨å¼€å‘æ–‡æ¡£ï¼ˆéå®˜æ–¹ä¸­æ–‡ç‰ˆï¼‰ &nbsp;&bull;&nbsp; <b>Size:</b> 25448<br></div>
<!-- /Copyright © 2005. Spidersoft Ltd -->


    <div id="gc-topnav">
      <table><tr>
      <td id="chrome-logo">
        <a href="apps.html" title="Google Chrome åº”ç”¨" id="view-original">
          <img src="../../developer.chrome.com/static/images/chrome-logo.png" alt=""> chrome
        </a>
        <script type="text/javascript">
          document.getElementById('view-original').href = "https://developer.chrome.com" + location.pathname;
        </script>
        <div id="platform-chooser">
          <button id="platform-chooser-toggle" data-menu="platform-chooser-popup">
            åº”ç”¨ &#x25be;&#x202F;
          </button>
          <div id="platform-chooser-popup">
            <button class="apps" data-href="/apps/about_apps.html"><!--@apps-->åº”ç”¨</button>
            <button class="extensions" data-href="/extensions"><!--@extensions-->æ‰©å±•ç¨‹åº</button>
          </div>
        </div>ï¼ˆéå®˜æ–¹ä¸­æ–‡ç‰ˆï¼‰
      </td>
      <td>
        <ul>
          <li>
            <a href="samples.html"
               title="ç¤ºä¾‹ åº”ç”¨ï¼ˆåŒ…å«æºä»£ç ï¼‰"><!--@Samples-->ç¤ºä¾‹</a>
          </li>
          <li>
            <a href="http://groups.google.com/a/chromium.org/group/chromium-apps"
               title="Google Chrome åº”ç”¨å¼€å‘è€…è®ºå›"
               target="_blank"><!--@Group-->è®ºå›ï¼ˆè‹±æ–‡ï¼‰</a>
          </li>
          <li>
            <a href="http://stackoverflow.com/tags/google-chrome-app/info"
               title="Stack Overflow ä¸Šçš„ [google-chrome-app] æ ‡ç­¾"
               target="_blank">Stack overflow</a>
          </li>
        </ul>
      </td>
      </tr></table>
    </div>
    <div id="gc-topnav-space"></div>
    <div id="gc-container">
      <div id="gc-sidebar">
        <g:plusone></g:plusone>
        <ul 
            class="level1 ">
        <li class="level2">
              <span class="level2">å‘ç°</span>
          <ul 
              class="level2 ">
          <li class="level3">
                <a href="about_apps.html" class="level3 ">ä»€ä¹ˆæ˜¯ Chrome åº”ç”¨ï¼Ÿ</a>
          </li>
          </ul>
        </li><li class="level2">
              <span class="level2">å¼€å‘</span>
          <ul 
              class="level2 ">
          <li class="level3">
                <a href="first_app.html" class="level3 ">åˆ›å»ºæ‚¨çš„ç¬¬ä¸€ä¸ªåº”ç”¨</a>
          </li><li class="level3">
              <a class="button level3">
                <span class="level3">æ•™ç¨‹</span>
                <div class="toggleIndicator level3"></div>
              </a>
            <ul toggleable
                class="level3 hidden">
            <li class="level4">
                <a class="button level4">
                  <span class="level4">é€šè¿‡ä»£ç å®éªŒå®¤å­¦ä¹ </span>
                  <div class="toggleIndicator level4"></div>
                </a>
              <ul toggleable
                  class="level4 hidden">
              <li class="level5">
                    <a href="app_codelab.html" class="level5 ">å…³äºä»£ç å®éªŒå®¤</a>
              </li><li class="level5">
                    <a href="app_codelab1_setup.html" class="level5 ">1ã€è®¾ç½®å¼€å‘ç¯å¢ƒ</a>
              </li><li class="level5">
                    <a href="app_codelab2_basic.html" class="level5 ">2ã€åˆ›å»ºåŸºæœ¬çš„åº”ç”¨</a>
              </li><li class="level5">
                    <a href="app_codelab3_mvc.html" class="level5 ">3ã€åˆ›å»º MVC</a>
              </li><li class="level5">
                    <a href="app_codelab5_data.html" class="level5 ">4ã€ä¿å­˜å’Œè·å–æ•°æ®</a>
              </li><li class="level5">
                    <a href="app_codelab6_lifecycle.html" class="level5 ">5ã€ç®¡ç†åº”ç”¨çš„ç”Ÿå‘½å‘¨æœŸ</a>
              </li><li class="level5">
                    <a href="app_codelab7_useridentification.html" class="level5 ">6ã€è®¿é—®ç”¨æˆ·æ•°æ®</a>
              </li><li class="level5">
                    <a href="app_codelab8_webresources.html" class="level5 ">7ã€è®¿é—®ç½‘ç»œèµ„æº</a>
              </li><li class="level5">
                    <a href="app_codelab_10_publishing.html" class="level5 ">8ã€å‘å¸ƒåº”ç”¨</a>
              </li>
              </ul>
            </li><li class="level4">
                <a class="button level4">
                  <span class="level4">MVC æ¶æ„ä¸æ¡†æ¶</span>
                  <div class="toggleIndicator level4"></div>
                </a>
              <ul toggleable
                  class="level4 hidden">
              <li class="level5">
                    <a href="app_frameworks.html" class="level5 ">å…³äº MVC æ¶æ„</a>
              </li><li class="level5">
                    <a href="angular_framework.html" class="level5 ">ç”¨ AngularJS å»ºç«‹åº”ç”¨</a>
              </li><li class="level5">
                    <a href="sencha_framework.html" class="level5 ">ç”¨ Sencha Ext JS å»ºç«‹åº”ç”¨</a>
              </li>
              </ul>
            </li>
            </ul>
          </li><li class="level3">
              <a class="button level3">
                <span class="level3">Chrome åº”ç”¨çš„æ¦‚å¿µ</span>
                <div class="toggleIndicator level3 toggled"></div>
              </a>
            <ul toggleable
                class="level3 ">
            <li class="level4">
                <a class="button level4">
                  <span class="level4">åŸºç¡€çŸ¥è¯†</span>
                  <div class="toggleIndicator level4"></div>
                </a>
              <ul toggleable
                  class="level4 hidden">
              <li class="level5">
                    <a href="app_architecture.html" class="level5 ">åº”ç”¨çš„æ¶æ„</a>
              </li><li class="level5">
                    <a href="app_lifecycle.html" class="level5 ">åº”ç”¨çš„ç”Ÿå‘½å‘¨æœŸ</a>
              </li><li class="level5">
                    <a href="offline_apps.html" class="level5 ">é¦–å…ˆè€ƒè™‘ç¦»çº¿</a>
              </li><li class="level5">
                    <a href="app_external.html" class="level5 ">å¤–éƒ¨å†…å®¹</a>
              </li>
              </ul>
            </li><li class="level4">
                <a class="button level4">
                  <span class="level4">å®‰å…¨æ€§</span>
                  <div class="toggleIndicator level4"></div>
                </a>
              <ul toggleable
                  class="level4 hidden">
              <li class="level5">
                    <a href="contentSecurityPolicy.html" class="level5 ">å†…å®¹å®‰å…¨ç­–ç•¥</a>
              </li>
              </ul>
            </li><li class="level4">
                <a class="button level4">
                  <span class="level4">å°†æ‚¨çš„åº”ç”¨ä¸äº‘ç«¯ç»“åˆ</span>
                  <div class="toggleIndicator level4"></div>
                </a>
              <ul toggleable
                  class="level4 hidden">
              <li class="level5">
                  <a class="button level5">
                    <span class="level5">äº‘æ¶ˆæ¯æœåŠ¡</span>
                    <div class="toggleIndicator level5"></div>
                  </a>
                <ul toggleable
                    class="level5 hidden">
                <li class="level6">
                      <a href="cloudMessaging.html" class="level6 ">å…³äºäº‘æ¶ˆæ¯æœåŠ¡</a>
                </li><li class="level6">
                      <a href="pushMessaging.html" class="level6 ">å®¢æˆ·ç«¯å‚è€ƒ</a>
                </li><li class="level6">
                      <a href="gcm_server.html" class="level6 ">æœåŠ¡å‚è€ƒ</a>
                </li><li class="level6">
                      <a href="gcm_tos.html" class="level6 ">æœåŠ¡æ¡æ¬¾</a>
                </li>
                </ul>
              </li><li class="level5">
                  <a class="button level5">
                    <span class="level5">äº‘å­˜å‚¨æœåŠ¡</span>
                    <div class="toggleIndicator level5"></div>
                  </a>
                <ul toggleable
                    class="level5 hidden">
                <li class="level6">
                      <a href="storage.html" class="level6 ">chrome.storage</a>
                </li>
                </ul>
              </li><li class="level5">
                    <a href="app_identity.html" class="level5 ">ç”¨æˆ·è®¤è¯</a>
              </li>
              </ul>
            </li><li class="level4">
                <a class="button level4">
                  <span class="level4">å­˜å‚¨ä¸è·å–æ•°æ®</span>
                  <div class="toggleIndicator level4"></div>
                </a>
              <ul toggleable
                  class="level4 hidden">
              <li class="level5">
                    <a href="app_storage.html" class="level5 ">å­˜å‚¨ API</a>
              </li>
              </ul>
            </li><li class="level4">
                <a class="button level4">
                  <span class="level4">ä½¿ç”¨ä½çº§ç³»ç»ŸæœåŠ¡</span>
                  <div class="toggleIndicator level4 toggled"></div>
                </a>
              <ul toggleable
                  class="level4 ">
              <li class="level5">
                    <a href="app_usb.html" class="level5 ">USB</a>
              </li><li class="level5">
                    <a  class="level5 selected">ä¸²è¡Œç«¯å£</a>
              </li><li class="level5">
                    <a href="app_network.html" class="level5 ">ç½‘ç»œé€šä¿¡</a>
              </li>
              </ul>
            </li><li class="level4">
                <a class="button level4">
                  <span class="level4">ä¸ä¸»æœºå¹³å°äº¤äº’</span>
                  <div class="toggleIndicator level4"></div>
                </a>
              <ul toggleable
                  class="level4 hidden">
              <li class="level5">
                    <a href="desktop_notifications.html" class="level5 ">ä¸°å¯Œçš„é€šçŸ¥</a>
              </li>
              </ul>
            </li>
            </ul>
          </li>
          </ul>
        </li><li class="level2">
              <span class="level2">å‘å¸ƒ</span>
          <ul 
              class="level2 ">
          <li class="level3">
                <a href="publish_app.html" class="level3 ">å‘å¸ƒæ‚¨çš„åº”ç”¨</a>
          </li><li class="level3">
              <a class="button level3">
                <span class="level3">é€šè¿‡æ‚¨çš„åº”ç”¨è·åˆ©</span>
                <div class="toggleIndicator level3"></div>
              </a>
            <ul toggleable
                class="level3 hidden">
            <li class="level4">
                  <a href="google_wallet.html" class="level4 ">ç”¨äºæ•°å­—å•†å“çš„ Google ç”µå­é’±åŒ…</a>
            </li>
            </ul>
          </li><li class="level3">
                <a href="analytics.html" class="level3 ">Analyticsï¼ˆåˆ†æï¼‰</a>
          </li>
          </ul>
        </li><li class="level2">
              <span class="level2">å‚è€ƒ</span>
          <ul 
              class="level2 ">
          <li class="level3">
                <a href="api_index.html" class="level3 ">Chrome å¹³å° API</a>
          </li><li class="level3">
                <a href="tags/webview.html" class="level3 ">Webview æ ‡ç­¾</a>
          </li><li class="level3">
                <a href="api_other.html" class="level3 ">ç½‘é¡µ API</a>
          </li><li class="level3">
                <a href="manifest.html" class="level3 ">æ¸…å•æ–‡ä»¶æ ¼å¼</a>
          </li><li class="level3">
                <a href="app_deprecated.html" class="level3 ">ç¦ç”¨çš„ç½‘é¡µç‰¹æ€§</a>
          </li>
          </ul>
        </li><li class="level2">
              <span class="level2">ç¤ºä¾‹</span>
          <ul 
              class="level2 ">
          <li class="level3">
                <a href="samples.html" class="level3 ">ç¤ºä¾‹åº”ç”¨</a>
          </li>
          </ul>
        </li><li class="level2">
              <span class="level2">å¸®åŠ©</span>
          <ul 
              class="level2 ">
          <li class="level3">
                <a href="faq.html" class="level3 ">å¸¸è§é—®é¢˜</a>
          </li><li class="level3">
                <a href="https://groups.google.com/a/chromium.org/forum/#!forum/chromium-apps" class="level3 ">Google ç½‘ä¸Šè®ºå›</a>
          </li><li class="level3">
                <a href="http://stackoverflow.com/questions/tagged/google-chrome-app" class="level3 ">Stack Overflow</a>
          </li>
          </ul>
        </li>
        </ul>
      </div>
      <div id="gc-pagecontent">

<div id="toc">
  <ol>
    <li >
      <a href="#requirement"
         data-list-item
         >æ¸…å•æ–‡ä»¶çš„è¦æ±‚</a>
    </li>
    <li >
      <a href="#listing"
         data-list-item
         >åˆ—ä¸¾å¯ç”¨çš„ä¸²è¡Œç«¯å£</a>
    </li>
    <li >
      <a href="#opening"
         data-list-item
         >æ‰“å¼€ä¸²è¡Œç«¯å£è®¾å¤‡</a>
    </li>
    <li >
      <a href="#closing"
         data-list-item
         >å…³é—­ä¸²è¡Œç«¯å£</a>
    </li>
    <li >
      <a href="#reading"
         data-list-item
         >è¯»å–ä¸²è¡Œç«¯å£</a>
    </li>
    <li >
      <a href="#writing"
         data-list-item
         >å†™å…¥ä¸²è¡Œç«¯å£</a>
    </li>
    <li >
      <a href="#flushing"
         data-list-item
         >æ¸…æ´—ä¸²è¡Œç«¯å£ç¼“å­˜</a>
    </li>
  </ol>
</div>

<h1><!--@Serial Devices-->ä¸²è¡Œç«¯å£è®¾å¤‡</h1>

<p>
</p>

<p>
<!--@This document describes how to use the <a href="https://crxdoc-zh.appspot.com/apps/serial.html">serial API</a> to read
and write from serial devices. Chrome Apps can also connect to
<a href="https://crxdoc-zh.appspot.com/apps/usb.html">USB</a> and <a href="https://crxdoc-zh.appspot.com/apps/bluetooth.html">Bluetooth</a> devices.-->
è¯¥æ–‡æ¡£æè¿°å¦‚ä½•ä½¿ç”¨<a href="https://crxdoc-zh.appspot.com/apps/serial.html">ä¸²è¡Œç«¯å£
API</a>è¯»å–å’Œå†™å…¥ä¸²è¡Œç«¯å£è®¾å¤‡ï¼ŒChrome åº”ç”¨è¿˜å¯ä»¥è¿æ¥åˆ°
<a href="https://crxdoc-zh.appspot.com/apps/usb.html">USB</a> ä¸<a href="https://crxdoc-zh.appspot.com/apps/bluetooth.html">è“ç‰™</a>è®¾å¤‡ã€‚
</p>

<p class="note">
<b><!--@Samples:-->ç¤ºä¾‹ï¼š</b><!--@ For examples that illustrate how Chrome Apps can connect to hardware devices, see the-->æœ‰å…³æ¼”ç¤ºå¦‚ä½•åœ¨
Chrome åº”ç”¨ä¸­è¿æ¥åˆ°ç¡¬ä»¶è®¾å¤‡çš„ä¾‹å­ï¼Œè¯·å‚è§
<a href="https://github.com/GoogleChrome/chrome-app-samples/tree/master/serial">serial</a><!--@,-->ã€
<a href="https://github.com/GoogleChrome/chrome-app-samples/tree/master/servo">servo</a><!--@,-->ã€
<a href="https://github.com/GoogleChrome/chrome-app-samples/tree/master/usb">usb</a><!--@, and-->
å’Œ
<a href="https://github.com/GoogleChrome/chrome-app-samples/tree/master/zephyr_hxm">zephyr_hxm
<!--@Bluetooth-->è“ç‰™</a><!--@ samples.-->ç¤ºä¾‹ã€‚
</p>

<h2 id="requirement"><!--@Manifest requirement-->æ¸…å•æ–‡ä»¶çš„è¦æ±‚</h2>

<p>
<!--@You must add the "serial" permission to the manifest file:-->
æ‚¨å¿…é¡»åœ¨æ¸…å•æ–‡ä»¶ä¸­åŠ å…¥ "serial" æƒé™ï¼š
</p>
<pre data-filename="manifest.json">
"permissions": [
  "serial"
]
</pre>

<h2 id="listing"><!--@Listing available serial ports-->åˆ—ä¸¾å¯ç”¨çš„ä¸²è¡Œç«¯å£</h2>

<p>
<!--@To get a list of available serial ports,
use the <code>getPorts()</code> method. <b>Note:</b> not all serial ports are available. The API uses a heuristic based on the name of the port to only expose serial devices that are expected to be safe.-->
è¦è·å–å¯ç”¨ä¸²è¡Œç«¯å£çš„åˆ—è¡¨ï¼Œè¯·ä½¿ç”¨ <code>getPorts()</code>
æ–¹æ³•ã€‚<b>æ³¨æ„ï¼š</b>å¹¶ä¸æ˜¯æ‰€æœ‰çš„ä¸²è¡Œç«¯å£éƒ½å¯ç”¨ã€‚è¯¥ API
é‡‡ç”¨å¯å‘å¼çš„æ–¹å¼ï¼ŒåŸºäºç«¯å£åç§°ï¼Œåªæš´éœ²è¢«è§†ä¸ºå®‰å…¨çš„ä¸²è¡Œç«¯å£è®¾å¤‡ã€‚
</p>

<pre>
var onGetPorts = function(ports) {
  for (var i=0; i&lt;ports.length; i++) {
    console.log(ports[i]);
  }
}
chrome.serial.getPorts(onGetPorts);
</pre>

<h2 id="opening"><!--@Opening a serial device-->æ‰“å¼€ä¸²è¡Œç«¯å£è®¾å¤‡</h2>

<p>
<!--@If you know the serial port name, you can open it for read and write using the <code>open</code> method:-->
å¦‚æœæ‚¨çŸ¥é“ä¸²è¡Œç«¯å£çš„åç§°ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ <code>open</code> æ–¹æ³•æ‰“å¼€å®ƒç”¨äºè¯»å†™ï¼š
</p>

<pre>
chrome.serial.open(portName, options, openCallback)
</pre>

<table border="0">
  <tr>
    <th scope="col"> <!--@Parameter-->å‚æ•° </th>
    <th scope="col"> <!--@Description-->æè¿° </th>
  </tr>
  <tr>
    <td>portName&nbsp;(string)</td>
    <td><!--@If your device's port name is unknown, you can use the <code>getPorts</code> method.-->
      å¦‚æœæ‚¨çš„è®¾å¤‡çš„ç«¯å£åæœªçŸ¥ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ <code>getPorts</code> æ–¹æ³•ã€‚
    </td>
  </tr>
  <tr>
    <td>options&nbsp;(object)</td>
    <td><!--@Parameter object with one single value: <code>bitrate</code>, an integer specifying the desired bitrate used to communicate with the serial port.-->
    åŒ…å«å•ä¸ªå€¼çš„å‚æ•°å¯¹è±¡ï¼š<code>bitrate</code>ï¼Œä¸ºä¸€ä¸ªæ•´æ•°ï¼ŒæŒ‡å®šç”¨äºä¸ä¸²è¡Œç«¯å£é€šä¿¡æ—¶å¸Œæœ›ä½¿ç”¨çš„æ¯”ç‰¹ç‡ã€‚
  </td>
  </tr>
  <tr>
    <td>openCallback</td>
    <td><!--@Invoked when the port has been successfully opened. The callback will be called with one parameter, <code>openInfo</code>, that has one attribute, <code>connectionId</code>. Save this id, because you will need it to actually communicate with the port.-->
    ç«¯å£æˆåŠŸæ‰“å¼€åè°ƒç”¨ã€‚è¯¥å›è°ƒå‡½æ•°è°ƒç”¨æ—¶å°†ä¼ é€’ä¸€ä¸ªå‚æ•°
    <code>openInfo</code>ï¼ŒåŒ…å«ä¸€ä¸ªå±æ€§
    <code>connectionId</code>ï¼Œè¯·ä¿å­˜è¯¥æ ‡è¯†ç¬¦ï¼Œå› ä¸ºæ‚¨éœ€è¦å®ƒæ‰èƒ½ä¸ç«¯å£è¿›è¡Œå®é™…çš„é€šä¿¡ã€‚
    </td>
  </tr>
</table>

<p><!--@A simple example:-->ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼š</p>

<pre>
var onOpen = function(connectionInfo) {
   // ä¸²è¡Œç«¯å£å·²æ‰“å¼€ï¼Œä¿å­˜å…¶æ ‡è¯†ç¬¦ä»¥ä¾¿ä»¥åä½¿ç”¨ã€‚
  _this.connectionId = connectionInfo.connectionId;
  // å¯¹å·²æ‰“å¼€çš„ç«¯å£åšä»»ä½•æ‚¨éœ€è¦åšçš„äº‹æƒ…ã€‚
}
// æ‰“å¼€ä¸²è¡Œç«¯å£ /dev/ttyS01
chrome.serial.open("/dev/ttyS01", {bitrate: 115200}, onOpen);
</pre>

<h2 id="closing"><!--@Closing a serial port-->å…³é—­ä¸²è¡Œç«¯å£</h2>

<p>
<!--@Closing a serial port is simple but very important. See the example below: -->
å…³é—­ä¸²è¡Œç«¯å£å¾ˆç®€å•ä½†æ˜¯å¾ˆé‡è¦ï¼Œè¯·å‚è§ä¸‹é¢çš„ä¾‹å­ï¼š
</p>

<pre>
var onClose = function(result) {
 console.log("ä¸²è¡Œç«¯å£å·²å…³é—­");
}
chrome.serial.close(connectionId, onClose);
</pre>

<h2 id="reading"><!--@Reading from a serial port-->è¯»å–ä¸²è¡Œç«¯å£</h2>

<p>
<!--@The serial API reads from the serial port and
delivers the read bytes as an ArrayBuffer.
There is no guarantee that all the requested bytes, even if available in the port, will be read in one chunk.
The following example can accumulate read bytes, at most 128 at a time, until a new line is read,
and then call a listener with the <code>ArrayBuffer</code> bytes converted to a String:-->
ä¸²è¡Œç«¯å£ API ä»ä¸²è¡Œç«¯å£è¯»å–æ•°æ®å¹¶ä»¥ <code>ArrayBuffer</code>
çš„æ–¹å¼ä¼ é€’å·²è¯»å–çš„å­—èŠ‚ã€‚ä¸èƒ½ä¿è¯æ‰€æœ‰è¯·æ±‚çš„å­—èŠ‚ï¼ˆå³ä½¿åœ¨ç«¯å£ä¸­å¯ç”¨ï¼‰éƒ½èƒ½åœ¨ä¸€ä¸ªç‰‡æ®µä¸­è¯»å–ã€‚å¦‚ä¸‹è¿‡ç¨‹å¯ä»¥ç§¯ç´¯è¯»å–çš„å­—èŠ‚ï¼Œä¸€æ¬¡æœ€å¤š
128 å­—èŠ‚ï¼Œç›´åˆ°è¯»åˆ°äº†æ¢è¡Œç¬¦ï¼Œç„¶åè°ƒç”¨ç›‘å¬å™¨ï¼Œä¼ é€’è½¬æ¢ä¸ºå­—ç¬¦ä¸²çš„
<code>ArrayBuffer</code>ï¼š
</p>

<pre>
var dataRead='';

var onCharRead=function(readInfo) {
    if (!connectionInfo) {
      return;
    }
    if (readInfo &amp;&amp; readInfo.bytesRead&gt;0 &amp;&amp; readInfo.data) {
      var str=ab2str(readInfo.data);
      if (str[readInfo.bytesRead-1]==='\n') {
        dataRead+=str.substring(0, readInfo.bytesRead-1);
        onLineRead(dataRead);
        dataRead="";
      } else {
        dataRead+=str;
      }
    }
    chrome.serial.read(connectionId, 128, onCharRead);
  }

/* å°† ArrayBuffer è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼Œä½¿ç”¨ UTF-8 ç¼–ç æ–¹æ¡ˆï¼Œ
   è¿™å’Œ Arduino é»˜è®¤æƒ…å†µä¸‹å‘é€å­—ç¬¦ä¸²çš„æ–¹å¼ä¸€è‡´ */
  var ab2str=function(buf) {
    return String.fromCharCode.apply(null, new Uint8Array(buf));
  };
</pre>

<h2 id="writing"><!--@Writing to a serial port-->å†™å…¥ä¸²è¡Œç«¯å£</h2>

<p>
<!--@The writing routine is simpler than reading,
since the writing can occur all at once.
The only catch is that if your data protocol is String based,
you have to convert your output string to an <code>ArrayBuffer</code>.
See the code example below:-->
å†™å…¥ä¾‹ç¨‹æ¯”è¯»å–ç®€å•ï¼Œå› ä¸ºå†™å…¥æ“ä½œå¯ä»¥ä¸€æ¬¡å®Œæˆã€‚å”¯ä¸€çš„é—®é¢˜æ˜¯ï¼Œå¦‚æœæ‚¨çš„æ•°æ®åè®®åŸºäºå­—ç¬¦ä¸²ï¼Œæ‚¨å¿…é¡»å°†æ‚¨çš„è¾“å‡ºå­—ç¬¦ä¸²è½¬æ¢ä¸º
<code>ArrayBuffer</code>ã€‚è¯·å‚è€ƒä¸‹åˆ—ä»£ç ï¼š
</p>

<pre>
var writeSerial=function(str) {
  chrome.serial.write(connectionId, str2ab(str), onWrite);
}
// å°†å­—ç¬¦ä¸²è½¬æ¢ä¸º ArrayBuffer
var str2ab=function(str) {
  var buf=new ArrayBuffer(str.length);
  var bufView=new Uint8Array(buf);
  for (var i=0; i&lt;str.length; i++) {
    bufView[i]=str.charCodeAt(i);
  }
  return buf;
}
</pre>

<h2 id="flushing"><!--@Flushing a serial port buffer-->æ¸…æ´—ä¸²è¡Œç«¯å£ç¼“å­˜</h2>

<p>
<!--@You can flush your serial port buffer by issuing the flush command:-->
æ‚¨å¯ä»¥é€šè¿‡å‘å‡ºæ¸…æ´—å‘½ä»¤æ¸…é™¤ä¸²è¡Œç«¯å£ç¼“å­˜ï¼š
</p>

<pre>
  chrome.serial.flush(connectionId, onFlush);
</pre>
      </div>
    </div>
  </body>

  <div id="gc-footer">
    <button class="google-button" id="scroll-to-top">â†‘</button>
    <button class="google-button" id="send-feedback" style="display:none">Send Feedback</button>
    <div class="text">
      <p>
        <!--@Except as otherwise <a href="http://code.google.com/policies.html#restrictions">noted</a>,
        the content of this page is licensed under the <a rel="license" href="http://creativecommons.org/licenses/by/3.0/">Creative Commons
        Attribution 3.0 License</a>, and code samples are licensed under the
        <a rel="license" href="http://code.google.com/google_bsd_license.html">BSD License</a>.-->
        è¯¥é¡µé¢ç¿»è¯‘è‡ª
        <a href="https://developer.chrome.com/extensions/">Google Chrome Extensions</a>
        ä¸
        <a href="https://developer.chrome.com/apps/">Google Chrome Apps</a>ã€‚é™¤éç‰¹åˆ«<a href="https://code.google.com/policies.html#restrictions">è¯´æ˜</a>ï¼Œè¯¥é¡µé¢çš„å†…å®¹éµå¾ª
        <a rel="license" href="http://creativecommons.org/licenses/by/3.0/">Creative Commons Attribution 3.0
        License</a>ï¼Œä»£ç ç¤ºä¾‹éµå¾ª
        <a rel="license" href="http://code.google.com/google_bsd_license.html">BSD License</a>ã€‚
      </p>
      <p class="crxdoczh-footer">
        <a href="https://code.google.com/p/crxdoczh/">crxdoczh é¡¹ç›®ä¸»é¡µ</a>
        <a href="https://code.google.com/p/crxdoczh/issues/entry?template=%E7%BD%91%E7%AB%99%E5%8F%8D%E9%A6%88">å‘é€åé¦ˆ</a>
        <a href="" rel="publisher">
          Google+ é¡µé¢
        </a>
        <a href="https://plus.google.com/communities/105384952265487436177">Google+ ç¤¾ç¾¤</a>
      </p>
      <script src="../../developer.chrome.com/static/js/platform_chooser.js" type="text/javascript"></script>
      <script src="../../developer.chrome.com/static/js/popup.js" type="text/javascript"></script>
      <script src="../../developer.chrome.com/static/js/prettify.js" type="text/javascript"></script>
      <script src="../../developer.chrome.com/static/js/scroll.js" type="text/javascript"></script>
      <script src="../../developer.chrome.com/static/js/sidebar.js" type="text/javascript"></script>
      <script src="../../developer.chrome.com/static/js/tabs.js" type="text/javascript"></script>
      <script>
        (function() {
          // Auto syntax highlight all pre tags.
          var preElements = document.getElementsByTagName('pre');
          for (var i = 0; i < preElements.length; i++) {
            var preElement = preElements[i];
            preElement.classList.add('prettyprint');
            var datasetFilename = preElement.getAttribute('data-filename');
            if (datasetFilename) {
              var filename = document.createElement('div');
              filename.className = 'filename nocode';
              filename.textContent = datasetFilename;
              preElement.insertBefore(filename, preElement.firstChild);
            }
          }
          prettyPrint();
        })();

        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-25062424-1']);
        _gaq.push(['_trackPageview']);

        (function() {
          var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
          ga.src = 'https://ssl.google-analytics.com/ga.js';
          var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();

        window.___gcfg = {
      Â  Â  lang: 'zh-CN'
      Â  };
      Â  (function() {
      Â  Â  var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
      Â  Â  po.src = 'https://apis.google.com/js/plusone.js';
      Â  Â  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
      Â  })();
      </script>
    </div>
  </div>
</html>
