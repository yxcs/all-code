<!DOCTYPE html>
<html>
  <head>
    <title>å¤–éƒ¨å†…å®¹ - Google Chrome åº”ç”¨å¼€å‘æ–‡æ¡£ï¼ˆéå®˜æ–¹ä¸­æ–‡ç‰ˆï¼‰</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link href="../static/css/site.css" rel="stylesheet" type="text/css">
    <link href="../../developer.chrome.com/static/css/print.css" rel="stylesheet" type="text/css" media="print">
    <link href="../../developer.chrome.com/static/css/prettify.css" rel="stylesheet" type="text/css">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
  </head>

  <body>


<!-- Copyright © 2005. Spidersoft Ltd -->
<style>
A.applink:hover {border: 2px dotted #DCE6F4;padding:2px;background-color:#ffff00;color:green;text-decoration:none}
A.applink       {border: 2px dotted #DCE6F4;padding:2px;color:#2F5BFF;background:transparent;text-decoration:none}
A.info          {color:#2F5BFF;background:transparent;text-decoration:none}
A.info:hover    {color:green;background:transparent;text-decoration:underline}
</style>
<div style='BORDER: 1px solid #DCE6F4; MARGIN-TOP: 20px; MARGIN-BOTTOM: 20px; MARGIN-LEFT: 5px; MARGIN-RIGHT: 5px; PADDING: 5px; BACKGROUND-COLOR: #eef8ff;line-height:180%; COLOR: #000000; font-family: Arial; font-size: 8pt; width=100%; FILTER: progid:DXImageTransform.Microsoft.Gradient(GradientType=0, StartColorStr="#FFFFFFFF", EndColorStr="#F2F5FAFF");'>
This page was saved using <a class="applink" href="http://www.spidersoft.com"><b>WebZIP 7.0.3.1030</b></a> <a class="applink" href="http://www.spidersoft.com"><b>offline browser</b></a>  on  12/24/13 11:31:37.<br>
<b>Address:</b> <a class="info" href="https://crxdoc-zh.appspot.com/apps/app_external.html">https://crxdoc-zh.appspot.com/apps/app_external.html</a><br>
<b>Title:</b> å¤–éƒ¨å†…å®¹ - Google Chrome åº”ç”¨å¼€å‘æ–‡æ¡£ï¼ˆéå®˜æ–¹ä¸­æ–‡ç‰ˆï¼‰ &nbsp;&bull;&nbsp; <b>Size:</b> 32239<br></div>
<!-- /Copyright © 2005. Spidersoft Ltd -->


    <div id="gc-topnav">
      <table><tr>
      <td id="chrome-logo">
        <a href="apps.html" title="Google Chrome åº”ç”¨" id="view-original">
          <img src="../../developer.chrome.com/static/images/chrome-logo.png" alt=""> chrome
        </a>
        <script type="text/javascript">
          document.getElementById('view-original').href = "https://developer.chrome.com" + location.pathname;
        </script>
        <div id="platform-chooser">
          <button id="platform-chooser-toggle" data-menu="platform-chooser-popup">
            åº”ç”¨ &#x25be;&#x202F;
          </button>
          <div id="platform-chooser-popup">
            <button class="apps" data-href="/apps/about_apps.html"><!--@apps-->åº”ç”¨</button>
            <button class="extensions" data-href="/extensions"><!--@extensions-->æ‰©å±•ç¨‹åº</button>
          </div>
        </div>ï¼ˆéå®˜æ–¹ä¸­æ–‡ç‰ˆï¼‰
      </td>
      <td>
        <ul>
          <li>
            <a href="samples.html"
               title="ç¤ºä¾‹ åº”ç”¨ï¼ˆåŒ…å«æºä»£ç ï¼‰"><!--@Samples-->ç¤ºä¾‹</a>
          </li>
          <li>
            <a href="http://groups.google.com/a/chromium.org/group/chromium-apps"
               title="Google Chrome åº”ç”¨å¼€å‘è€…è®ºå›"
               target="_blank"><!--@Group-->è®ºå›ï¼ˆè‹±æ–‡ï¼‰</a>
          </li>
          <li>
            <a href="http://stackoverflow.com/tags/google-chrome-app/info"
               title="Stack Overflow ä¸Šçš„ [google-chrome-app] æ ‡ç­¾"
               target="_blank">Stack overflow</a>
          </li>
        </ul>
      </td>
      </tr></table>
    </div>
    <div id="gc-topnav-space"></div>
    <div id="gc-container">
      <div id="gc-sidebar">
        <g:plusone></g:plusone>
        <ul 
            class="level1 ">
        <li class="level2">
              <span class="level2">å‘ç°</span>
          <ul 
              class="level2 ">
          <li class="level3">
                <a href="about_apps.html" class="level3 ">ä»€ä¹ˆæ˜¯ Chrome åº”ç”¨ï¼Ÿ</a>
          </li>
          </ul>
        </li><li class="level2">
              <span class="level2">å¼€å‘</span>
          <ul 
              class="level2 ">
          <li class="level3">
                <a href="first_app.html" class="level3 ">åˆ›å»ºæ‚¨çš„ç¬¬ä¸€ä¸ªåº”ç”¨</a>
          </li><li class="level3">
              <a class="button level3">
                <span class="level3">æ•™ç¨‹</span>
                <div class="toggleIndicator level3"></div>
              </a>
            <ul toggleable
                class="level3 hidden">
            <li class="level4">
                <a class="button level4">
                  <span class="level4">é€šè¿‡ä»£ç å®éªŒå®¤å­¦ä¹ </span>
                  <div class="toggleIndicator level4"></div>
                </a>
              <ul toggleable
                  class="level4 hidden">
              <li class="level5">
                    <a href="app_codelab.html" class="level5 ">å…³äºä»£ç å®éªŒå®¤</a>
              </li><li class="level5">
                    <a href="app_codelab1_setup.html" class="level5 ">1ã€è®¾ç½®å¼€å‘ç¯å¢ƒ</a>
              </li><li class="level5">
                    <a href="app_codelab2_basic.html" class="level5 ">2ã€åˆ›å»ºåŸºæœ¬çš„åº”ç”¨</a>
              </li><li class="level5">
                    <a href="app_codelab3_mvc.html" class="level5 ">3ã€åˆ›å»º MVC</a>
              </li><li class="level5">
                    <a href="app_codelab5_data.html" class="level5 ">4ã€ä¿å­˜å’Œè·å–æ•°æ®</a>
              </li><li class="level5">
                    <a href="app_codelab6_lifecycle.html" class="level5 ">5ã€ç®¡ç†åº”ç”¨çš„ç”Ÿå‘½å‘¨æœŸ</a>
              </li><li class="level5">
                    <a href="app_codelab7_useridentification.html" class="level5 ">6ã€è®¿é—®ç”¨æˆ·æ•°æ®</a>
              </li><li class="level5">
                    <a href="app_codelab8_webresources.html" class="level5 ">7ã€è®¿é—®ç½‘ç»œèµ„æº</a>
              </li><li class="level5">
                    <a href="app_codelab_10_publishing.html" class="level5 ">8ã€å‘å¸ƒåº”ç”¨</a>
              </li>
              </ul>
            </li><li class="level4">
                <a class="button level4">
                  <span class="level4">MVC æ¶æ„ä¸æ¡†æ¶</span>
                  <div class="toggleIndicator level4"></div>
                </a>
              <ul toggleable
                  class="level4 hidden">
              <li class="level5">
                    <a href="app_frameworks.html" class="level5 ">å…³äº MVC æ¶æ„</a>
              </li><li class="level5">
                    <a href="angular_framework.html" class="level5 ">ç”¨ AngularJS å»ºç«‹åº”ç”¨</a>
              </li><li class="level5">
                    <a href="sencha_framework.html" class="level5 ">ç”¨ Sencha Ext JS å»ºç«‹åº”ç”¨</a>
              </li>
              </ul>
            </li>
            </ul>
          </li><li class="level3">
              <a class="button level3">
                <span class="level3">Chrome åº”ç”¨çš„æ¦‚å¿µ</span>
                <div class="toggleIndicator level3 toggled"></div>
              </a>
            <ul toggleable
                class="level3 ">
            <li class="level4">
                <a class="button level4">
                  <span class="level4">åŸºç¡€çŸ¥è¯†</span>
                  <div class="toggleIndicator level4 toggled"></div>
                </a>
              <ul toggleable
                  class="level4 ">
              <li class="level5">
                    <a href="app_architecture.html" class="level5 ">åº”ç”¨çš„æ¶æ„</a>
              </li><li class="level5">
                    <a href="app_lifecycle.html" class="level5 ">åº”ç”¨çš„ç”Ÿå‘½å‘¨æœŸ</a>
              </li><li class="level5">
                    <a href="offline_apps.html" class="level5 ">é¦–å…ˆè€ƒè™‘ç¦»çº¿</a>
              </li><li class="level5">
                    <a  class="level5 selected">å¤–éƒ¨å†…å®¹</a>
              </li>
              </ul>
            </li><li class="level4">
                <a class="button level4">
                  <span class="level4">å®‰å…¨æ€§</span>
                  <div class="toggleIndicator level4"></div>
                </a>
              <ul toggleable
                  class="level4 hidden">
              <li class="level5">
                    <a href="contentSecurityPolicy.html" class="level5 ">å†…å®¹å®‰å…¨ç­–ç•¥</a>
              </li>
              </ul>
            </li><li class="level4">
                <a class="button level4">
                  <span class="level4">å°†æ‚¨çš„åº”ç”¨ä¸äº‘ç«¯ç»“åˆ</span>
                  <div class="toggleIndicator level4"></div>
                </a>
              <ul toggleable
                  class="level4 hidden">
              <li class="level5">
                  <a class="button level5">
                    <span class="level5">äº‘æ¶ˆæ¯æœåŠ¡</span>
                    <div class="toggleIndicator level5"></div>
                  </a>
                <ul toggleable
                    class="level5 hidden">
                <li class="level6">
                      <a href="cloudMessaging.html" class="level6 ">å…³äºäº‘æ¶ˆæ¯æœåŠ¡</a>
                </li><li class="level6">
                      <a href="pushMessaging.html" class="level6 ">å®¢æˆ·ç«¯å‚è€ƒ</a>
                </li><li class="level6">
                      <a href="gcm_server.html" class="level6 ">æœåŠ¡å‚è€ƒ</a>
                </li><li class="level6">
                      <a href="gcm_tos.html" class="level6 ">æœåŠ¡æ¡æ¬¾</a>
                </li>
                </ul>
              </li><li class="level5">
                  <a class="button level5">
                    <span class="level5">äº‘å­˜å‚¨æœåŠ¡</span>
                    <div class="toggleIndicator level5"></div>
                  </a>
                <ul toggleable
                    class="level5 hidden">
                <li class="level6">
                      <a href="storage.html" class="level6 ">chrome.storage</a>
                </li>
                </ul>
              </li><li class="level5">
                    <a href="app_identity.html" class="level5 ">ç”¨æˆ·è®¤è¯</a>
              </li>
              </ul>
            </li><li class="level4">
                <a class="button level4">
                  <span class="level4">å­˜å‚¨ä¸è·å–æ•°æ®</span>
                  <div class="toggleIndicator level4"></div>
                </a>
              <ul toggleable
                  class="level4 hidden">
              <li class="level5">
                    <a href="app_storage.html" class="level5 ">å­˜å‚¨ API</a>
              </li>
              </ul>
            </li><li class="level4">
                <a class="button level4">
                  <span class="level4">ä½¿ç”¨ä½çº§ç³»ç»ŸæœåŠ¡</span>
                  <div class="toggleIndicator level4"></div>
                </a>
              <ul toggleable
                  class="level4 hidden">
              <li class="level5">
                    <a href="app_usb.html" class="level5 ">USB</a>
              </li><li class="level5">
                    <a href="app_serial.html" class="level5 ">ä¸²è¡Œç«¯å£</a>
              </li><li class="level5">
                    <a href="app_network.html" class="level5 ">ç½‘ç»œé€šä¿¡</a>
              </li>
              </ul>
            </li><li class="level4">
                <a class="button level4">
                  <span class="level4">ä¸ä¸»æœºå¹³å°äº¤äº’</span>
                  <div class="toggleIndicator level4"></div>
                </a>
              <ul toggleable
                  class="level4 hidden">
              <li class="level5">
                    <a href="desktop_notifications.html" class="level5 ">ä¸°å¯Œçš„é€šçŸ¥</a>
              </li>
              </ul>
            </li>
            </ul>
          </li>
          </ul>
        </li><li class="level2">
              <span class="level2">å‘å¸ƒ</span>
          <ul 
              class="level2 ">
          <li class="level3">
                <a href="publish_app.html" class="level3 ">å‘å¸ƒæ‚¨çš„åº”ç”¨</a>
          </li><li class="level3">
              <a class="button level3">
                <span class="level3">é€šè¿‡æ‚¨çš„åº”ç”¨è·åˆ©</span>
                <div class="toggleIndicator level3"></div>
              </a>
            <ul toggleable
                class="level3 hidden">
            <li class="level4">
                  <a href="google_wallet.html" class="level4 ">ç”¨äºæ•°å­—å•†å“çš„ Google ç”µå­é’±åŒ…</a>
            </li>
            </ul>
          </li><li class="level3">
                <a href="analytics.html" class="level3 ">Analyticsï¼ˆåˆ†æï¼‰</a>
          </li>
          </ul>
        </li><li class="level2">
              <span class="level2">å‚è€ƒ</span>
          <ul 
              class="level2 ">
          <li class="level3">
                <a href="api_index.html" class="level3 ">Chrome å¹³å° API</a>
          </li><li class="level3">
                <a href="tags/webview.html" class="level3 ">Webview æ ‡ç­¾</a>
          </li><li class="level3">
                <a href="api_other.html" class="level3 ">ç½‘é¡µ API</a>
          </li><li class="level3">
                <a href="manifest.html" class="level3 ">æ¸…å•æ–‡ä»¶æ ¼å¼</a>
          </li><li class="level3">
                <a href="app_deprecated.html" class="level3 ">ç¦ç”¨çš„ç½‘é¡µç‰¹æ€§</a>
          </li>
          </ul>
        </li><li class="level2">
              <span class="level2">ç¤ºä¾‹</span>
          <ul 
              class="level2 ">
          <li class="level3">
                <a href="samples.html" class="level3 ">ç¤ºä¾‹åº”ç”¨</a>
          </li>
          </ul>
        </li><li class="level2">
              <span class="level2">å¸®åŠ©</span>
          <ul 
              class="level2 ">
          <li class="level3">
                <a href="faq.html" class="level3 ">å¸¸è§é—®é¢˜</a>
          </li><li class="level3">
                <a href="https://groups.google.com/a/chromium.org/forum/#!forum/chromium-apps" class="level3 ">Google ç½‘ä¸Šè®ºå›</a>
          </li><li class="level3">
                <a href="http://stackoverflow.com/questions/tagged/google-chrome-app" class="level3 ">Stack Overflow</a>
          </li>
          </ul>
        </li>
        </ul>
      </div>
      <div id="gc-pagecontent">

<div id="toc">
  <ol>
    <li >
      <a href="#external"
         data-list-item
         >å¼•ç”¨å¤–éƒ¨èµ„æº</a>
      <ol>
        <li >
          <a href="#manifest"
             data-list-item
             >æ¸…å•æ–‡ä»¶çš„è¦æ±‚</a>
        </li>
        <li >
          <a href="#cross-origin"
             data-list-item
             >è·¨ç«™ XMLHttpRequest</a>
        </li>
      </ol>
    </li>
    <li >
      <a href="#webview"
         data-list-item
         >åµŒå…¥å¤–éƒ¨ç½‘é¡µ</a>
      <ol>
        <li >
          <a href="#webview_element"
             data-list-item
             >æ·»åŠ  webview å…ƒç´ </a>
        </li>
        <li >
          <a href="#properties"
             data-list-item
             >æ›´æ–°å±æ€§</a>
        </li>
      </ol>
    </li>
    <li >
      <a href="#sandboxing"
         data-list-item
         >é€šè¿‡æ²™ç›’ä¿æŠ¤æœ¬åœ°å†…å®¹</a>
      <ol>
        <li >
          <a href="#inline_scripts"
             data-list-item
             >åœ¨æ²™ç›’ä¸­ä½¿ç”¨å†…åµŒè„šæœ¬</a>
        </li>
        <li >
          <a href="#include_sandbox"
             data-list-item
             >åœ¨æ¸…å•æ–‡ä»¶ä¸­åŒ…å« sandbox</a>
        </li>
        <li >
          <a href="#opening_sandbox"
             data-list-item
             >åœ¨çª—å£ä¸­æ‰“å¼€ç»è¿‡æ²™ç›’å±è”½çš„é¡µé¢</a>
        </li>
        <li >
          <a href="#embedding_sandbox"
             data-list-item
             >åœ¨åº”ç”¨é¡µé¢ä¸­åµŒå…¥ç»è¿‡æ²™ç›’å±è”½çš„é¡µé¢</a>
        </li>
      </ol>
    </li>
    <li >
      <a href="#postMessage"
         data-list-item
         >å‘ç»è¿‡æ²™ç›’å±è”½çš„é¡µé¢å‘é€æ¶ˆæ¯</a>
      <ol>
        <li >
          <a href="#post_message"
             data-list-item
             >æŠ•é€’æ¶ˆæ¯</a>
        </li>
        <li >
          <a href="#listen_message"
             data-list-item
             >ç›‘å¬æ¶ˆæ¯</a>
        </li>
      </ol>
    </li>
  </ol>
</div>

<h1><!--@External Content-->å¤–éƒ¨å†…å®¹</h1>


<p>
<!--@The <a href="https://crxdoc-zh.appspot.com/apps/app_architecture.html#security">Chrome Apps security model</a> disallows
external content in iframes and
the use of inline scripting and <code>eval()</code>.
You can override these restrictions,
but your external content must be isolated from the app.-->
<a href="https://crxdoc-zh.appspot.com/apps/app_architecture.html#security">Chrome åº”ç”¨çš„å®‰å…¨æ¨¡å‹</a>ä¸å…è®¸
iframe ä¸­çš„å¤–éƒ¨å†…å®¹ï¼Œä¹Ÿä¸å…è®¸ä½¿ç”¨å†…åµŒè„šæœ¬ä¸
<code>eval()</code>ã€‚æ‚¨å¯ä»¥è¦†ç›–è¿™äº›é™åˆ¶ï¼Œä½†æ˜¯æ‚¨çš„å¤–éƒ¨å†…å®¹å¿…é¡»ä¸åº”ç”¨ç¨‹åºéš”ç¦»ã€‚
</p>

<p>
<!--@Isolated content cannot directly
access the app's data or any of the APIs.
Use cross-origin XMLHttpRequests
and post-messaging to communicate between the event page and sandboxed content
and indirectly access the APIs.-->
éš”ç¦»çš„å†…å®¹ä¸èƒ½ç›´æ¥è®¿é—®åº”ç”¨ç¨‹åºçš„æ•°æ®æˆ–ä»»ä½• APIï¼Œä½†å¯ä»¥ä½¿ç”¨è·¨ç«™
XMLHttpRequest åŠæ¶ˆæ¯ä¼ é€’åœ¨äº‹ä»¶é¡µé¢å’Œç»è¿‡æ²™ç›’å±è”½çš„å†…å®¹é—´é€šä¿¡ï¼Œå¹¶é—´æ¥è®¿é—®
APIã€‚
</p>

<p class="note">
<b>API <!--@Sample: -->ç¤ºä¾‹ï¼š</b><!--@
Want to play with the code?
Check out the-->æƒ³è¯•è¯•è¿™äº›ä»£ç å—ï¼Ÿè¯·å‚è§
<a href="https://github.com/GoogleChrome/chrome-app-samples/tree/master/sandbox">sandbox</a> <!--@sample.-->
ç¤ºä¾‹ã€‚
</p>

<h2 id="external"><!--@Referencing external resources-->å¼•ç”¨å¤–éƒ¨èµ„æº</h2>

<p>
<!--@The <a href="contentSecurityPolicy.html">Content Security Policy</a> used by apps disallows
the use of many kinds of remote URLs, so you can't directly reference external
images, stylesheets, or fonts from an app page. Instead, you can use use
cross-origin XMLHttpRequests to fetch these resources,
and then serve them via <code>blob:</code> URLs.-->
åº”ç”¨ä½¿ç”¨çš„<a href="contentSecurityPolicy.html">å†…å®¹å®‰å…¨ç­–ç•¥</a>ä¸å…è®¸å¤šç§ç±»å‹çš„è¿œç¨‹
URLï¼Œæ‰€ä»¥æ‚¨ä¸èƒ½ä»åº”ç”¨é¡µé¢ä¸­ç›´æ¥å¼•ç”¨å¤–éƒ¨å›¾åƒã€æ ·å¼è¡¨æˆ–å­—ä½“ã€‚ç›¸åï¼Œæ‚¨å¯ä»¥ä½¿ç”¨è·¨ç«™
XMLHttpRequest è·å–è¿™äº›èµ„æºï¼Œå¹¶é€šè¿‡ <code>blob:</code> URL æ¥ä½¿ç”¨å®ƒä»¬ã€‚
</p>

<h3 id="manifest"><!--@Manifest requirement-->æ¸…å•æ–‡ä»¶çš„è¦æ±‚</h3>

<p>
<!--@To be able to do cross-origin XMLHttpRequests, you'll need to add a permission
for the remote URL's host:-->
ä¸ºäº†èƒ½å¤Ÿå‘å‡ºè·¨æ¥æº XMLHttpRequest è¯·æ±‚ï¼Œæ‚¨éœ€è¦ä¸ºè¿œç¨‹ URL çš„ä¸»æœºæ·»åŠ æƒé™ï¼š
</p>

<pre data-filename="manifest.json">
"permissions": [
    "...",
    "https://supersweetdomainbutnotcspfriendly.com/"
  ]
</pre>

<h3 id="cross-origin"><!--@Cross-origin-->è·¨ç«™ XMLHttpRequest</h3>

<p>
<!--@Fetch the remote URL into the app and serve its contents as a-->
å°†è¿œç¨‹ URL è·å–è¿›åº”ç”¨å¹¶é€šè¿‡
<code>blob:</code>
URL<!--@:-->
æ¥ä½¿ç”¨å®ƒçš„å†…å®¹ï¼š
</p>

<pre>
var xhr = new XMLHttpRequest();
xhr.open('GET', 'https://supersweetdomainbutnotcspfriendly.com/image.png', true);
xhr.responseType = 'blob';
xhr.onload = function(e) {
  var img = document.createElement('img');
  img.src = window.webkitURL.createObjectURL(this.response);
  document.body.appendChild(img);
};

xhr.send();
</pre>

<p><!--@You may want to <a href="https://crxdoc-zh.appspot.com/apps/offline_apps.html#saving-locally">save</a>
these resources locally, so that they are available offline.-->
æ‚¨å¯èƒ½å¸Œæœ›åœ¨æœ¬åœ°<a href="https://crxdoc-zh.appspot.com/apps/offline_apps.html#saving-locally"
>ä¿å­˜</a>è¿™äº›èµ„æºï¼Œè¿™æ ·å®ƒä»¬åœ¨ç¦»çº¿çŠ¶æ€ä¸‹ä¹Ÿå¯ä»¥ä½¿ç”¨ã€‚
</p>

<h2 id="webview"><!--@Embed external web pages-->åµŒå…¥å¤–éƒ¨ç½‘é¡µ</h2>

<p class="note">
<b>API <!--@Sample: -->ç¤ºä¾‹ï¼š</b><!--@
Want to play with the code? Check out the-->æƒ³è¯•è¯•è¿™äº›ä»£ç å—ï¼Ÿè¯·å‚è§
<a href="https://github.com/GoogleChrome/chrome-app-samples/tree/master/browser">browser</a>
<!--@sample.-->
ç¤ºä¾‹ã€‚
</p>

<p>
<!--@The <code>webview</code> tag allows you to embed external web content in your
app, for example, a web page. It replaces iframes that point to remote URLs,
which are disabled inside Chrome Apps. Unlike iframes, the
<code>webview</code> tag runs in a separate process. This means that an exploit
inside of it will still be isolated and won't be able to gain elevated
privileges. Further, since its storage (cookies, etc.) is isolated from the app,
there is no way for the web content to access any of the app's data.-->
<code>webview</code>
æ ‡ç­¾å…è®¸æ‚¨åœ¨æ‚¨çš„åº”ç”¨ä¸­åµŒå…¥å¤–éƒ¨ç½‘ç»œå†…å®¹ï¼Œä¾‹å¦‚ä¸€ä¸ªç½‘é¡µã€‚å®ƒæ›¿æ¢äº†æŒ‡å‘è¿œç¨‹ URL
çš„ iframeï¼Œåœ¨ Chrome åº”ç”¨å†…è¿™æ˜¯ç¦ç”¨çš„ã€‚ä¸ iframe ä¸åŒï¼Œ<code>webview</code>
æ ‡ç­¾è¿è¡Œåœ¨å•ç‹¬çš„è¿›ç¨‹ä¸­ï¼Œè¿™æ„å‘³ç€å®ƒå†…éƒ¨çš„æ”»å‡»ä»ç„¶ä¼šè¢«éš”ç¦»å¼€æ¥ï¼Œä¸èƒ½è·å¾—æå‡çš„æƒé™ã€‚æ­¤å¤–ï¼Œç”±äºå®ƒçš„å­˜å‚¨åŒºï¼ˆCookie ç­‰ï¼‰ä¸åº”ç”¨éš”ç¦»ï¼Œæ²¡æœ‰åŠæ³•è®©ç½‘ç»œå†…å®¹è®¿é—®åº”ç”¨çš„ä»»ä½•æ•°æ®ã€‚
</p>

<h3 id="webview_element"><!--@Add webview element-->æ·»åŠ  webview å…ƒç´ </h3>

<p>
<!--@Your <code>webview</code> element must include the URL to the source content
and specify its dimensions.-->
æ‚¨çš„ webview å…ƒç´ å¿…é¡»åŒ…å«æ¥æºå†…å®¹çš„ URL å¹¶æŒ‡å®šå¤§å°ã€‚
</p>

<pre data-filename="browser.html">
&lt;webview src="http://news.google.com/" width="640" height="480">&lt;/webview>
</pre>

<h3 id="properties"><!--@Update properties-->æ›´æ–°å±æ€§</h3>

<p>
<!--@To dynamically change the <code>src</code>, <code>width</code> and
<code>height</code> properties of a <code>webview</code> tag, you can either
set those properties directly on the JavaScript object, or use the
<code>setAttribute</code> DOM function.-->
è¦åŠ¨æ€æ›´æ”¹ <code>webview</code> æ ‡ç­¾çš„ <code>src</code>ã€<code>width</code>
å’Œ <code>height</code> å±æ€§ï¼Œæ‚¨æ—¢å¯ä»¥ç›´æ¥åœ¨ <code>JavaScript</code>
å¯¹è±¡ä¸Šè®¾ç½®è¿™äº›å±æ€§ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ DOM å‡½æ•° <code>setAttribute</code>ã€‚
</p>

<pre data-filename="browser.js">
document.querySelector('#mywebview').src =
    'http://blog.chromium.org/';
// æˆ–
document.querySelector('#mywebview').setAttribute(
    'src', 'http://blog.chromium.org/');
</pre>

<h2 id="sandboxing"><!--@Sandbox local content-->é€šè¿‡æ²™ç›’ä¿æŠ¤æœ¬åœ°å†…å®¹</h2>

<p>
<!--@Sandboxing allows specified pages
to be served in a sandboxed, unique origin.
These pages are then exempt from their Content Security Policy.
Sandboxed pages can use iframes, inline scripting,
and <code>eval()</code>.
Check out the manifest field description for
<a href="https://crxdoc-zh.appspot.com/apps/manifest/sandbox.html">sandbox</a>.-->
æ²™ç›’åŠŸèƒ½å…è®¸æŒ‡å®šé¡µé¢åœ¨ç»è¿‡æ²™ç›’å±è”½çš„å”¯ä¸€æ¥æºä¸­è¿è¡Œï¼Œè¿™äº›é¡µé¢å°±ä¸å—å†…å®¹å®‰å…¨ç­–ç•¥çš„é™åˆ¶ã€‚ç»è¿‡æ²™ç›’å±è”½çš„é¡µé¢å¯ä»¥ä½¿ç”¨ iframeã€å†…åµŒè„šæœ¬ä»¥åŠ
<code>eval()</code>ã€‚è¯·æŸ¥é˜… <a href="https://crxdoc-zh.appspot.com/apps/manifest/sandbox.html">sandbox</a>
æ¸…å•æ–‡ä»¶å­—æ®µçš„æè¿°ã€‚
</p>

<p>
<!--@It's a trade-off though:
sandboxed pages can't use the chrome.* APIs.
If you need to do things like <code>eval()</code>,
go this route to be exempt from CSP,
but you won't be able to use the cool new stuff.-->
ä¸è¿‡è¿™ä¹Ÿæ˜¯ä¸€ä¸ªæƒè¡¡çš„é—®é¢˜ï¼šç»è¿‡æ²™ç›’å±è”½çš„é¡µé¢ä¸èƒ½ä½¿ç”¨ chrome.*
APIã€‚å¦‚æœæ‚¨éœ€è¦åšä¸€äº›ç±»ä¼¼äº <code>eval()</code>
çš„äº‹æƒ…ï¼Œè¯·ä½¿ç”¨è¿™ç§æ–¹æ³•å…å—
CSPï¼ˆå†…å®¹å®‰å…¨ç­–ç•¥ï¼‰çš„é™åˆ¶ï¼Œä½†æ˜¯æ‚¨ä¹Ÿä¸èƒ½ä½¿ç”¨ä¸€äº›å¾ˆæ£’çš„æ–°åŠŸèƒ½ã€‚
</p>

<h3 id="inline_scripts"><!--@Use inline scripts in sandbox-->åœ¨æ²™ç›’ä¸­ä½¿ç”¨å†…åµŒè„šæœ¬</h3>

<p>
<!--@Here's a sample sandboxed page
which uses an inline script and <code>eval()</code>:-->
å¦‚ä¸‹æ˜¯ä¸€ä¸ªç»è¿‡æ²™ç›’å±è”½çš„é¡µé¢ç¤ºä¾‹ï¼Œä½¿ç”¨äº†å†…åµŒè„šæœ¬ä¸
<code>eval()</code>ï¼š
</p>

<pre data-filename="sandboxed.html">
&lt;html&gt;
  &lt;body&gt;
    &lt;h1&gt;Woot&lt;/h1&gt;
    &lt;script&gt;
      document.write('è¿™æ˜¯å†…åµŒè„šæœ¬ã€‚&lt;br&gt;');
      eval('document.write(\'è¿™æ˜¯ä½¿ç”¨äº† eval çš„å†…åµŒè„šæœ¬ã€‚\');');
    &lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;
</pre>

<h3 id="include_sandbox"><!--@Include sandbox in manifest-->åœ¨æ¸…å•æ–‡ä»¶ä¸­åŒ…å« sandbox</h3>

<p>
<!--@You need to include the <code>sandbox</code> field in the manifest
and list the app pages to be served in a sandbox:-->
æ‚¨éœ€è¦åœ¨æ¸…å•æ–‡ä»¶ä¸­åŒ…å« <code>sandbox</code>
å­—æ®µï¼Œå¹¶åˆ—å‡ºéœ€è¦åœ¨æ²™ç›’ä¸­è¿è¡Œçš„åº”ç”¨é¡µé¢ï¼š
</p>

<pre data-filename="manifest.json">
"sandbox": {
  "pages": ["sandboxed.html"]
}
</pre>

<h3 id="opening_sandbox"><!--@Opening a sandboxed page in a window-->åœ¨çª—å£ä¸­æ‰“å¼€ç»è¿‡æ²™ç›’å±è”½çš„é¡µé¢</h3>

<p>
<!--@Just like any other app pages,
you can create a window that the sandboxed page opens in.
Here's a sample that creates two windows,
one for the main app window that isn't sandboxed,
and one for the sandboxed page:-->
å°±åƒå…¶ä»–åº”ç”¨é¡µé¢ä¸€æ ·ï¼Œæ‚¨å¯ä»¥åˆ›å»ºä¸€ä¸ªçª—å£ï¼Œæ‰“å¼€ç»è¿‡æ²™ç›’å±è”½çš„é¡µé¢ã€‚å¦‚ä¸‹æ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼Œå®ƒåˆ›å»ºäº†ä¸¤ä¸ªçª—å£ï¼Œä¸€ä¸ªç”¨äºåº”ç”¨ä¸»çª—å£ï¼Œä¸ç»è¿‡æ²™ç›’å±è”½ï¼Œå¦ä¸€ä¸ªç”¨äºç»è¿‡æ²™æ²³å±è”½çš„é¡µé¢ï¼š
</p>

<p class="warning">
<!--@NOTE:
-->æ³¨æ„ï¼šä½¿ç”¨ç»è¿‡æ²™ç›’å±è”½çš„é¡µé¢åˆ›å»ºçª—å£æ—¶ä¼šé‡åˆ°<a href="https://code.google.com/p/chromium/issues/detail?id=154662"><!--@issue-->é—®é¢˜ 154662</a><!--@
is a bug when using sandbox pages to create windows.
The effect is that an error "Uncaught TypeError: Cannot call method
'initializeAppWindow' of undefined" is output to the developer console
and that the app.window.create call does not call the callback function
with a window object. However, the sandbox page is created as a new window.-->ï¼Œå¼€å‘è€…æ§åˆ¶å°ä¸­ä¼šè¾“å‡ºé”™è¯¯â€œUncaught
TypeError: Cannot call method 'initializeAppWindow' of
undefinedâ€ï¼Œè€Œä¸” app.window.create
ä¸ä¼šè°ƒç”¨å›è°ƒå‡½æ•°ï¼Œå¹¶ä¼ é€’çª—å£å¯¹è±¡ã€‚ä½†è¿˜æ˜¯ä¼šåˆ›å»ºæ–°çª—å£ï¼Œæ‰“å¼€ç»è¿‡æ²™ç›’å±è”½çš„é¡µé¢ã€‚
</p>

<pre data-filename="background.js">
chrome.app.runtime.onLaunched.addListener(function() {
  chrome.app.window.create('window.html', {
    'bounds': {
      'width': 400,
      'height': 400,
      'left': 0,
      'top': 0
    }
  });

  chrome.app.window.create('sandboxed.html', {
    'bounds': {
      'width': 400,
      'height': 400,
      'left': 400,
      'top': 0
    }
  });
});
</pre>

<h3 id="embedding_sandbox"><!--@Embedding a sandboxed page in an app page-->åœ¨åº”ç”¨é¡µé¢ä¸­åµŒå…¥ç»è¿‡æ²™ç›’å±è”½çš„é¡µé¢</h3>

<p><!--@Sandboxed pages can also be embedded within another app page
  using an <code>iframe</code>:-->
  ç»è¿‡æ²™ç›’å±è”½çš„é¡µé¢ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>iframe</code> åµŒå…¥è‡³å¦ä¸€ä¸ªåº”ç”¨é¡µé¢ï¼š
</p>

<pre data-filename="window.html">
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
&lt;/head&gt;
  &lt;body&gt;
    &lt;p&gt;I am normal app window.&lt;/p&gt;

    &lt;iframe src="sandboxed.html" width="300" height="200"&gt;&lt;/iframe&gt;
  &lt;/body&gt;
&lt;/html&gt;
</pre>


<h2 id="postMessage"><!--@Sending messages to sandboxed pages-->å‘ç»è¿‡æ²™ç›’å±è”½çš„é¡µé¢å‘é€æ¶ˆæ¯</h2>

<p>
<!--@There are two parts to sending a message:
you need to post a message from the sender page/window,
and listen for messages on the receiving page/window.-->
å‘é€æ¶ˆæ¯éœ€è¦ä¸¤æ–¹é¢åŒæ—¶è¿›è¡Œï¼šæ‚¨éœ€è¦ä»å‘é€è€…é¡µé¢/çª—å£æŠ•é€’æ¶ˆæ¯ï¼Œå¹¶åœ¨æ¥æ”¶ç«¯é¡µé¢/çª—å£ç›‘å¬æ¶ˆæ¯ã€‚
</p>

<h3 id="post_message"><!--@Post message-->æŠ•é€’æ¶ˆæ¯</h3>

<p>
<!--@You can use <code>postMessage</code> to communicate
between your app and sandboxed content.
Here's a sample background script
that posts a message to the sandboxed page it
opens:-->
æ‚¨å¯ä»¥ä½¿ç”¨ <code>postMessage</code>
åœ¨æ‚¨çš„åº”ç”¨ä¸ç»è¿‡æ²™ç›’å±è”½çš„å†…å®¹é—´é€šä¿¡ã€‚å¦‚ä¸‹æ˜¯ä¸€ä¸ªåå°è„šæœ¬çš„ç¤ºä¾‹ï¼Œå‘å®ƒæ‰“å¼€çš„ç»è¿‡æ²™ç›’å±è”½çš„é¡µé¢å‘é€æ¶ˆæ¯ï¼š
</p>

<pre data-filename="background.js">
var myWin = null;

chrome.app.runtime.onLaunched.addListener(function() {
  chrome.app.window.create('sandboxed.html', {
    'bounds': {
      'width': 400,
      'height': 400
    }
  }, function(win) {
       myWin = win;
       myWin.contentWindow.postMessage('åªæ˜¯æ‰“ä¸ªæ‹›å‘¼ã€‚', '*');
     });
});
</pre>

<p>
<!--@Generally speaking on the web,
you want to specify the exact origin
from where the message is sent.
Chrome Apps have no access
to the unique origin of sandboxed content,
so you can only whitelist all origins
as acceptable origins ('*').
On the receiving end,
you generally want to check the origin;
but since Chrome Apps content is contained,
it isn't necessary.
To find out more,
see-->
ä¸€èˆ¬ä»ç½‘é¡µçš„è§’åº¦æ¥è¯´ï¼Œæ‚¨å¸Œæœ›æŒ‡å®šæ¶ˆæ¯å‘é€æ–¹çš„å‡†ç¡®æ¥æºã€‚Chrome
åº”ç”¨æ— æ³•è®¿é—®ç»è¿‡æ²™ç›’å±è”½çš„å†…å®¹çš„å”¯ä¸€æ¥æºï¼Œæ‰€ä»¥æ‚¨åªèƒ½å°†æ‰€æœ‰æ¥æºæ·»åŠ åˆ°å¯æ¥å—æ¥æºçš„ç™½åå•ä¸­ï¼ˆ'*'ï¼‰ã€‚åœ¨æ¥æ”¶ç«¯ï¼Œæ‚¨é€šå¸¸å¸Œæœ›æ£€æŸ¥æ¥æºï¼Œä½†æ˜¯ç”±äº
Chrome åº”ç”¨çš„å†…å®¹æ˜¯å—é™çš„ï¼Œè¿™æ²¡æœ‰å¿…è¦ã€‚è¦æƒ³äº†è§£æ›´å¤šå†…å®¹ï¼Œè¯·å‚è§
<a href="https://developer.mozilla.org/en/DOM/window.postMessage">window.postMessage</a><!--@.-->ã€‚
</p>

<h3 id="listen_message"><!--@Listen for message-->ç›‘å¬æ¶ˆæ¯</h3>

<p>
<!--@Here's a sample message receiver
that gets added to your sandboxed page:-->
å¦‚ä¸‹æ˜¯æ¶ˆæ¯æ¥æ”¶ç«¯çš„ç¤ºä¾‹ï¼Œå¯ä»¥æ·»åŠ åˆ°ç»è¿‡æ²™ç›’å±è”½çš„é¡µé¢ä¸­å»ï¼š
</p>

<pre data-filename="sandboxed.html">
var messageHandler = function(e) {
  console.log('åå°è„šæœ¬æ‰“äº†ä¸ªæ‹›å‘¼ã€‚', e.data);
};

window.addEventListener('message', messageHandler);
</pre>
      </div>
    </div>
  </body>

  <div id="gc-footer">
    <button class="google-button" id="scroll-to-top">â†‘</button>
    <button class="google-button" id="send-feedback" style="display:none">Send Feedback</button>
    <div class="text">
      <p>
        <!--@Except as otherwise <a href="http://code.google.com/policies.html#restrictions">noted</a>,
        the content of this page is licensed under the <a rel="license" href="http://creativecommons.org/licenses/by/3.0/">Creative Commons
        Attribution 3.0 License</a>, and code samples are licensed under the
        <a rel="license" href="http://code.google.com/google_bsd_license.html">BSD License</a>.-->
        è¯¥é¡µé¢ç¿»è¯‘è‡ª
        <a href="https://developer.chrome.com/extensions/">Google Chrome Extensions</a>
        ä¸
        <a href="https://developer.chrome.com/apps/">Google Chrome Apps</a>ã€‚é™¤éç‰¹åˆ«<a href="https://code.google.com/policies.html#restrictions">è¯´æ˜</a>ï¼Œè¯¥é¡µé¢çš„å†…å®¹éµå¾ª
        <a rel="license" href="http://creativecommons.org/licenses/by/3.0/">Creative Commons Attribution 3.0
        License</a>ï¼Œä»£ç ç¤ºä¾‹éµå¾ª
        <a rel="license" href="http://code.google.com/google_bsd_license.html">BSD License</a>ã€‚
      </p>
      <p class="crxdoczh-footer">
        <a href="https://code.google.com/p/crxdoczh/">crxdoczh é¡¹ç›®ä¸»é¡µ</a>
        <a href="https://code.google.com/p/crxdoczh/issues/entry?template=%E7%BD%91%E7%AB%99%E5%8F%8D%E9%A6%88">å‘é€åé¦ˆ</a>
        <a href="" rel="publisher">
          Google+ é¡µé¢
        </a>
        <a href="https://plus.google.com/communities/105384952265487436177">Google+ ç¤¾ç¾¤</a>
      </p>
      <script src="../../developer.chrome.com/static/js/platform_chooser.js" type="text/javascript"></script>
      <script src="../../developer.chrome.com/static/js/popup.js" type="text/javascript"></script>
      <script src="../../developer.chrome.com/static/js/prettify.js" type="text/javascript"></script>
      <script src="../../developer.chrome.com/static/js/scroll.js" type="text/javascript"></script>
      <script src="../../developer.chrome.com/static/js/sidebar.js" type="text/javascript"></script>
      <script src="../../developer.chrome.com/static/js/tabs.js" type="text/javascript"></script>
      <script>
        (function() {
          // Auto syntax highlight all pre tags.
          var preElements = document.getElementsByTagName('pre');
          for (var i = 0; i < preElements.length; i++) {
            var preElement = preElements[i];
            preElement.classList.add('prettyprint');
            var datasetFilename = preElement.getAttribute('data-filename');
            if (datasetFilename) {
              var filename = document.createElement('div');
              filename.className = 'filename nocode';
              filename.textContent = datasetFilename;
              preElement.insertBefore(filename, preElement.firstChild);
            }
          }
          prettyPrint();
        })();

        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-25062424-1']);
        _gaq.push(['_trackPageview']);

        (function() {
          var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
          ga.src = 'https://ssl.google-analytics.com/ga.js';
          var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();

        window.___gcfg = {
      Â  Â  lang: 'zh-CN'
      Â  };
      Â  (function() {
      Â  Â  var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
      Â  Â  po.src = 'https://apis.google.com/js/plusone.js';
      Â  Â  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
      Â  })();
      </script>
    </div>
  </div>
</html>
