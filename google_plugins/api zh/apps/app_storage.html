<!DOCTYPE html>
<html>
  <head>
    <title>å­˜å‚¨ API - Google Chrome åº”ç”¨å¼€å‘æ–‡æ¡£ï¼ˆéå®˜æ–¹ä¸­æ–‡ç‰ˆï¼‰</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link href="../static/css/site.css" rel="stylesheet" type="text/css">
    <link href="../../developer.chrome.com/static/css/print.css" rel="stylesheet" type="text/css" media="print">
    <link href="../../developer.chrome.com/static/css/prettify.css" rel="stylesheet" type="text/css">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
  </head>

  <body>


<!-- Copyright © 2005. Spidersoft Ltd -->
<style>
A.applink:hover {border: 2px dotted #DCE6F4;padding:2px;background-color:#ffff00;color:green;text-decoration:none}
A.applink       {border: 2px dotted #DCE6F4;padding:2px;color:#2F5BFF;background:transparent;text-decoration:none}
A.info          {color:#2F5BFF;background:transparent;text-decoration:none}
A.info:hover    {color:green;background:transparent;text-decoration:underline}
</style>
<div style='BORDER: 1px solid #DCE6F4; MARGIN-TOP: 20px; MARGIN-BOTTOM: 20px; MARGIN-LEFT: 5px; MARGIN-RIGHT: 5px; PADDING: 5px; BACKGROUND-COLOR: #eef8ff;line-height:180%; COLOR: #000000; font-family: Arial; font-size: 8pt; width=100%; FILTER: progid:DXImageTransform.Microsoft.Gradient(GradientType=0, StartColorStr="#FFFFFFFF", EndColorStr="#F2F5FAFF");'>
This page was saved using <a class="applink" href="http://www.spidersoft.com"><b>WebZIP 7.0.3.1030</b></a> <a class="applink" href="http://www.spidersoft.com"><b>offline browser</b></a>  on  12/24/13 11:31:37.<br>
<b>Address:</b> <a class="info" href="https://crxdoc-zh.appspot.com/apps/app_storage.html">https://crxdoc-zh.appspot.com/apps/app_storage.html</a><br>
<b>Title:</b> å­˜å‚¨ API - Google Chrome åº”ç”¨å¼€å‘æ–‡æ¡£ï¼ˆéå®˜æ–¹ä¸­æ–‡ç‰ˆï¼‰ &nbsp;&bull;&nbsp; <b>Size:</b> 42792<br></div>
<!-- /Copyright © 2005. Spidersoft Ltd -->


    <div id="gc-topnav">
      <table><tr>
      <td id="chrome-logo">
        <a href="apps.html" title="Google Chrome åº”ç”¨" id="view-original">
          <img src="../../developer.chrome.com/static/images/chrome-logo.png" alt=""> chrome
        </a>
        <script type="text/javascript">
          document.getElementById('view-original').href = "https://developer.chrome.com" + location.pathname;
        </script>
        <div id="platform-chooser">
          <button id="platform-chooser-toggle" data-menu="platform-chooser-popup">
            åº”ç”¨ &#x25be;&#x202F;
          </button>
          <div id="platform-chooser-popup">
            <button class="apps" data-href="/apps/about_apps.html"><!--@apps-->åº”ç”¨</button>
            <button class="extensions" data-href="/extensions"><!--@extensions-->æ‰©å±•ç¨‹åº</button>
          </div>
        </div>ï¼ˆéå®˜æ–¹ä¸­æ–‡ç‰ˆï¼‰
      </td>
      <td>
        <ul>
          <li>
            <a href="samples.html"
               title="ç¤ºä¾‹ åº”ç”¨ï¼ˆåŒ…å«æºä»£ç ï¼‰"><!--@Samples-->ç¤ºä¾‹</a>
          </li>
          <li>
            <a href="http://groups.google.com/a/chromium.org/group/chromium-apps"
               title="Google Chrome åº”ç”¨å¼€å‘è€…è®ºå›"
               target="_blank"><!--@Group-->è®ºå›ï¼ˆè‹±æ–‡ï¼‰</a>
          </li>
          <li>
            <a href="http://stackoverflow.com/tags/google-chrome-app/info"
               title="Stack Overflow ä¸Šçš„ [google-chrome-app] æ ‡ç­¾"
               target="_blank">Stack overflow</a>
          </li>
        </ul>
      </td>
      </tr></table>
    </div>
    <div id="gc-topnav-space"></div>
    <div id="gc-container">
      <div id="gc-sidebar">
        <g:plusone></g:plusone>
        <ul 
            class="level1 ">
        <li class="level2">
              <span class="level2">å‘ç°</span>
          <ul 
              class="level2 ">
          <li class="level3">
                <a href="about_apps.html" class="level3 ">ä»€ä¹ˆæ˜¯ Chrome åº”ç”¨ï¼Ÿ</a>
          </li>
          </ul>
        </li><li class="level2">
              <span class="level2">å¼€å‘</span>
          <ul 
              class="level2 ">
          <li class="level3">
                <a href="first_app.html" class="level3 ">åˆ›å»ºæ‚¨çš„ç¬¬ä¸€ä¸ªåº”ç”¨</a>
          </li><li class="level3">
              <a class="button level3">
                <span class="level3">æ•™ç¨‹</span>
                <div class="toggleIndicator level3"></div>
              </a>
            <ul toggleable
                class="level3 hidden">
            <li class="level4">
                <a class="button level4">
                  <span class="level4">é€šè¿‡ä»£ç å®éªŒå®¤å­¦ä¹ </span>
                  <div class="toggleIndicator level4"></div>
                </a>
              <ul toggleable
                  class="level4 hidden">
              <li class="level5">
                    <a href="app_codelab.html" class="level5 ">å…³äºä»£ç å®éªŒå®¤</a>
              </li><li class="level5">
                    <a href="app_codelab1_setup.html" class="level5 ">1ã€è®¾ç½®å¼€å‘ç¯å¢ƒ</a>
              </li><li class="level5">
                    <a href="app_codelab2_basic.html" class="level5 ">2ã€åˆ›å»ºåŸºæœ¬çš„åº”ç”¨</a>
              </li><li class="level5">
                    <a href="app_codelab3_mvc.html" class="level5 ">3ã€åˆ›å»º MVC</a>
              </li><li class="level5">
                    <a href="app_codelab5_data.html" class="level5 ">4ã€ä¿å­˜å’Œè·å–æ•°æ®</a>
              </li><li class="level5">
                    <a href="app_codelab6_lifecycle.html" class="level5 ">5ã€ç®¡ç†åº”ç”¨çš„ç”Ÿå‘½å‘¨æœŸ</a>
              </li><li class="level5">
                    <a href="app_codelab7_useridentification.html" class="level5 ">6ã€è®¿é—®ç”¨æˆ·æ•°æ®</a>
              </li><li class="level5">
                    <a href="app_codelab8_webresources.html" class="level5 ">7ã€è®¿é—®ç½‘ç»œèµ„æº</a>
              </li><li class="level5">
                    <a href="app_codelab_10_publishing.html" class="level5 ">8ã€å‘å¸ƒåº”ç”¨</a>
              </li>
              </ul>
            </li><li class="level4">
                <a class="button level4">
                  <span class="level4">MVC æ¶æ„ä¸æ¡†æ¶</span>
                  <div class="toggleIndicator level4"></div>
                </a>
              <ul toggleable
                  class="level4 hidden">
              <li class="level5">
                    <a href="app_frameworks.html" class="level5 ">å…³äº MVC æ¶æ„</a>
              </li><li class="level5">
                    <a href="angular_framework.html" class="level5 ">ç”¨ AngularJS å»ºç«‹åº”ç”¨</a>
              </li><li class="level5">
                    <a href="sencha_framework.html" class="level5 ">ç”¨ Sencha Ext JS å»ºç«‹åº”ç”¨</a>
              </li>
              </ul>
            </li>
            </ul>
          </li><li class="level3">
              <a class="button level3">
                <span class="level3">Chrome åº”ç”¨çš„æ¦‚å¿µ</span>
                <div class="toggleIndicator level3 toggled"></div>
              </a>
            <ul toggleable
                class="level3 ">
            <li class="level4">
                <a class="button level4">
                  <span class="level4">åŸºç¡€çŸ¥è¯†</span>
                  <div class="toggleIndicator level4"></div>
                </a>
              <ul toggleable
                  class="level4 hidden">
              <li class="level5">
                    <a href="app_architecture.html" class="level5 ">åº”ç”¨çš„æ¶æ„</a>
              </li><li class="level5">
                    <a href="app_lifecycle.html" class="level5 ">åº”ç”¨çš„ç”Ÿå‘½å‘¨æœŸ</a>
              </li><li class="level5">
                    <a href="offline_apps.html" class="level5 ">é¦–å…ˆè€ƒè™‘ç¦»çº¿</a>
              </li><li class="level5">
                    <a href="app_external.html" class="level5 ">å¤–éƒ¨å†…å®¹</a>
              </li>
              </ul>
            </li><li class="level4">
                <a class="button level4">
                  <span class="level4">å®‰å…¨æ€§</span>
                  <div class="toggleIndicator level4"></div>
                </a>
              <ul toggleable
                  class="level4 hidden">
              <li class="level5">
                    <a href="contentSecurityPolicy.html" class="level5 ">å†…å®¹å®‰å…¨ç­–ç•¥</a>
              </li>
              </ul>
            </li><li class="level4">
                <a class="button level4">
                  <span class="level4">å°†æ‚¨çš„åº”ç”¨ä¸äº‘ç«¯ç»“åˆ</span>
                  <div class="toggleIndicator level4"></div>
                </a>
              <ul toggleable
                  class="level4 hidden">
              <li class="level5">
                  <a class="button level5">
                    <span class="level5">äº‘æ¶ˆæ¯æœåŠ¡</span>
                    <div class="toggleIndicator level5"></div>
                  </a>
                <ul toggleable
                    class="level5 hidden">
                <li class="level6">
                      <a href="cloudMessaging.html" class="level6 ">å…³äºäº‘æ¶ˆæ¯æœåŠ¡</a>
                </li><li class="level6">
                      <a href="pushMessaging.html" class="level6 ">å®¢æˆ·ç«¯å‚è€ƒ</a>
                </li><li class="level6">
                      <a href="gcm_server.html" class="level6 ">æœåŠ¡å‚è€ƒ</a>
                </li><li class="level6">
                      <a href="gcm_tos.html" class="level6 ">æœåŠ¡æ¡æ¬¾</a>
                </li>
                </ul>
              </li><li class="level5">
                  <a class="button level5">
                    <span class="level5">äº‘å­˜å‚¨æœåŠ¡</span>
                    <div class="toggleIndicator level5"></div>
                  </a>
                <ul toggleable
                    class="level5 hidden">
                <li class="level6">
                      <a href="storage.html" class="level6 ">chrome.storage</a>
                </li>
                </ul>
              </li><li class="level5">
                    <a href="app_identity.html" class="level5 ">ç”¨æˆ·è®¤è¯</a>
              </li>
              </ul>
            </li><li class="level4">
                <a class="button level4">
                  <span class="level4">å­˜å‚¨ä¸è·å–æ•°æ®</span>
                  <div class="toggleIndicator level4 toggled"></div>
                </a>
              <ul toggleable
                  class="level4 ">
              <li class="level5">
                    <a  class="level5 selected">å­˜å‚¨ API</a>
              </li>
              </ul>
            </li><li class="level4">
                <a class="button level4">
                  <span class="level4">ä½¿ç”¨ä½çº§ç³»ç»ŸæœåŠ¡</span>
                  <div class="toggleIndicator level4"></div>
                </a>
              <ul toggleable
                  class="level4 hidden">
              <li class="level5">
                    <a href="app_usb.html" class="level5 ">USB</a>
              </li><li class="level5">
                    <a href="app_serial.html" class="level5 ">ä¸²è¡Œç«¯å£</a>
              </li><li class="level5">
                    <a href="app_network.html" class="level5 ">ç½‘ç»œé€šä¿¡</a>
              </li>
              </ul>
            </li><li class="level4">
                <a class="button level4">
                  <span class="level4">ä¸ä¸»æœºå¹³å°äº¤äº’</span>
                  <div class="toggleIndicator level4"></div>
                </a>
              <ul toggleable
                  class="level4 hidden">
              <li class="level5">
                    <a href="desktop_notifications.html" class="level5 ">ä¸°å¯Œçš„é€šçŸ¥</a>
              </li>
              </ul>
            </li>
            </ul>
          </li>
          </ul>
        </li><li class="level2">
              <span class="level2">å‘å¸ƒ</span>
          <ul 
              class="level2 ">
          <li class="level3">
                <a href="publish_app.html" class="level3 ">å‘å¸ƒæ‚¨çš„åº”ç”¨</a>
          </li><li class="level3">
              <a class="button level3">
                <span class="level3">é€šè¿‡æ‚¨çš„åº”ç”¨è·åˆ©</span>
                <div class="toggleIndicator level3"></div>
              </a>
            <ul toggleable
                class="level3 hidden">
            <li class="level4">
                  <a href="google_wallet.html" class="level4 ">ç”¨äºæ•°å­—å•†å“çš„ Google ç”µå­é’±åŒ…</a>
            </li>
            </ul>
          </li><li class="level3">
                <a href="analytics.html" class="level3 ">Analyticsï¼ˆåˆ†æï¼‰</a>
          </li>
          </ul>
        </li><li class="level2">
              <span class="level2">å‚è€ƒ</span>
          <ul 
              class="level2 ">
          <li class="level3">
                <a href="api_index.html" class="level3 ">Chrome å¹³å° API</a>
          </li><li class="level3">
                <a href="tags/webview.html" class="level3 ">Webview æ ‡ç­¾</a>
          </li><li class="level3">
                <a href="api_other.html" class="level3 ">ç½‘é¡µ API</a>
          </li><li class="level3">
                <a href="manifest.html" class="level3 ">æ¸…å•æ–‡ä»¶æ ¼å¼</a>
          </li><li class="level3">
                <a href="app_deprecated.html" class="level3 ">ç¦ç”¨çš„ç½‘é¡µç‰¹æ€§</a>
          </li>
          </ul>
        </li><li class="level2">
              <span class="level2">ç¤ºä¾‹</span>
          <ul 
              class="level2 ">
          <li class="level3">
                <a href="samples.html" class="level3 ">ç¤ºä¾‹åº”ç”¨</a>
          </li>
          </ul>
        </li><li class="level2">
              <span class="level2">å¸®åŠ©</span>
          <ul 
              class="level2 ">
          <li class="level3">
                <a href="faq.html" class="level3 ">å¸¸è§é—®é¢˜</a>
          </li><li class="level3">
                <a href="https://groups.google.com/a/chromium.org/forum/#!forum/chromium-apps" class="level3 ">Google ç½‘ä¸Šè®ºå›</a>
          </li><li class="level3">
                <a href="http://stackoverflow.com/questions/tagged/google-chrome-app" class="level3 ">Stack Overflow</a>
          </li>
          </ul>
        </li>
        </ul>
      </div>
      <div id="gc-pagecontent">

<div id="toc">
  <ol>
    <li >
      <a href="#options"
         data-list-item
         >å­˜å‚¨çš„é€‰æ‹©</a>
    </li>
    <li >
      <a href="#filesystem"
         data-list-item
         >ä½¿ç”¨ Chrome æµè§ˆå™¨çš„æ–‡ä»¶ç³»ç»Ÿ API</a>
      <ol>
        <li >
          <a href="#filesystem-manifest"
             data-list-item
             >æ·»åŠ æ–‡ä»¶ç³»ç»Ÿæƒé™</a>
        </li>
        <li >
          <a href="#import"
             data-list-item
             >é€‰æ‹©æ–‡ä»¶çš„ç”¨æˆ·é€‰é¡¹</a>
        </li>
        <li >
          <a href="#path"
             data-list-item
             >è·å–æ–‡ä»¶é¡¹ï¼ˆfileEntryï¼‰çš„è·¯å¾„</a>
        </li>
        <li >
          <a href="#drag"
             data-list-item
             >å®ç°æ‹–æ”¾æ”¯æŒ</a>
        </li>
        <li >
          <a href="#read"
             data-list-item
             >è¯»å–æ–‡ä»¶</a>
        </li>
        <li >
          <a href="#write"
             data-list-item
             >å†™å…¥æ–‡ä»¶</a>
        </li>
      </ol>
    </li>
    <li >
      <a href="#sync-filesystem"
         data-list-item
         >ä½¿ç”¨Chrome æµè§ˆå™¨çš„åŒæ­¥æ–‡ä»¶ç³»ç»Ÿ API</a>
      <ol>
        <li >
          <a href="#sync-manifest"
             data-list-item
             >æ·»åŠ åŒæ­¥æ–‡ä»¶ç³»ç»Ÿæƒé™</a>
        </li>
        <li >
          <a href="#initiate"
             data-list-item
             >è¯·æ±‚åŒæ­¥æ–‡ä»¶å­˜å‚¨</a>
        </li>
        <li >
          <a href="#file-status"
             data-list-item
             >å…³äºæ–‡ä»¶åŒæ­¥çŠ¶æ€</a>
        </li>
        <li >
          <a href="#file-status"
             data-list-item
             >ç›‘å¬åŒæ­¥çŠ¶æ€çš„æ›´æ”¹</a>
        </li>
        <li >
          <a href="#check-usage"
             data-list-item
             >æ£€æŸ¥ API ç”¨é‡</a>
        </li>
      </ol>
    </li>
  </ol>
</div>

<h1><!--@Storage APIs-->å­˜å‚¨ API</h1>

<p>
<!--@Almost every aspect of app development involves some element
of sending or receiving data.
Starting with the basics,
you should use an MVC framework to help you design and implement your app
so that data is completely separate from the app's view on that data
(see <a href="app_frameworks.html">MVC Architecture</a>).-->
å‡ ä¹åº”ç”¨å¼€å‘çš„æ¯ä¸€æ–¹é¢éƒ½ä¼šæ¶‰åŠåˆ°ä¸€äº›æ•°æ®çš„å‘é€ä¸æ¥æ”¶ã€‚ä»æœ€åŸºæœ¬çš„å¼€å§‹ï¼Œæ‚¨åº”è¯¥ä½¿ç”¨
MVC æ¡†æ¶æ¥å¸®åŠ©æ‚¨è®¾è®¡å’Œå®ç°æ‚¨çš„åº”ç”¨ï¼Œä»¥ä¾¿ä½¿æ•°æ®å®Œå…¨ä¸åº”ç”¨çš„æ•°æ®è§†å›¾åˆ†ç¦»ï¼ˆå‚è§
<a href="app_frameworks.html">MVC æ¶æ„</a>ï¼‰ã€‚
</p>

<p>
<!--@You also need to think about how data is handled when your app is offline
(see <a href="offline_apps.html">Offline First</a>).
This doc briefly introduces the storage options
for sending, receiving, and saving data locally;
the remainder of the doc shows you how
to use Chrome's File System and Sync File System APIs
(see also <a href="fileSystem.html">fileSystem API</a> and
<a href="https://crxdoc-zh.appspot.com/apps/syncFileSystem.html">syncFileSystem API</a>).-->
æ‚¨è¿˜éœ€è¦è€ƒè™‘å½“æ‚¨çš„åº”ç”¨ç¦»çº¿æ—¶ï¼ˆå‚è§<a href="offline_apps.html"
>é¦–å…ˆè€ƒè™‘ç¦»çº¿</a>ï¼‰å¦‚ä½•å¤„ç†æ•°æ®ã€‚è¯¥æ–‡æ¡£ç®€è¦åœ°ä»‹ç»äº†ç”¨äºåœ¨æœ¬åœ°å‘é€ã€æ¥æ”¶å’Œä¿å­˜æ•°æ®çš„å­˜å‚¨é€‰æ‹©ï¼Œæ–‡æ¡£çš„å‰©ä¸‹éƒ¨åˆ†å‘æ‚¨æ¼”ç¤ºäº†å¦‚ä½•ä½¿ç”¨
Chrome æµè§ˆå™¨çš„æ–‡ä»¶ç³»ç»Ÿ API å’ŒåŒæ­¥æ–‡ä»¶ç³»ç»Ÿ
APIï¼ˆè¯·å‚è§<a href="fileSystem.html">æ–‡ä»¶ç³»ç»Ÿ
API</a> å’Œ<a href="https://crxdoc-zh.appspot.com/apps/syncFileSystem.html">åŒæ­¥æ–‡ä»¶ç³»ç»Ÿ API</a>ï¼‰ã€‚
</p>

<p class="note">
<b>API <!--@Samples: -->ç¤ºä¾‹ï¼š</b><!--@
Want to play with the code?
Check out the-->
æƒ³è¯•è¯•è¿™äº›ä»£ç å—ï¼Ÿè¯·å‚è§
<a href="https://github.com/GoogleChrome/chrome-app-samples/tree/master/filesystem-access">filesystem-access</a><!--@,
-->ã€<a href="https://github.com/GoogleChrome/chrome-app-samples/tree/master/syncfs-editor">syncfs-editor</a>
<!--@and-->å’Œ <a href="https://github.com/GoogleChrome/chrome-app-samples/tree/master/storage">storage</a> <!--@samples.-->
ç¤ºä¾‹ã€‚
</p>

<h2 id="options"><!--@Storage options-->å­˜å‚¨çš„é€‰æ‹©</h2>

<p>
<!--@Packaged apps use many different mechanisms
to send and receive data.
For external data (resources, web pages),
you need to be aware of the
<a href="contentSecurityPolicy.html">Content Security Policy (CSP)</a>.
Similar to Chrome Extensions,
you can use
<a href="https://crxdoc-zh.appspot.com/apps/app_external.html#external">cross-origin XMLHttpRequests</a>
to communicate with remote servers.
You can also isolate external pages,
so that the rest of your app is secure
(see <a href="https://crxdoc-zh.appspot.com/apps/app_external.html#webview">Embed external web pages</a>).-->
Chrome åº”ç”¨å¯ä»¥ä½¿ç”¨å¾ˆå¤šä¸åŒçš„æœºåˆ¶å‘é€å’Œæ¥æ”¶æ•°æ®ã€‚å¯¹äºå¤–éƒ¨æ•°æ®ï¼ˆèµ„æºã€ç½‘é¡µï¼‰ï¼Œæ‚¨éœ€è¦æ„è¯†åˆ°<a
href="contentSecurityPolicy.html">å†…å®¹å®‰å…¨ç­–ç•¥ï¼ˆCSPï¼‰</a>çš„å­˜åœ¨ã€‚ä¸
Chrome æ‰©å±•ç¨‹åºç±»ä¼¼ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨<a href="https://crxdoc-zh.appspot.com/apps/app_external.html#external">è·¨ç«™
XMLHttpRequest</a> ä¸è¿œç¨‹æœåŠ¡å™¨é€šä¿¡ã€‚æ‚¨è¿˜å¯ä»¥éš”ç¦»å¤–éƒ¨é¡µé¢ï¼Œä»¥ç¡®ä¿æ‚¨çš„åº”ç”¨çš„å…¶ä»–éƒ¨åˆ†æ˜¯å®‰å…¨çš„ï¼ˆå‚è§<a
href="https://crxdoc-zh.appspot.com/apps/app_external.html#webview">åµŒå…¥å¤–éƒ¨ç½‘é¡µ</a>ï¼‰ã€‚
</p>

<p>
<!--@When saving data locally,
you can use the <a href="storage.html">Chrome Storage API</a>
to save small amounts of string data and
IndexedDB to save structured data.
With IndexedDB, you can persist JavaScript objects
to an object store and use the store's indexes to query data
(to learn more, see HTML5 Rock's
<a href="http://www.html5rocks.com/tutorials/indexeddb/todo/">Simple Todo List Tutorial</a>).
For all other types of data,
like binary data,
use the Filesystem and Sync Filesystem APIs.-->
éœ€è¦åœ¨æœ¬åœ°ä¿å­˜æ•°æ®æ—¶ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨
<a href="storage.html">Chrome æµè§ˆå™¨çš„å­˜å‚¨ API</a>
æ¥ä¿å­˜å°‘é‡å­—ç¬¦ä¸²æ•°æ®ï¼Œå¹¶ä½¿ç”¨ IndexedDB
ä¿å­˜ç»“æ„åŒ–çš„æ•°æ®ã€‚é€šè¿‡ IndexedDBï¼Œæ‚¨å¯ä»¥å°† JavaScript
å¯¹è±¡æŒä¹…å­˜å‚¨åœ¨å¯¹è±¡å­˜å‚¨åŒºä¸­å¹¶ä½¿ç”¨å­˜å‚¨åŒºçš„ç´¢å¼•æŸ¥è¯¢æ•°æ®ï¼ˆè¦äº†è§£æ›´å¤šå†…å®¹ï¼Œè¯·å‚è§
<a href="http://www.html5rocks.com/zh/tutorials/indexeddb/todo/">HTML5
Rocks çš„å¾…åŠäº‹é¡¹ç®€è¦åˆ—è¡¨æ•™ç¨‹</a>ï¼‰ã€‚å¯¹äºæ‰€æœ‰å…¶ä»–ç±»å‹çš„æ•°æ®ï¼Œä¾‹å¦‚äºŒè¿›åˆ¶æ•°æ®ï¼Œè¯·ä½¿ç”¨æ–‡ä»¶ç³»ç»Ÿ
API å’ŒåŒæ­¥æ–‡ä»¶ç³»ç»Ÿ APIã€‚
</p>

<p>
<!--@Chrome's Filesystem and Sync Filesystem APIs extend the
<a href="http://www.html5rocks.com/tutorials/file/filesystem/">HTML5 FileSystem API</a>.
With Chrome's Filesystem API,
apps can create, read, navigate,
and write to a sandboxed section
of the user's local file system.
For example,
a photo-sharing app can use the Filesystem API
to read and write any photos that a user selects.-->
Chrome æµè§ˆå™¨çš„æ–‡ä»¶ç³»ç»Ÿ API å’ŒåŒæ­¥æ–‡ä»¶ç³»ç»Ÿ API æ‰©å±•äº†
<a href="http://www.html5rocks.com/zh/tutorials/file/filesystem/">HTML5
æ–‡ä»¶ç³»ç»Ÿ API</a>ã€‚ä½¿ç”¨ Chrome æµè§ˆå™¨çš„æ–‡ä»¶ç³»ç»Ÿ
APIï¼Œåº”ç”¨ç¨‹åºå¯ä»¥åˆ›å»ºã€è¯»å–ã€å¯¼èˆªåŠå†™å…¥ç”¨æˆ·æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿä¸­ç»è¿‡æ²™ç›’å±è”½çš„ä¸€ä¸ªåŒºåŸŸã€‚é€šè¿‡
Chrome æµè§ˆå™¨çš„æ–‡ä»¶ç³»ç»Ÿ APIï¼ŒChrome åº”ç”¨å¯ä»¥è¯»å–æˆ–å†™å…¥ç”¨æˆ·é€‰æ‹©ä½ç½®çš„æ–‡ä»¶ã€‚ä¾‹å¦‚ï¼Œç…§ç‰‡åˆ†äº«åº”ç”¨å¯ä»¥ä½¿ç”¨æ–‡ä»¶ç³»ç»Ÿ
API è¯»å–å’Œå†™å…¥ç”¨æˆ·é€‰æ‹©çš„ä»»ä½•ç…§ç‰‡ã€‚
</p>

<p>
<!--@With Chrome's Sync Filesystem API,
apps can save and synchronize data
on a user's Google Drive
so that the same data can be available across different clients.
For example, a 
<a href="https://github.com/GoogleChrome/chrome-app-samples/tree/master/syncfs-editor">cloud-backed text editor</a>
app can automatically sync new text files to a user's Google Drive account.
When the user opens the text editor in a new client,
Google Drive pushes new text files to that instance of the text editor.-->
ä½¿ç”¨ Chrome æµè§ˆå™¨çš„åŒæ­¥æ–‡ä»¶ç³»ç»Ÿ APIï¼Œåº”ç”¨å¯ä»¥åœ¨ç”¨æˆ·çš„ Google
äº‘ç«¯ç¡¬ç›˜ä¸Šä¿å­˜å’ŒåŒæ­¥æ•°æ®ï¼Œè¿™æ ·ç›¸åŒçš„æ•°æ®å¯ä»¥åœ¨ä¸åŒçš„å®¢æˆ·ç«¯ä¹‹é—´ä½¿ç”¨ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ª<a href="https://github.com/GoogleChrome/chrome-app-samples/tree/master/syncfs-editor">äº‘ç«¯æ”¯æŒçš„æ–‡æœ¬ç¼–è¾‘å™¨</a>åº”ç”¨å¯ä»¥è‡ªåŠ¨å°†æ–°çš„æ–‡æœ¬æ–‡ä»¶åŒæ­¥è‡³ç”¨æˆ·çš„
Google äº‘ç«¯ç¡¬ç›˜è´¦æˆ·ã€‚å½“ç”¨æˆ·åœ¨æ–°çš„å®¢æˆ·ç«¯æ‰“å¼€æ–‡æœ¬ç¼–è¾‘å™¨æ—¶ï¼ŒGoogle
äº‘ç«¯ç¡¬ç›˜ä¼šå°†æ–°çš„æ–‡æœ¬æ–‡ä»¶æ¨é€è‡³è¯¥æ–‡æœ¬ç¼–è¾‘å™¨çš„å®ä¾‹ã€‚
</p>

<p>
<!--@Note: Unlike regular Filesystem API, Chrome's Sync Filesystem API
currently does <b>NOT</b> support directory operations, except for
reading directory entries in the root directory.
An attempt to create a directory in Sync Filesystem will result
in INVALID_MODIFICATION_ERROR.-->
æ³¨æ„ï¼šä¸æ™®é€šçš„æ–‡ä»¶ç³»ç»Ÿ API ä¸åŒï¼ŒChrome æµè§ˆå™¨çš„åŒæ­¥æ–‡ä»¶ç³»ç»Ÿ API
å½“å‰<b>è¿˜ä¸</b>æ”¯æŒç›®å½•æ“ä½œï¼Œé™¤äº†åœ¨æ ¹ç›®å½•ä¸­è¯»å–ç›®å½•é¡¹ã€‚å°è¯•åœ¨åŒæ­¥æ–‡ä»¶ç³»ç»Ÿä¸­åˆ›å»ºç›®å½•ä¼šå¯¼è‡´
INVALID_MODIFICATION_ERROR é”™è¯¯ã€‚
</p>

<h2 id="filesystem"><!--@Using the Chrome Filesystem API-->ä½¿ç”¨ Chrome
 æµè§ˆå™¨çš„æ–‡ä»¶ç³»ç»Ÿ API</h2>
<h3 id="filesystem-manifest"><!--@Adding file system permission-->æ·»åŠ æ–‡ä»¶ç³»ç»Ÿæƒé™</h3>

<p>
<!--@To use Chrome's File System API,
you need to add the "fileSystem" permission to the manifest,
so that you can obtain permission from the user
to store persistent data.-->
è¦ä½¿ç”¨ Chrome æµè§ˆå™¨çš„æ–‡ä»¶ç³»ç»Ÿ
APIï¼Œæ‚¨éœ€è¦åœ¨æ¸…å•æ–‡ä»¶ä¸­æ·»åŠ  "fileSystem"
æƒé™ï¼Œä½¿æ‚¨å¯ä»¥ä»ç”¨æˆ·è·å–æŒä¹…å‚¨å­˜æ•°æ®çš„æƒé™ã€‚

<pre data-filename="manifest.json">
"permissions": [
  "...",
  "fileSystem"
]
</pre>

<h3 id="import"><!--@User-options for selecting files-->é€‰æ‹©æ–‡ä»¶çš„ç”¨æˆ·é€‰é¡¹</h3>

<p>
<!--@Users expect to select files
in the same way they always do.
At a minimum,
they expect a 'choose file' button
and standard file-chooser.
If your app makes heavy use of file-handing,
you should also implement drag-and-drop
(see below and also check out 
<a href="http://www.html5rocks.com/tutorials/dnd/basics/">Native HTML5 Drag and Drop</a>).-->
ç”¨æˆ·æœŸæœ›ä»¥ä¹ æƒ¯çš„æ–¹å¼é€‰æ‹©æ–‡ä»¶ï¼Œè‡³å°‘ä»–ä»¬æœŸæœ›ä¸€ä¸ªâ€œé€‰æ‹©æ–‡ä»¶â€æŒ‰é’®ä»¥åŠæ ‡å‡†çš„æ–‡ä»¶é€‰æ‹©å™¨ã€‚å¦‚æœæ‚¨çš„åº”ç”¨å¤§é‡ä½¿ç”¨æ–‡ä»¶é€‰æ‹©ï¼Œæ‚¨è¿˜åº”è¯¥å®ç°æ‹–æ”¾æ”¯æŒï¼ˆå‚è§å¦‚ä¸‹å†…å®¹ä»¥åŠ<a
href="http://www.html5rocks.com/zh/tutorials/dnd/basics/">æœ¬æœº HTML5 æ‹–æ”¾</a>ï¼‰ã€‚
</p>

<h3 id="path"><!--@Obtaining the path of a fileEntry-->è·å–æ–‡ä»¶é¡¹ï¼ˆfileEntryï¼‰çš„è·¯å¾„</h3>

<p>
<!--@To get the full path
of the file the user selected,
<code>fileEntry</code>,
call <code>getDisplayPath()</code>:-->
è¦ä»æ–‡ä»¶é¡¹ï¼ˆ<code>fileEntry</code>ï¼‰è·å–ç”¨æˆ·é€‰å®šæ–‡ä»¶çš„å…¨è·¯å¾„ï¼Œè¯·è°ƒç”¨
<code>getDisplayPath()</code>ï¼š
</p>

<pre>
function displayPath(fileEntry) {
  chrome.fileSystem.getDisplayPath(fileEntry, function(path) {
    console.log(path)
  });
}
</pre>

<h3 id="drag"><!--@Implementing drag-and-drop-->å®ç°æ‹–æ”¾æ”¯æŒ</h3>

<p>
<!--@If you need to implement drag-and-drop selection,
the drag-and-drop file controller
(<code>dnd.js</code>) in the-->
å¦‚æœæ‚¨éœ€è¦å®ç°æ‹–æ”¾é€‰æ‹©ï¼Œ<a href="https://github.com/GoogleChrome/chrome-app-samples/tree/master/filesystem-access">filesystem-access</a>
<!--@sample is a good starting point.
The controller creates a file entry
from a <code>DataTransferItem</code>
via drag-and-drop.
In this example,
the <code>fileEntry</code> is set
to the first dropped item.-->
ç¤ºä¾‹ä¸­çš„æ‹–æ”¾æ–‡ä»¶æ§åˆ¶å™¨ï¼ˆ<code>dnd.js</code>ï¼‰æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„èµ·ç‚¹ã€‚é€šè¿‡æ‹–æ”¾æ§åˆ¶å™¨ä»
<code>DataTransferItem</code>
åˆ›å»ºä¸€ä¸ªæ–‡ä»¶é¡¹ã€‚åœ¨è¿™ä¸€ä¾‹å­ä¸­ï¼Œ<code>fileEntry</code>
è®¾ç½®ä¸ºæ‹–æ”¾çš„ç¬¬ä¸€ä¸ªé¡¹ç›®ã€‚
</p>

<pre>
var dnd = new DnDFileController('body', function(data) {
  var fileEntry = data.items[0].webkitGetAsEntry();
  displayPath(fileEntry);
});
</pre>

<h3 id="read"><!--@Reading a file-->è¯»å–æ–‡ä»¶</h3>

<p>
<!--@The following code opens the file (read-only) and
reads it as text using a <code>FileReader</code> object.
If the file doesn't exist, an error is thrown.-->
å¦‚ä¸‹ä»£ç æ‰“å¼€æ–‡ä»¶ï¼ˆåªè¯»ï¼‰å¹¶ä½¿ç”¨
<code>FileReader</code>
å¯¹è±¡ä»¥æ–‡æœ¬å½¢å¼è¯»å–ã€‚å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ™ä¼šå¼•å‘é”™è¯¯ã€‚
</p>

<pre>
var chosenFileEntry = null;

chooseFileButton.addEventListener('click', function(e) {
  chrome.fileSystem.chooseEntry({type: 'openFile'}, function(readOnlyEntry) {
 
    readOnlyEntry.file(function(file) {
      var reader = new FileReader();

      reader.onerror = errorHandler;
      reader.onloadend = function(e) {
        console.log(e.target.result);
      };

      reader.readAsText(file);
    });
	});
});
</pre>

<h3 id="write"><!--@Writing a file-->å†™å…¥æ–‡ä»¶</h3>

<p>
<!--@The two common use-cases
for writing a file are "Save" and "Save as".
The following code creates a
<code>writableEntry</code>
from the read-only <code>chosenFileEntry</code> and
writes the selected file to it.-->
ç”¨äºå†™å…¥æ–‡ä»¶çš„ä¸¤ç§å¸¸è§ä½¿ç”¨æƒ…å†µä¸ºâ€œä¿å­˜â€ä¸â€œå¦å­˜ä¸ºâ€ã€‚å¦‚ä¸‹ä»£ç ä»åªè¯»çš„
<code>chosenFileEntry</code> åˆ›å»ºä¸€ä¸ª
<code>writableEntry</code>ï¼Œå¹¶å°†é€‰å®šæ–‡ä»¶å†™å…¥å®ƒã€‚
</p>

<pre>
 chrome.fileSystem.getWritableEntry(chosenFileEntry, function(writableFileEntry) {
    writableFileEntry.createWriter(function(writer) {
      writer.onerror = errorHandler;
      writer.onwriteend = callback;

    chosenFileEntry.file(function(file) {
      writer.write(file);
    });   
  }, errorHandler);
});
</pre>

<p>
<!--@The following code creates a new file
with "Save as" functionality and
writes the new blob to the file
using the <code>writer.write()</code> method.-->
å¦‚ä¸‹ä»£ç å…·æœ‰â€œå¦å­˜ä¸ºâ€åŠŸèƒ½ï¼Œåˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶å¹¶ä½¿ç”¨
<code>writer.write()</code> æ–¹æ³•å°†æ–°çš„
Blobï¼ˆäºŒè¿›åˆ¶å¤§å‹ç‰©ä»¶ï¼‰å†™å…¥æ–‡ä»¶ã€‚
</p>

<pre>
chrome.fileSystem.chooseEntry({type: 'saveFile'}, function(writableFileEntry) {
    writableFileEntry.createWriter(function(writer) {
      writer.onerror = errorHandler;
      writer.onwriteend = function(e) {
        console.log('write complete');
      };
      writer.write(new Blob(['1234567890'], {type: 'text/plain'}));  
    }, errorHandler);
});
</pre>

<h2 id="sync-filesystem"><!--@Using the Chrome Sync Filesystem API-->ä½¿ç”¨
Chrome æµè§ˆå™¨çš„åŒæ­¥æ–‡ä»¶ç³»ç»Ÿ API</h2>

<p>
<!--@Using syncable file storage,
returned data objects can be operated on in the same way
as local offline file systems in the
<a href="http://www.w3.org/TR/file-system-api/">FileSystem API</a>,
but with the added (and automatic) syncing
of that data to Google Drive.-->
ä½¿ç”¨åŒæ­¥æ–‡ä»¶å­˜å‚¨ï¼Œè¿”å›çš„æ•°æ®å¯¹è±¡å¯ä»¥å’Œ<a href="http://www.w3.org/TR/file-system-api/">æ–‡ä»¶ç³»ç»Ÿ API</a>
ä¸­çš„æœ¬åœ°ç¦»çº¿æ–‡ä»¶ç³»ç»Ÿä¸€æ ·ä½¿ç”¨ï¼Œä½†æ˜¯å¢åŠ äº†ï¼ˆè‡ªåŠ¨ï¼‰å°†æ•°æ®åŒæ­¥åˆ° Google
äº‘ç«¯ç¡¬ç›˜çš„åŠŸèƒ½ã€‚
</p>


<h3 id="sync-manifest"><!--@Adding sync file system permission-->æ·»åŠ åŒæ­¥æ–‡ä»¶ç³»ç»Ÿæƒé™</h3>

<p>
<!--@To use Chrome's Sync Filesystem API,
you need to add the "syncFileSystem" permission to the manifest,
so that you can obtain permission from the user
to store and sync persistent data.-->
è¦ä½¿ç”¨ Chrome æµè§ˆå™¨çš„åŒæ­¥æ–‡ä»¶ç³»ç»Ÿ APIï¼Œæ‚¨éœ€è¦åœ¨æ¸…å•æ–‡ä»¶ä¸­æ·»åŠ 
"syncFileSystem" æƒé™ï¼Œè¿™æ ·æ‚¨æ‰èƒ½ä»ç”¨æˆ·é‚£é‡Œè·å–å­˜å‚¨å’ŒåŒæ­¥æŒä¹…æ•°æ®çš„æƒé™ã€‚

<pre data-filename="manifest.json">
"permissions": [
  "...",
  "syncFileSystem"
]
</pre>

<h3 id="initiate"><!--@Initiating syncable file storage-->è¯·æ±‚åŒæ­¥æ–‡ä»¶å­˜å‚¨</h3>

<p>
<!--@To initiate syncable file storage in your app,
simply call <a href="https://crxdoc-zh.appspot.com/apps/syncFileSystem.html#method-requestFileSystem">syncFileSystem.requestFileSystem</a>.
This method returns a syncable filesystem backed by Google Drive,
for example:-->
è¦åœ¨æ‚¨çš„åº”ç”¨ä¸­è¯·æ±‚åŒæ­¥æ–‡ä»¶å­˜å‚¨ï¼Œåªè¦è°ƒç”¨
<a href="https://crxdoc-zh.appspot.com/apps/syncFileSystem.html#method-requestFileSystem">syncFileSystem.requestFileSystem</a>ã€‚è¯¥æ–¹æ³•è¿”å›ä¸€ä¸ªç”± Google
äº‘ç«¯ç¡¬ç›˜æ”¯æŒçš„åŒæ­¥æ–‡ä»¶ç³»ç»Ÿã€‚ä¾‹å¦‚ï¼š
</p>

<pre>
chrome.syncFileSystem.requestFileSystem(function (fs) {
   // æ–‡ä»¶ç³»ç»Ÿ API åº”è¯¥å¯ä»¥ç›´æ¥åœ¨è¿”å›çš„â€œfsâ€ä¸Šä½¿ç”¨ã€‚
   fs.root.getFile('test.txt', {create:true}, getEntryCallback, errorCallback);
});
</pre>

<h3 id="file-status"><!--@About file sync status-->å…³äºæ–‡ä»¶åŒæ­¥çŠ¶æ€</h3>

<p>
<!--@Use <a href="https://crxdoc-zh.appspot.com/apps/syncFileSystem.html#method-getFileStatus">syncFileSystem.getFileStatus</a> to get the sync status
for a current file:-->
ä½¿ç”¨ <a href="https://crxdoc-zh.appspot.com/apps/syncFileSystem.html#method-getFileStatus">syncFileSystem.getFileStatus</a> è·å–å½“å‰æ–‡ä»¶çš„åŒæ­¥çŠ¶æ€ï¼š
</p>

<pre>
chrome.syncFileSystem.getFileStatus(entry, function(status) {...});
</pre>

<p>
<!--@File sync status values can be one of the following:
<code>'synced'</code>, <code>'pending'</code>, or <code>'conflicting'</code>.
'Synced' means the file is fully synchronized;
there're no pending local changes
that haven't been synchronized to Google Drive.
There can, however, be pending changes on the Google Drive side
that haven't been fetched yet.-->
æ–‡ä»¶åŒæ­¥çŠ¶æ€å¯ä»¥ä¸ºå¦‚ä¸‹å€¼ä¹‹ä¸€ï¼š<code>'synced'</code>ï¼ˆå·²åŒæ­¥ï¼‰ã€<code
>'pending'</code>ï¼ˆå¾…å®šï¼‰æˆ–
<code>'conflicting'</code>ã€‚
</p>

<p>'synced' æ„å‘³ç€æ–‡ä»¶å·²ç»å®Œå…¨åŒæ­¥ï¼Œæ²¡æœ‰è¿˜æœªåŒæ­¥åˆ° Google
äº‘ç«¯ç¡¬ç›˜çš„å¾…å®šæœ¬åœ°æ›´æ”¹ï¼Œç„¶è€Œåœ¨ Google äº‘ç«¯ç¡¬ç›˜ä¸Šå¯èƒ½æœ‰è¿˜æœªè·å–çš„å¾…å®šæ›´æ”¹ã€‚</p>

<p>
<!--@'Pending' means the file has pending changes
not yet synchronized to Google Drive.
If the app is running online,
local changes are (almost) immediately synchronized to Google Drive, and the
<a href="https://crxdoc-zh.appspot.com/apps/syncFileSystem.html#event-onFileStatusChanged">syncFileSystem.onFileStatusChanged</a>
event is fired with the <code>'synced'</code> status
(see below for more details).-->
'pending' æ„å‘³ç€æ–‡ä»¶æœ‰å¾…å®šçš„æ›´æ”¹ï¼Œè¿˜æœªåŒæ­¥åˆ° Google
äº‘ç«¯ç¡¬ç›˜ã€‚å¦‚æœåº”ç”¨ä»¥åœ¨çº¿æ¨¡å¼è¿è¡Œï¼Œæœ¬åœ°æ›´æ”¹ï¼ˆå‡ ä¹ï¼‰ä¼šç«‹å³åŒæ­¥åˆ° Google
äº‘ç«¯ç¡¬ç›˜ï¼Œå¹¶å°†äº§ç”Ÿ <a href="https://crxdoc-zh.appspot.com/apps/syncFileSystem.html#event-onFileStatusChanged">syncFileSystem.onFileStatusChanged</a> äº‹ä»¶ï¼Œä¼ é€’
<code>'synced'</code> çŠ¶æ€ï¼ˆæ›´å¤šè¯¦æƒ…è¯·å¾€ä¸‹é˜…è¯»ï¼‰ã€‚
</p>

<p>
<!--@The <a href="https://crxdoc-zh.appspot.com/apps/syncFileSystem.html#event-onFileStatusChanged">syncFileSystem.onFileStatusChanged</a>
is fired when a file's status changes to <code>'conflicting'</code>.
'Conflicting' means there are conflicting changes
on both the local storage and Google Drive.
A file can be in this state only if the conflict resolution policy
is set to <code>'manual'</code>.  The default policy is
<code>'last_write_win'</code> and conflicts are automatically resolved
by simple last-write-win policy.  The system's conflict resolution policy
can be changed by <a href="https://crxdoc-zh.appspot.com/apps/syncFileSystem.html#method-setConflictResolutionPolicy">syncFileSystem.setConflictResolutionPolicy</a>.-->
å½“æ–‡ä»¶çŠ¶æ€æ›´æ”¹ä¸º <code>'conflicting'</code> æ—¶ä¹Ÿä¼šäº§ç”Ÿ
<a href="https://crxdoc-zh.appspot.com/apps/syncFileSystem.html#event-onFileStatusChanged">syncFileSystem.onFileStatusChanged</a> äº‹ä»¶ã€‚'conflicting'
æ„å‘³ç€æœ¬åœ°å­˜å‚¨å’Œ Google äº‘ç«¯ç¡¬ç›˜ä¹‹é—´çš„æ›´æ”¹æœ‰å†²çªã€‚åªæœ‰å½“å†²çªè§£å†³ç­–ç•¥è®¾ç½®ä¸º
<code>'manual'</code>ï¼ˆæ‰‹åŠ¨ï¼‰æ—¶æ–‡ä»¶æ‰æœ‰å¯èƒ½å¤„äºè¿™ç§çŠ¶æ€ï¼Œé»˜è®¤ç­–ç•¥æ˜¯
<code>'last_write_win'</code>ï¼ˆæœ€åå†™å…¥ä¼˜å…ˆï¼‰ï¼Œå†²çªä¼šæŒ‰ç…§æœ€åå†™å…¥ä¼˜å…ˆçš„ç­–ç•¥è‡ªåŠ¨è§£å†³ã€‚ç³»ç»Ÿçš„å†²çªè§£å†³ç­–ç•¥å¯ä»¥é€šè¿‡
<a href="https://crxdoc-zh.appspot.com/apps/syncFileSystem.html#method-setConflictResolutionPolicy">syncFileSystem.setConflictResolutionPolicy</a> ä¿®æ”¹ã€‚
</p>

<p>
<!--@If the conflict resolution policy is set to <code>'manual'</code> and
a file results in <code>'conflicting'</code> state, the app can still
read and write the file as a local offline file, but the changes are not
sync'ed and the file will be kept detached from remote changes made on
other clients until the conflict is resolved.
The easiest way to resolve a conflict is to delete or rename the local
version of file. This forces the remote version to be synchronized,
the conflicting state is resolved, and
the <code>onFileStatusChanged</code> event is fired
with the <code>'synced'</code> status.-->
å¦‚æœå†²çªè§£å†³ç­–ç•¥è®¾ç½®ä¸º
<code>'manual'</code>ï¼ˆæ‰‹åŠ¨ï¼‰ï¼Œå¹¶ä¸”æ–‡ä»¶å¤„äº
<code>'conflicting'</code>ï¼ˆå†²çªï¼‰çŠ¶æ€ï¼Œåº”ç”¨ä»ç„¶å¯ä»¥ç»§ç»­è¯»å–å’Œå†™å…¥è¯¥æ–‡ä»¶ï¼Œå°†å®ƒä½œä¸ºä¸€ä¸ªæœ¬åœ°ç¦»çº¿æ–‡ä»¶ï¼Œä½†æ˜¯æ›´æ”¹ä¸ä¼šè¢«åŒæ­¥ï¼Œå¹¶ä¸”è¯¥æ–‡ä»¶å°†ä¿æŒè„±ç¦»çŠ¶æ€ï¼Œä¸å—å…¶ä»–å®¢æˆ·ç«¯æ‰€ä½œçš„è¿œç¨‹æ›´æ”¹çš„å½±å“ï¼Œç›´åˆ°å†²çªè§£å†³ã€‚è§£å†³å†²çªæœ€ç®€å•çš„åŠæ³•å°±æ˜¯åˆ é™¤æˆ–é‡å‘½åæœ¬åœ°ç‰ˆæœ¬çš„æ–‡ä»¶ï¼Œè¿™æ ·ä¼šå¼ºåˆ¶åŒæ­¥è¿œç¨‹ç‰ˆæœ¬ï¼Œè§£å†³å†²çªçŠ¶æ€ï¼Œå¹¶äº§ç”Ÿ
<code>onFileStatusChanged</code> äº‹ä»¶ï¼Œä¼ é€’ <code>'synced'</code> çŠ¶æ€ã€‚
</p>

<h3 id="file-status"><!--@Listening for changes in synced status-->ç›‘å¬åŒæ­¥çŠ¶æ€çš„æ›´æ”¹</h3>

<p>
<!--@The
<a href="https://crxdoc-zh.appspot.com/apps/syncFileSystem.html#event-onFileStatusChanged">syncFileSystem.onFileStatusChanged</a>
event is fired when the sync status of a file changes.
For example,
assume a file has pending changes and is in the 'pending' state.
The app may have been in offline state so that
the change is about to be synchronized.
When the sync service detects the pending local change
and uploads the change to Google Drive,
the service fires the <code>onFileStatusChanged</code> event
with following values:-->
å½“æ–‡ä»¶çš„åŒæ­¥çŠ¶æ€æ›´æ”¹æ—¶ï¼Œä¾‹å¦‚å‡è®¾æ–‡ä»¶æœ‰å¾…å®šçš„æ›´æ”¹å¹¶å¤„äº 'pending'
çŠ¶æ€ï¼Œä¼šäº§ç”Ÿ <a href="https://crxdoc-zh.appspot.com/apps/syncFileSystem.html#event-onFileStatusChanged">syncFileSystem.onFileStatusChanged</a>
äº‹ä»¶ã€‚åº”ç”¨å¯èƒ½å·²ç»å¤„äºç¦»çº¿çŠ¶æ€ï¼Œæ‰€ä»¥æ›´æ”¹è¿˜æœªè¢«åŒæ­¥ã€‚å½“åŒæ­¥æœåŠ¡æ£€æµ‹åˆ°æœ¬åœ°æ›´æ”¹å¹¶å°†æ›´æ”¹ä¸Šä¼ åˆ°
Google äº‘ç«¯ç¡¬ç›˜æ—¶ï¼Œè¯¥æœåŠ¡ä¼šäº§ç”Ÿ <code>onFileStatusChanged</code>
äº‹ä»¶ï¼Œå¹¶ä¼ é€’ä¸‹åˆ—å€¼ï¼š <code>{ fileEntry: <em>æ–‡ä»¶çš„æ–‡ä»¶é¡¹</em>, status: 'synced', action: 'updated',
  direction: 'local_to_remote' }</code>.
</p>

<p>
<!--@Similarly, regardless of the local activities,
the sync service may detect remote changes made by another client,
and downloads the changes from Google Drive to the local storage.
If the remote change was for adding a new file,
an event with following values is fired:-->
ç±»ä¼¼åœ°ï¼Œæ— è®ºæœ¬åœ°æœ‰ä»€ä¹ˆæ´»åŠ¨ï¼ŒåŒæ­¥æœåŠ¡å¯èƒ½ä¼šæ£€æµ‹åˆ°å¦ä¸€ä¸ªå®¢æˆ·ç«¯ä½œå‡ºçš„è¿œç¨‹æ›´æ”¹ï¼Œå¹¶å°†æ›´æ”¹ä»
Google äº‘ç«¯ç¡¬ç›˜ä¸‹è½½åˆ°æœ¬åœ°å­˜å‚¨ä¸­ã€‚å¦‚æœè¿œç¨‹æ›´æ”¹æ˜¯æ·»åŠ äº†ä¸€ä¸ªæ–°æ–‡ä»¶ï¼Œå°†äº§ç”Ÿä¸€ä¸ªäº‹ä»¶ï¼Œä¼ é€’ä¸‹åˆ—å€¼ï¼š<code>{ fileEntry: <em>æ–‡ä»¶çš„æ–‡ä»¶é¡¹</em>, status: 'synced', action: 'added',
  direction: 'remote_to_local' }</code>.
</p>

<p>
<!--@If both the local and remote side have conflicting changes for the same file
and if the conflict resolution policy is set to <code>'manual'</code>,
the file status is changed to <code>conflicting</code> state,
is detached from the sync service,
and won't be synchronized until the conflict is resolved.
In this case an event with following values is fired:-->
å¦‚æœæœ¬åœ°å’Œè¿œç¨‹ä¸¤ç«¯éƒ½æœ‰å¯¹åŒä¸€æ–‡ä»¶å†²çªçš„æ›´æ”¹ï¼Œè€Œä¸”å†²çªè§£å†³ç­–ç•¥è®¾ç½®ä¸º
<code>'manual'</code>ï¼ˆæ‰‹åŠ¨ï¼‰ï¼Œæ–‡ä»¶çŠ¶æ€å°±ä¼šå˜æˆ
<code>conflicting</code>ï¼ˆå†²çªï¼‰çŠ¶æ€ï¼Œå¹¶ä»åŒæ­¥æœåŠ¡è„±ç¦»ï¼Œåªæœ‰å½“å†²çªè§£å†³åæ‰ä¼šåŒæ­¥ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå°†ä¼šäº§ç”Ÿä¸€ä¸ªäº‹ä»¶ï¼Œä¼ é€’ä¸‹åˆ—å€¼ï¼š<code>{ fileEntry: <em>æ–‡ä»¶çš„æ–‡ä»¶é¡¹</em>, status: 'conflicting', action: null,
  direction: null }</code>.
</p>

<p>
<!--@You can add a listener for this event
that responds to any changes in status.
For example,
the <a href="https://github.com/agektmr/ChromeMusicPlayer">Chrome Music Player</a> app
listens for any new music synced from Google Drive,
but not yet imported to the user's local storage on a particular client.
Any music found gets synced to that client:-->
æ‚¨å¯ä»¥ä¸ºè¯¥äº‹ä»¶æ·»åŠ ä¸€ä¸ªç›‘å¬å™¨ï¼Œå“åº”çŠ¶æ€çš„æ›´æ”¹ã€‚ä¾‹å¦‚ï¼Œ<a href="https://github.com/agektmr/ChromeMusicPlayer">Chrome
<!--@Music Player-->éŸ³ä¹æ’­æ”¾å™¨</a>åº”ç”¨ç›‘å¬ä» Google
äº‘ç«¯ç¡¬ç›˜åŒæ­¥ï¼Œä½†æ˜¯è¿˜æœªå¯¼å…¥è‡³æŸä¸ªå®¢æˆ·ç«¯ä¸Šç”¨æˆ·æœ¬åœ°å­˜å‚¨çš„æ–°éŸ³ä¹ï¼Œæ‰¾åˆ°çš„éŸ³ä¹ä¼šåŒæ­¥åˆ°è¿™ä¸€å®¢æˆ·ç«¯ã€‚
</p>

<pre>
chrome.syncFileSystem.onFileStatusChanged.addListener(function(fileInfo) {
  if (fileInfo.status === 'synced') {
    if (fileInfo.direction === 'remote_to_local') { 
      if (fileInfo.action === 'added') {
        db.add(fileInfo.fileEntry);
      } else if (fileInfo.action === 'deleted') {
        db.remove(fileInfo.fileEntry);
      }
    }
  }
});
</pre>

<h3 id="check-usage"><!--@Checking API usage-->æ£€æŸ¥ API ç”¨é‡</h3>

<p>
<!--@To check the amount of data being used by the API,
query the app's local sandboxed directory
or the usage bytes returned by-->
è¦æ£€æŸ¥è¯¥ API ä½¿ç”¨çš„æ•°æ®é‡ï¼ŒæŸ¥è¯¢åº”ç”¨åœ¨æœ¬åœ°ç»è¿‡æ²™ç›’å±è”½çš„ç›®å½•ï¼Œæˆ–
<a href="https://crxdoc-zh.appspot.com/apps/syncFileSystem.html#method-getUsageAndQuota">syncFileSystem.getUsageAndQuota</a><!--@:-->
è¿”å›çš„å ç”¨å­—èŠ‚æ•°ï¼š
</p>

<pre>
chrome.syncFileSystem.getUsageAndQuota(fileSystem, function (storageInfo) {
   updateUsageInfo(storageInfo.usageBytes);
   updateQuotaInfo(storageInfo.quotaBytes);
});
</pre>

<p>
<!--@You can also look at the user's sync backend service storage (in Google Drive).
Synced files are saved in a hidden Google Drive folder,
<strong>Chrome Syncable FileSystem</strong>. The folder won't be shown in
your 'My Drive' list but can be accessed by searching the folder name
in the search box.  (Note that the remote folder layout is
<strong>not</strong> guaranteed to remain backwards compatible between
releases.)-->
æ‚¨ä¹Ÿå¯ä»¥æŸ¥çœ‹ç”¨æˆ·çš„åŒæ­¥åç«¯å­˜å‚¨ï¼ˆåœ¨ Google äº‘ç«¯ç¡¬ç›˜ä¸­ï¼‰ï¼ŒåŒæ­¥çš„æ–‡ä»¶ä¿å­˜åœ¨ä¸€ä¸ªéšè—çš„
Google äº‘ç«¯ç¡¬ç›˜æ–‡ä»¶å¤¹ä¸­ï¼š<strong>Chrome Syncable
FileSystem</strong>ã€‚æ–‡ä»¶å¤¹ä¸ä¼šåœ¨æ‚¨çš„â€œæˆ‘çš„äº‘ç«¯ç¡¬ç›˜â€åˆ—è¡¨ä¸­æ˜¾ç¤ºï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡åœ¨æœç´¢æ¡†ä¸­æœç´¢æ–‡ä»¶å¤¹åç§°æ¥è®¿é—®ã€‚ï¼ˆæ³¨æ„ï¼Œè¿œç¨‹æ–‡ä»¶å¤¹çš„å¸ƒå±€<strong
>ä¸ä¿è¯</strong>åœ¨ä¸åŒç‰ˆæœ¬é—´å‘åå…¼å®¹ã€‚ï¼‰
</p>
      </div>
    </div>
  </body>

  <div id="gc-footer">
    <button class="google-button" id="scroll-to-top">â†‘</button>
    <button class="google-button" id="send-feedback" style="display:none">Send Feedback</button>
    <div class="text">
      <p>
        <!--@Except as otherwise <a href="http://code.google.com/policies.html#restrictions">noted</a>,
        the content of this page is licensed under the <a rel="license" href="http://creativecommons.org/licenses/by/3.0/">Creative Commons
        Attribution 3.0 License</a>, and code samples are licensed under the
        <a rel="license" href="http://code.google.com/google_bsd_license.html">BSD License</a>.-->
        è¯¥é¡µé¢ç¿»è¯‘è‡ª
        <a href="https://developer.chrome.com/extensions/">Google Chrome Extensions</a>
        ä¸
        <a href="https://developer.chrome.com/apps/">Google Chrome Apps</a>ã€‚é™¤éç‰¹åˆ«<a href="https://code.google.com/policies.html#restrictions">è¯´æ˜</a>ï¼Œè¯¥é¡µé¢çš„å†…å®¹éµå¾ª
        <a rel="license" href="http://creativecommons.org/licenses/by/3.0/">Creative Commons Attribution 3.0
        License</a>ï¼Œä»£ç ç¤ºä¾‹éµå¾ª
        <a rel="license" href="http://code.google.com/google_bsd_license.html">BSD License</a>ã€‚
      </p>
      <p class="crxdoczh-footer">
        <a href="https://code.google.com/p/crxdoczh/">crxdoczh é¡¹ç›®ä¸»é¡µ</a>
        <a href="https://code.google.com/p/crxdoczh/issues/entry?template=%E7%BD%91%E7%AB%99%E5%8F%8D%E9%A6%88">å‘é€åé¦ˆ</a>
        <a href="" rel="publisher">
          Google+ é¡µé¢
        </a>
        <a href="https://plus.google.com/communities/105384952265487436177">Google+ ç¤¾ç¾¤</a>
      </p>
      <script src="../../developer.chrome.com/static/js/platform_chooser.js" type="text/javascript"></script>
      <script src="../../developer.chrome.com/static/js/popup.js" type="text/javascript"></script>
      <script src="../../developer.chrome.com/static/js/prettify.js" type="text/javascript"></script>
      <script src="../../developer.chrome.com/static/js/scroll.js" type="text/javascript"></script>
      <script src="../../developer.chrome.com/static/js/sidebar.js" type="text/javascript"></script>
      <script src="../../developer.chrome.com/static/js/tabs.js" type="text/javascript"></script>
      <script>
        (function() {
          // Auto syntax highlight all pre tags.
          var preElements = document.getElementsByTagName('pre');
          for (var i = 0; i < preElements.length; i++) {
            var preElement = preElements[i];
            preElement.classList.add('prettyprint');
            var datasetFilename = preElement.getAttribute('data-filename');
            if (datasetFilename) {
              var filename = document.createElement('div');
              filename.className = 'filename nocode';
              filename.textContent = datasetFilename;
              preElement.insertBefore(filename, preElement.firstChild);
            }
          }
          prettyPrint();
        })();

        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-25062424-1']);
        _gaq.push(['_trackPageview']);

        (function() {
          var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
          ga.src = 'https://ssl.google-analytics.com/ga.js';
          var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();

        window.___gcfg = {
      Â  Â  lang: 'zh-CN'
      Â  };
      Â  (function() {
      Â  Â  var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
      Â  Â  po.src = 'https://apis.google.com/js/plusone.js';
      Â  Â  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
      Â  })();
      </script>
    </div>
  </div>
</html>
