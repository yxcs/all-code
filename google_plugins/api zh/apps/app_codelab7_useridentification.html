<!DOCTYPE html>
<html>
  <head>
    <title>è®¿é—®ç”¨æˆ·æ•°æ® - Google Chrome åº”ç”¨å¼€å‘æ–‡æ¡£ï¼ˆéå®˜æ–¹ä¸­æ–‡ç‰ˆï¼‰</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link href="/static/css/site.css" rel="stylesheet" type="text/css">
    <link href="https://developer.chrome.com/static/css/print.css" rel="stylesheet" type="text/css" media="print">
    <link href="https://developer.chrome.com/static/css/prettify.css" rel="stylesheet" type="text/css">
    <link href='//fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
  </head>

  <body>


<!-- Copyright © 2005. Spidersoft Ltd -->
<style>
A.applink:hover {border: 2px dotted #DCE6F4;padding:2px;background-color:#ffff00;color:green;text-decoration:none}
A.applink       {border: 2px dotted #DCE6F4;padding:2px;color:#2F5BFF;background:transparent;text-decoration:none}
A.info          {color:#2F5BFF;background:transparent;text-decoration:none}
A.info:hover    {color:green;background:transparent;text-decoration:underline}
</style>
<div style='BORDER: 1px solid #DCE6F4; MARGIN-TOP: 20px; MARGIN-BOTTOM: 20px; MARGIN-LEFT: 5px; MARGIN-RIGHT: 5px; PADDING: 5px; BACKGROUND-COLOR: #eef8ff;line-height:180%; COLOR: #000000; font-family: Arial; font-size: 8pt; width=100%; FILTER: progid:DXImageTransform.Microsoft.Gradient(GradientType=0, StartColorStr="#FFFFFFFF", EndColorStr="#F2F5FAFF");'>
This page was saved using <a class="applink" href="http://www.spidersoft.com"><b>WebZIP 7.0.3.1030</b></a> <a class="applink" href="http://www.spidersoft.com"><b>offline browser</b></a>  on  12/24/13 11:31:37.<br>
<b>Address:</b> <a class="info" href="https://crxdoc-zh.appspot.com/apps/app_codelab7_useridentification.html">https://crxdoc-zh.appspot.com/apps/app_codelab7_useridentification.html</a><br>
<b>Title:</b> è®¿é—®ç”¨æˆ·æ•°æ® - Google Chrome åº”ç”¨å¼€å‘æ–‡æ¡£ï¼ˆéå®˜æ–¹ä¸­æ–‡ç‰ˆï¼‰ &nbsp;&bull;&nbsp; <b>Size:</b> 32913<br></div>
<!-- /Copyright © 2005. Spidersoft Ltd -->


    <div id="gc-topnav">
      <table><tr>
      <td id="chrome-logo">
        <a href="/apps/" title="Google Chrome åº”ç”¨" id="view-original">
          <img src="https://developer.chrome.com/static/images/chrome-logo.png" alt=""> chrome
        </a>
        <script type="text/javascript">
          document.getElementById('view-original').href = "https://developer.chrome.com" + location.pathname;
        </script>
        <div id="platform-chooser">
          <button id="platform-chooser-toggle" data-menu="platform-chooser-popup">
            åº”ç”¨ &#x25be;&#x202F;
          </button>
          <div id="platform-chooser-popup">
            <button class="apps" data-href="/apps/about_apps.html"><!--@apps-->åº”ç”¨</button>
            <button class="extensions" data-href="/extensions"><!--@extensions-->æ‰©å±•ç¨‹åº</button>
          </div>
        </div>ï¼ˆéå®˜æ–¹ä¸­æ–‡ç‰ˆï¼‰
      </td>
      <td>
        <ul>
          <li>
            <a href="/apps/samples.html"
               title="ç¤ºä¾‹ åº”ç”¨ï¼ˆåŒ…å«æºä»£ç ï¼‰"><!--@Samples-->ç¤ºä¾‹</a>
          </li>
          <li>
            <a href="http://groups.google.com/a/chromium.org/group/chromium-apps"
               title="Google Chrome åº”ç”¨å¼€å‘è€…è®ºå›"
               target="_blank"><!--@Group-->è®ºå›ï¼ˆè‹±æ–‡ï¼‰</a>
          </li>
          <li>
            <a href="http://stackoverflow.com/tags/google-chrome-app/info"
               title="Stack Overflow ä¸Šçš„ [google-chrome-app] æ ‡ç­¾"
               target="_blank">Stack overflow</a>
          </li>
        </ul>
      </td>
      </tr></table>
    </div>
    <div id="gc-topnav-space"></div>
    <div id="gc-container">
      <div id="gc-sidebar">
        <g:plusone></g:plusone>
        <ul 
            class="level1 ">
        <li class="level2">
              <span class="level2">å‘ç°</span>
          <ul 
              class="level2 ">
          <li class="level3">
                <a href="/apps/about_apps.html" class="level3 ">ä»€ä¹ˆæ˜¯ Chrome åº”ç”¨ï¼Ÿ</a>
          </li>
          </ul>
        </li><li class="level2">
              <span class="level2">å¼€å‘</span>
          <ul 
              class="level2 ">
          <li class="level3">
                <a href="/apps/first_app.html" class="level3 ">åˆ›å»ºæ‚¨çš„ç¬¬ä¸€ä¸ªåº”ç”¨</a>
          </li><li class="level3">
              <a class="button level3">
                <span class="level3">æ•™ç¨‹</span>
                <div class="toggleIndicator level3 toggled"></div>
              </a>
            <ul toggleable
                class="level3 ">
            <li class="level4">
                <a class="button level4">
                  <span class="level4">é€šè¿‡ä»£ç å®éªŒå®¤å­¦ä¹ </span>
                  <div class="toggleIndicator level4 toggled"></div>
                </a>
              <ul toggleable
                  class="level4 ">
              <li class="level5">
                    <a href="/apps/app_codelab.html" class="level5 ">å…³äºä»£ç å®éªŒå®¤</a>
              </li><li class="level5">
                    <a href="/apps/app_codelab1_setup.html" class="level5 ">1ã€è®¾ç½®å¼€å‘ç¯å¢ƒ</a>
              </li><li class="level5">
                    <a href="/apps/app_codelab2_basic.html" class="level5 ">2ã€åˆ›å»ºåŸºæœ¬çš„åº”ç”¨</a>
              </li><li class="level5">
                    <a href="/apps/app_codelab3_mvc.html" class="level5 ">3ã€åˆ›å»º MVC</a>
              </li><li class="level5">
                    <a href="/apps/app_codelab5_data.html" class="level5 ">4ã€ä¿å­˜å’Œè·å–æ•°æ®</a>
              </li><li class="level5">
                    <a href="/apps/app_codelab6_lifecycle.html" class="level5 ">5ã€ç®¡ç†åº”ç”¨çš„ç”Ÿå‘½å‘¨æœŸ</a>
              </li><li class="level5">
                    <a  class="level5 selected">6ã€è®¿é—®ç”¨æˆ·æ•°æ®</a>
              </li><li class="level5">
                    <a href="/apps/app_codelab8_webresources.html" class="level5 ">7ã€è®¿é—®ç½‘ç»œèµ„æº</a>
              </li><li class="level5">
                    <a href="/apps/app_codelab_10_publishing.html" class="level5 ">8ã€å‘å¸ƒåº”ç”¨</a>
              </li>
              </ul>
            </li><li class="level4">
                <a class="button level4">
                  <span class="level4">MVC æ¶æ„ä¸æ¡†æ¶</span>
                  <div class="toggleIndicator level4"></div>
                </a>
              <ul toggleable
                  class="level4 hidden">
              <li class="level5">
                    <a href="/apps/app_frameworks.html" class="level5 ">å…³äº MVC æ¶æ„</a>
              </li><li class="level5">
                    <a href="/apps/angular_framework.html" class="level5 ">ç”¨ AngularJS å»ºç«‹åº”ç”¨</a>
              </li><li class="level5">
                    <a href="/apps/sencha_framework.html" class="level5 ">ç”¨ Sencha Ext JS å»ºç«‹åº”ç”¨</a>
              </li>
              </ul>
            </li>
            </ul>
          </li><li class="level3">
              <a class="button level3">
                <span class="level3">Chrome åº”ç”¨çš„æ¦‚å¿µ</span>
                <div class="toggleIndicator level3"></div>
              </a>
            <ul toggleable
                class="level3 hidden">
            <li class="level4">
                <a class="button level4">
                  <span class="level4">åŸºç¡€çŸ¥è¯†</span>
                  <div class="toggleIndicator level4"></div>
                </a>
              <ul toggleable
                  class="level4 hidden">
              <li class="level5">
                    <a href="/apps/app_architecture.html" class="level5 ">åº”ç”¨çš„æ¶æ„</a>
              </li><li class="level5">
                    <a href="/apps/app_lifecycle.html" class="level5 ">åº”ç”¨çš„ç”Ÿå‘½å‘¨æœŸ</a>
              </li><li class="level5">
                    <a href="/apps/offline_apps.html" class="level5 ">é¦–å…ˆè€ƒè™‘ç¦»çº¿</a>
              </li><li class="level5">
                    <a href="/apps/app_external.html" class="level5 ">å¤–éƒ¨å†…å®¹</a>
              </li>
              </ul>
            </li><li class="level4">
                <a class="button level4">
                  <span class="level4">å®‰å…¨æ€§</span>
                  <div class="toggleIndicator level4"></div>
                </a>
              <ul toggleable
                  class="level4 hidden">
              <li class="level5">
                    <a href="/apps/contentSecurityPolicy.html" class="level5 ">å†…å®¹å®‰å…¨ç­–ç•¥</a>
              </li>
              </ul>
            </li><li class="level4">
                <a class="button level4">
                  <span class="level4">å°†æ‚¨çš„åº”ç”¨ä¸äº‘ç«¯ç»“åˆ</span>
                  <div class="toggleIndicator level4"></div>
                </a>
              <ul toggleable
                  class="level4 hidden">
              <li class="level5">
                  <a class="button level5">
                    <span class="level5">äº‘æ¶ˆæ¯æœåŠ¡</span>
                    <div class="toggleIndicator level5"></div>
                  </a>
                <ul toggleable
                    class="level5 hidden">
                <li class="level6">
                      <a href="/apps/cloudMessaging.html" class="level6 ">å…³äºäº‘æ¶ˆæ¯æœåŠ¡</a>
                </li><li class="level6">
                      <a href="/apps/pushMessaging.html" class="level6 ">å®¢æˆ·ç«¯å‚è€ƒ</a>
                </li><li class="level6">
                      <a href="/apps/gcm_server.html" class="level6 ">æœåŠ¡å‚è€ƒ</a>
                </li><li class="level6">
                      <a href="/apps/gcm_tos.html" class="level6 ">æœåŠ¡æ¡æ¬¾</a>
                </li>
                </ul>
              </li><li class="level5">
                  <a class="button level5">
                    <span class="level5">äº‘å­˜å‚¨æœåŠ¡</span>
                    <div class="toggleIndicator level5"></div>
                  </a>
                <ul toggleable
                    class="level5 hidden">
                <li class="level6">
                      <a href="/apps/storage.html" class="level6 ">chrome.storage</a>
                </li>
                </ul>
              </li><li class="level5">
                    <a href="/apps/app_identity.html" class="level5 ">ç”¨æˆ·è®¤è¯</a>
              </li>
              </ul>
            </li><li class="level4">
                <a class="button level4">
                  <span class="level4">å­˜å‚¨ä¸è·å–æ•°æ®</span>
                  <div class="toggleIndicator level4"></div>
                </a>
              <ul toggleable
                  class="level4 hidden">
              <li class="level5">
                    <a href="/apps/app_storage.html" class="level5 ">å­˜å‚¨ API</a>
              </li>
              </ul>
            </li><li class="level4">
                <a class="button level4">
                  <span class="level4">ä½¿ç”¨ä½çº§ç³»ç»ŸæœåŠ¡</span>
                  <div class="toggleIndicator level4"></div>
                </a>
              <ul toggleable
                  class="level4 hidden">
              <li class="level5">
                    <a href="/apps/app_usb.html" class="level5 ">USB</a>
              </li><li class="level5">
                    <a href="/apps/app_serial.html" class="level5 ">ä¸²è¡Œç«¯å£</a>
              </li><li class="level5">
                    <a href="/apps/app_network.html" class="level5 ">ç½‘ç»œé€šä¿¡</a>
              </li>
              </ul>
            </li><li class="level4">
                <a class="button level4">
                  <span class="level4">ä¸ä¸»æœºå¹³å°äº¤äº’</span>
                  <div class="toggleIndicator level4"></div>
                </a>
              <ul toggleable
                  class="level4 hidden">
              <li class="level5">
                    <a href="/apps/desktop_notifications.html" class="level5 ">ä¸°å¯Œçš„é€šçŸ¥</a>
              </li>
              </ul>
            </li>
            </ul>
          </li>
          </ul>
        </li><li class="level2">
              <span class="level2">å‘å¸ƒ</span>
          <ul 
              class="level2 ">
          <li class="level3">
                <a href="/apps/publish_app.html" class="level3 ">å‘å¸ƒæ‚¨çš„åº”ç”¨</a>
          </li><li class="level3">
              <a class="button level3">
                <span class="level3">é€šè¿‡æ‚¨çš„åº”ç”¨è·åˆ©</span>
                <div class="toggleIndicator level3"></div>
              </a>
            <ul toggleable
                class="level3 hidden">
            <li class="level4">
                  <a href="/apps/google_wallet.html" class="level4 ">ç”¨äºæ•°å­—å•†å“çš„ Google ç”µå­é’±åŒ…</a>
            </li>
            </ul>
          </li><li class="level3">
                <a href="/apps/analytics.html" class="level3 ">Analyticsï¼ˆåˆ†æï¼‰</a>
          </li>
          </ul>
        </li><li class="level2">
              <span class="level2">å‚è€ƒ</span>
          <ul 
              class="level2 ">
          <li class="level3">
                <a href="/apps/api_index.html" class="level3 ">Chrome å¹³å° API</a>
          </li><li class="level3">
                <a href="/apps/tags/webview.html" class="level3 ">Webview æ ‡ç­¾</a>
          </li><li class="level3">
                <a href="/apps/api_other.html" class="level3 ">ç½‘é¡µ API</a>
          </li><li class="level3">
                <a href="/apps/manifest.html" class="level3 ">æ¸…å•æ–‡ä»¶æ ¼å¼</a>
          </li><li class="level3">
                <a href="/apps/app_deprecated.html" class="level3 ">ç¦ç”¨çš„ç½‘é¡µç‰¹æ€§</a>
          </li>
          </ul>
        </li><li class="level2">
              <span class="level2">ç¤ºä¾‹</span>
          <ul 
              class="level2 ">
          <li class="level3">
                <a href="/apps/samples.html" class="level3 ">ç¤ºä¾‹åº”ç”¨</a>
          </li>
          </ul>
        </li><li class="level2">
              <span class="level2">å¸®åŠ©</span>
          <ul 
              class="level2 ">
          <li class="level3">
                <a href="/apps/faq.html" class="level3 ">å¸¸è§é—®é¢˜</a>
          </li><li class="level3">
                <a href="https://groups.google.com/a/chromium.org/forum/#!forum/chromium-apps" class="level3 ">Google ç½‘ä¸Šè®ºå›</a>
          </li><li class="level3">
                <a href="http://stackoverflow.com/questions/tagged/google-chrome-app" class="level3 ">Stack Overflow</a>
          </li>
          </ul>
        </li>
        </ul>
      </div>
      <div id="gc-pagecontent">

<div id="toc">
  <ol>
    <li >
      <a href="#authenticating_with_google"
         data-list-item
         >ä¸ Google è®¤è¯</a>
    </li>
    <li >
      <a href="#integrating_with_a_third_party_service"
         data-list-item
         >ä¸ç¬¬ä¸‰æ–¹æœåŠ¡æ•´åˆ</a>
      <ol>
        <li >
          <a href="#register_with_the_provider"
             data-list-item
             >ä¸æä¾›å•†æ³¨å†Œ</a>
        </li>
        <li >
          <a href="#add_permissions"
             data-list-item
             >æ·»åŠ æƒé™</a>
        </li>
        <li >
          <a href="#add_google_tasks_to_the_todo_list"
             data-list-item
             >å°† Google å·¥ä½œè¡¨æ·»åŠ åˆ°å¾…åŠäº‹é¡¹åˆ—è¡¨</a>
        </li>
        <li >
          <a href="#results"
             data-list-item
             >æ£€æŸ¥ç»“æœ</a>
        </li>
      </ol>
    </li>
    <li >
      <a href="#you_should_also_read"
         data-list-item
         >æ‚¨è¿˜åº”è¯¥é˜…è¯»</a>
    </li>
    <li >
      <a href="#what_39_s_next_"
         data-list-item
         >æ¥ä¸‹æ¥åšä»€ä¹ˆï¼Ÿ</a>
    </li>
  </ol>
</div>

<h1 id="lab_7_user_identity"><!--@Access User's Data-->è®¿é—®ç”¨æˆ·æ•°æ®</h1>

<p><!--@Most modern applications are attached to the web to synchronize data. When synchronizing data, you need to identify who the user is.
Chrome Apps come with an <a href="experimental.identity.html">identity API</a> that makes it easy to integrate either with Google accounts or with any other service that supports OAuth.-->
å¤§éƒ¨åˆ†ç°ä»£åº”ç”¨ç¨‹åºéƒ½ä¸ºäº†åŒæ­¥æ•°æ®è€Œä¾èµ–ç½‘ç»œã€‚åŒæ­¥æ•°æ®æ—¶ï¼Œæ‚¨éœ€è¦ç¡®å®šç”¨æˆ·æ˜¯è°ã€‚Chrome
åº”ç”¨å†…å»º<a href="experimental.identity.html">è®¤è¯ API</a>ï¼Œä½¿æ‚¨æ›´æ–¹ä¾¿åœ°ä¸
Google è´¦æˆ·æˆ–ä»»ä½•å…¶ä»–æ”¯æŒ OAuth çš„æœåŠ¡é›†æˆã€‚
</p>

<ol>
<li> <!--@Built in - Google Authenticiation-->å†…å»º Google è®¤è¯</li>
<li> <!--@Third Party Authentication (Twitter, Foursquare, etc.)-->ç¬¬ä¸‰æ–¹è®¤è¯ï¼ˆTwitterã€Foursquare ç­‰ç­‰ï¼‰</li>
</ol>

<p class="warning"><b><!--@Warning:-->è­¦å‘Šï¼š</b>
<!--@Apps with authentication require the experimental permission in the
<code>manifest.json</code> and, until they came out of experimental state,
they cannot be uploaded to the Chrome Web Store.
If you prefer, you can choose to skip this lab.-->ä½¿ç”¨è®¤è¯çš„åº”ç”¨éœ€è¦åœ¨
<code>manifest.json</code> ä¸­æŒ‡å®š experimental
æƒé™ï¼Œè€Œä¸”åœ¨å®ƒä»¬ä»ç„¶å¤„äºå®éªŒæ€§çŠ¶æ€æ—¶ä¸èƒ½ä¸Šä¼ åˆ° Chrome
ç½‘ä¸Šåº”ç”¨åº—ã€‚å¦‚æœæ‚¨æ„¿æ„çš„è¯ï¼Œæ‚¨å¯ä»¥é€‰æ‹©è·³è¿‡è¿™ä¸€å®éªŒã€‚
</p>

<h2 id="authenticating_with_google"><!--@Authenticating with Google-->ä¸ Google è®¤è¯</h2>

<p><!--@We are working on a very easy integration flow for apps that authenticate with Google accounts. However, this flow is not yet available for general use. In the meantime, you may still use the third-party flow described below, even for Google services.-->
æˆ‘ä»¬æ­£åœ¨å¼€å‘ä¸€ç§å¾ˆç®€å•çš„æ•´åˆæµç¨‹ï¼Œç”¨äºå’Œ Google
è´¦æˆ·è®¤è¯çš„åº”ç”¨ã€‚ç„¶è€Œï¼Œè¯¥æµç¨‹è¿˜ä¸èƒ½ç”¨äºä¸€èˆ¬ç”¨é€”ã€‚åœ¨æ­¤åŒæ—¶ï¼Œæ‚¨ä»ç„¶å¯ä»¥ä½¿ç”¨å¦‚ä¸‹æ‰€è¿°çš„ç¬¬ä¸‰æ–¹æµç¨‹ï¼Œå³ä½¿æ˜¯ç”¨åœ¨
Google æœåŠ¡ä¸Šã€‚
</p>

<h2 id="integrating_with_a_third_party_service"><!--@Integrating with a third-party service-->ä¸ç¬¬ä¸‰æ–¹æœåŠ¡æ•´åˆ</h2>

<p><!--@Chrome Apps have a dedicated API for lauching the authentication flow to any third-party OAuth2 service, called <a href="identity.html#method-launchWebAuthFlow">identity.launchWebAuthFlow</a>.
To show how this flow works, we&#39;re going to update our sample to import <a href="https://developers.google.com/google-apps/tasks/">Google Tasks</a> into the Todo list.-->
Chrome åº”ç”¨æœ‰ä¸€ä¸ªä¸“é—¨çš„ APIï¼Œå¯ä»¥å¯¹ä»»ä½•ç¬¬ä¸‰æ–¹ OAuth2 æœåŠ¡è¿›è¡Œè®¤è¯æµç¨‹ï¼Œç§°ä¸º
<a href="identity.html#method-launchWebAuthFlow">identity.launchWebAuthFlow</a>ã€‚ä¸ºäº†æ¼”ç¤ºè¯¥æµç¨‹çš„å·¥ä½œæ–¹å¼ï¼Œæˆ‘ä»¬å°†æ›´æ–°æˆ‘ä»¬çš„ç¤ºä¾‹ï¼Œå°†
<a href="https://developers.google.com/google-apps/tasks/">Google å·¥ä½œè¡¨</a>
å¼•å…¥åˆ°å¾…åŠäº‹é¡¹åˆ—è¡¨ä¸­ã€‚
</p>

<h3 id="register_with_the_provider"><!--@Register with the provider-->ä¸æä¾›å•†æ³¨å†Œ</h3>

<p><!--@To use a third-party OAuth2 provider, you will first need to register your application with the provider. Each provider has a different way of registering applications, but in general it will be in a section called Developer or API at the provider&#39;s website.-->
è¦ä½¿ç”¨ç¬¬ä¸‰æ–¹ OAuth2 æä¾›å•†ï¼Œæ‚¨é¦–å…ˆéœ€è¦åœ¨æä¾›å•†æ³¨å†Œæ‚¨çš„åº”ç”¨ç¨‹åºã€‚æ¯ä¸€ä¸ªæä¾›å•†éƒ½æœ‰è‡ªå·±çš„æ–¹å¼æ¥æ³¨å†Œåº”ç”¨ç¨‹åºï¼Œä½†æ˜¯å¤§ä½“ä¸Šåº”è¯¥åœ¨æä¾›å•†ç½‘ç«™ä¸Šä¸€ä¸ªç§°ä¸ºå¼€å‘è€…æˆ–
API çš„éƒ¨åˆ†ã€‚
</p>

<p><!--@Here we are treating Google as a third-party service. Just follow Google&#39;s own registration procedure for apps requiring API access below:-->
è¿™é‡Œæˆ‘ä»¬å°† Google è§†ä¸ºç¬¬ä¸‰æ–¹æœåŠ¡ï¼Œåªéœ€è¦éµå¾ª Google è‡ªå·±è¿‡ç¨‹ï¼Œä¸ºéœ€è¦ API
è®¿é—®çš„åº”ç”¨æ³¨å†Œã€‚
</p>

<ol>
<li><!--@Create a new project in the-->åœ¨ <a href="https://code.google.com/apis/console">Google API <!--@console-->æ§åˆ¶å°</a><!--@.-->åˆ›å»ºä¸€ä¸ªæ–°é¡¹ç›®ã€‚</li>
<li><!--@Activate the Tasks API on the Services secion.-->åœ¨ Servicesï¼ˆæœåŠ¡ï¼‰éƒ¨åˆ†æ¿€æ´» Tasksï¼ˆå·¥ä½œè¡¨ï¼‰ APIã€‚</li>
<li><!--@Create a new OAuth2.0 client ID on API Access section. Select Web application and leave other fields unchanged.-->åœ¨ API Access éƒ¨åˆ†åˆ›å»ºä¸€ä¸ªæ–°çš„ OAuth2.0 å®¢æˆ·ç«¯æ ‡è¯†ç¬¦ï¼Œé€‰æ‹© Web applicationï¼Œå…¶ä»–å­—æ®µä¸ç”¨ä¿®æ”¹ã€‚</li>
<li><!--@Click on Edit settings for the newly created client ID.-->åœ¨æ–°åˆ›å»ºçš„å®¢æˆ·ç«¯æ ‡è¯†ç¬¦ä¸Šå•å‡» Edit settingsã€‚</li>
<li><!--@In Authorized Redirect URLs, add <code>https://&lt;YOURAPP_ID&gt;.chromiumapp.org/</code>,
replacing &lt;YOURAPP_ID&gt; with your app ID (this is the app&#39;s long alphanumeric ID you can find in <code>chrome://extensions</code>).-->
åœ¨ Authorized Redirect URLs ä¸­æ·»åŠ 
<code>https://&lt;YOURAPP_ID&gt;.chromiumapp.org/</code>ï¼Œå°†
&lt;YOURAPP_ID&gt;
æ›¿æ¢ä¸ºæ‚¨çš„åº”ç”¨æ ‡è¯†ç¬¦ï¼ˆä¹Ÿå°±æ˜¯ç”±å­—æ¯å’Œæ•°å­—ç»„æˆçš„åº”ç”¨çš„é•¿æ ‡è¯†ç¬¦ï¼Œæ‚¨å¯ä»¥åœ¨
<code>chrome://extensions</code> ä¸­æ‰¾åˆ°ï¼‰ã€‚
</li>
</ol>

<h3 id="add_permissions"><!--@Add permissions-->æ·»åŠ æƒé™</h3>

<p><!--@Update the-->æ›´æ–°
<a href="https://github.com/GoogleChrome/chrome-app-codelab/blob/master/lab7_useridentification/angularjs/manifest.json">AngularJS manifest.json</a> <!--@or-->æˆ–
<a href="https://github.com/GoogleChrome/chrome-app-codelab/blob/master/lab7_useridentification/javascript/manifest.json">JavaScript manifest.json</a>
<!--@to use &quot;experimental&quot; features.
Note that we&#39;ve also requested permission
to make XHR requests to the Tasks service URL - for security reasons,
you need to request explicit permission in the manifest for every URL you will call via XHR.-->
ä½¿ç”¨å®éªŒæ€§çš„ç‰¹æ€§ã€‚æ³¨æ„æˆ‘ä»¬ä¹Ÿè¯·æ±‚äº†å‘å·¥ä½œè¡¨æœåŠ¡ URL å‘å‡º XHR
è¯·æ±‚çš„æƒé™ï¼Œå‡ºäºå®‰å…¨åŸå› ï¼Œæ‚¨éœ€è¦åœ¨æ¸…å•æ–‡ä»¶ä¸­ä¸ºæ‚¨éœ€è¦é€šè¿‡ XHR è°ƒç”¨çš„æ¯ä¸€ä¸ª
URL æ˜ç¡®è¯·æ±‚æƒé™ã€‚
</p>

<pre data-filename="manifest.json">
{
     ... ,
     &quot;permissions&quot;: [&quot;storage&quot;, &quot;experimental&quot;, &quot;https://www.googleapis.com/tasks/*&quot;]
}
</pre>

<h3 id="add_google_tasks_to_the_todo_list"><!--@Add Google tasks to the Todo list-->å°† Google å·¥ä½œè¡¨æ·»åŠ åˆ°å¾…åŠäº‹é¡¹åˆ—è¡¨</h3>

<p><!--@Now we are ready to ask user&#39;s authorization, so we can connect to the Tasks service and import his tasks into our Todo list. First, we will need to request an access token - which, at the first run will automatically pops up an authentication and authorization window to the user.
Once we have this token, we are able to call the Google Tasks API directly.-->
ç°åœ¨æˆ‘ä»¬å·²ç»å‡†å¤‡å¥½è¯·æ±‚ç”¨æˆ·è®¤è¯ï¼Œä»¥ä¾¿è¿æ¥åˆ°å·¥ä½œè¡¨æœåŠ¡ï¼Œå¹¶å°†å·¥ä½œè¡¨å¯¼å…¥æˆ‘ä»¬çš„å¾…åŠäº‹é¡¹åˆ—è¡¨ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦è¯·æ±‚è®¿é—®ä»¤ç‰Œï¼Œç¬¬ä¸€æ¬¡è¿è¡Œæ—¶ä¼šè‡ªåŠ¨å‘ç”¨æˆ·å¼¹å‡ºè®¤è¯å’Œæˆæƒçª—å£ã€‚ä¸€æ—¦æˆ‘ä»¬æ‹¥æœ‰äº†è¿™ä¸€ä»¤ç‰Œï¼Œæˆ‘ä»¬å°±èƒ½ç›´æ¥è°ƒç”¨ Google å·¥ä½œè¡¨ API äº†ã€‚
</p>

<ol>
<li><p><!--@Since this is time consuming and error prone, you can cheat and copy our JavaScript that handles the authentication to the Google Tasks API from here: <a href="https://github.com/GoogleChrome/chrome-app-codelab/blob/master/lab7_useridentification/angularjs/gapi_tasks.js">Angular gapi_tasks.js</a>
and <a href="https://github.com/GoogleChrome/chrome-app-codelab/blob/master/lab7_useridentification/javascript/gapi_tasks.js">JavaScript gapi_tasks.js</a> are the same.
This script calls <code>launchWebFlow</code> and
gets a valid access token for the specified client ID.
It also has simple JavaScript methods that, after authenticated,
goes to the Tasks API and gets the user&#39;s task lists and the corresponding tasks. -->
ç”±äºè¿™ä¸€éƒ¨åˆ†å¾ˆè´¹æ—¶é—´ï¼Œè€Œä¸”å®¹æ˜“å‡ºé”™ï¼Œæ‚¨å¯ä»¥ç›´æ¥ä»è¿™é‡Œå¤åˆ¶æˆ‘ä»¬ç”¨æ¥å¤„ç†
Google å·¥ä½œè¡¨ API è®¤è¯çš„
JavaScriptï¼š<a href="https://github.com/GoogleChrome/chrome-app-codelab/blob/master/lab7_useridentification/angularjs/gapi_tasks.js">Angular gapi_tasks.js</a>
å’Œ
<a href="https://github.com/GoogleChrome/chrome-app-codelab/blob/master/lab7_useridentification/javascript/gapi_tasks.js">JavaScript gapi_tasks.js</a>
æ˜¯ä¸€æ ·çš„ã€‚è¯¥è„šæœ¬è°ƒç”¨
<code>launchWebFlow</code>
å¹¶ä¸ºæŒ‡å®šçš„å®¢æˆ·ç«¯æ ‡è¯†ç¬¦è·å–æœ‰æ•ˆçš„è®¿é—®ä»¤ç‰Œã€‚å®ƒè¿˜æœ‰ä¸€äº›ç®€å•çš„ JavaScript
æ–¹æ³•ï¼Œå¯ä»¥åœ¨è®¤è¯åè¿›å…¥å·¥ä½œè¡¨ APIï¼Œå¹¶è·å–ç”¨æˆ·çš„ä»»åŠ¡åˆ—è¡¨ä»¥åŠå¯¹åº”çš„ä»»åŠ¡ã€‚
</p>

<p class="note"><b><!--@Note:-->æ³¨æ„ï¼š</b><!--@ This script is NOT intented to be used in production - it is just a very simple, limited and definitely not robust piece of code intented to highlight the basic authentication and API calls.-->è¯¥è„šæœ¬<em>å¹¶é</em>ç”¨äºäº§å“ä¸­çš„ï¼Œå®ƒåªæ˜¯ä¸€æ®µå¾ˆç®€å•ã€å¾ˆæœ‰é™è€Œä¸”è‚¯å®šä¸å¥å£®çš„ä»£ç ï¼Œä»…ä»…æ˜¯ä¸ºäº†çªå‡ºåŸºæœ¬è®¤è¯è¿‡ç¨‹å’Œ API è°ƒç”¨ã€‚</p></li>
<li><p><!--@Add a new method to the existing-->å‘ç°æœ‰çš„
<a href="https://github.com/GoogleChrome/chrome-app-codelab/blob/master/lab7_useridentification/angularjs/controller.js">AngularJS controller.js</a> <!--@or-->æˆ–
<a href="https://github.com/GoogleChrome/chrome-app-codelab/blob/master/lab7_useridentification/javascript/controller.js">JavaScript controller.js</a><!--@that,
using the methods from the script of the previous step,
authenticates the user and imports his Google tasks into the Todo list:-->
æ·»åŠ ä¸€ä¸ªæ–°æ–¹æ³•ï¼Œä½¿ç”¨å‰ä¸€æ­¥è„šæœ¬ä¸­çš„æ–¹æ³•è®¤è¯ç”¨æˆ·å¹¶å°†ä»–çš„ Google
ä»»åŠ¡å¯¼å…¥å¾…åŠäº‹é¡¹åˆ—è¡¨ï¼š
</p>

<tabs data-group="source">

  <header tabindex="0" data-value="angular">Angular</header>
  <header tabindex="0" data-value="js">JavaScript</header>

  <content>
    <pre data-filename="controller.js">
$scope.importFromGTasks = function() {
  var api = new TasksAPI();
  var clientId = &quot;&lt;GET_YOURS_AT_https://code.google.com/apis/console&gt;&quot;;
  api.authenticate(clientId, function() {
    api.getLists(function(result) {
      console.log(result);
      if (!result || !result.items || result.items.length==0) {
        throw &quot;No task lists available&quot;;
      }
      var listId=result.items[0].id;
      api.getTasks(listId, function(tasks) {
        console.log(tasks);
        for (var j=0; j&lt;tasks.items.length; j++) {
          $scope.$apply(function() {
            $scope.todos.push({text:tasks.items[j].title, done:tasks.items[j].status!=&quot;needsAction&quot;});
          });
        }
      });
    });
  });
}
    </pre>
  </content>
  <content>
    <pre data-filename="controller.js">
document.getElementById('importGTasks').addEventListener('click',
    function() {
  var api = new TasksAPI();
  var clientId = &quot;&lt;GET_YOURS_AT_https://code.google.com/apis/console&gt;&quot;;
  api.authenticate(clientId, function() {
    api.getLists(function(result) {
      console.log(result);
      if (!result || !result.items || result.items.length==0) {
        throw "No task lists available";
      }
      var listId=result.items[0].id;
      api.getTasks(listId, function(tasks) {
        console.log(tasks);
        for (var j=0; j&lt;tasks.items.length; j++) {
          model.addTodo(tasks.items[j].title, tasks.items[j].status!='needsAction');
        }
      });
    });
  });
});
    </pre>

</tabs>

<p><!--@Replace the following line in the code above:-->
å°†ä»¥ä¸Šä»£ç çš„ä¸‹é¢å‡ è¡Œï¼š
<pre data-filename="controller.js">
  var clientId = &quot;&lt;GET_YOURS_AT_https://code.google.com/apis/console&gt;&quot;;
</pre>
<!--@with your own project&#39;s Client ID that you got from the Google API Console.
Should look like this:-->
æ›¿æ¢ä¸ºæ‚¨è‡ªå·±çš„é¡¹ç›®åœ¨ Google API å®¢æˆ·ç«¯è·å¾—çš„å®¢æˆ·ç«¯æ ‡è¯†ç¬¦ï¼Œåº”è¯¥å¦‚ä¸‹æ‰€ç¤ºï¼š
<pre data-filename="controller.js">
  var clientId = &quot;xxxxxxxxxxxxxx.apps.googleusercontent.com&quot;;
</pre></p></li>
<li><p><!--@Now we just need a button that starts the import process. Update the <code>index.html</code> to include <code>gapi_tasks.js</code> and add a new button to call <code>importFromGTasks</code>:-->
ç°åœ¨æˆ‘ä»¬åªéœ€è¦ä¸€ä¸ªæŒ‰é’®ï¼Œå¼€å§‹å¯¼å…¥è¿‡ç¨‹ã€‚æ›´æ–° <code>index.html</code>
åŒ…å« <code>gapi_tasks.js</code>ï¼Œå¹¶æ·»åŠ ä¸€ä¸ªæ–°çš„æŒ‰é’®ï¼Œè°ƒç”¨
<code>importFromGTasks</code>ï¼š
</p>

<tabs data-group="source">

  <header tabindex="0" data-value="angular">Angular</header>
  <header tabindex="0" data-value="js">JavaScript</header>

  <content>
    <pre data-filename="index.html">
&lt;script src=&quot;gapi_tasks.js&quot;&gt;&lt;/script&gt;
...
&lt;button ng-click=&quot;importFromGTasks()&quot;&gt;import tasks from GTasks&lt;/button&gt;
    </pre>
  </content>
  <content>
    <pre data-filename="index.html">
&lt;button id="importGTasks"&gt;import tasks from GTasks&lt;/button&gt;
...
&lt;script src="gapi_tasks.js"&gt;&lt;/script&gt;
    </pre>
  </content>

</tabs></li>
</ol>

<h3 id="results"><!--@Check the results-->æ£€æŸ¥ç»“æœ</h3>

<p><!--@If you get stuck and want to see the app in action,
go to -->
å¦‚æœæ‚¨é‡åˆ°äº†å›°éš¾ï¼Œå¸Œæœ›ç«‹åˆ»çœ‹åˆ°ä¿®æ”¹åçš„åº”ç”¨ï¼Œè¯·è¿›å…¥
<code>chrome://extensions</code><!--@,
load the unpacked-->ï¼ŒåŠ è½½æœªæ‰“åŒ…çš„
<a href="https://github.com/GoogleChrome/chrome-app-codelab/tree/master/lab7_useridentification/angularjs">AngularJS <!--@app-->åº”ç”¨</a> <!--@or-->æˆ–
<a href="https://github.com/GoogleChrome/chrome-app-codelab/tree/master/lab7_useridentification/javascript">JavaScript <!--@app-->åº”ç”¨</a><!--@,
and launch the app from a new tab.-->ï¼Œå¹¶ä»æ–°æ ‡ç­¾é¡µä¸­è¿è¡Œåº”ç”¨ã€‚
</p>

<h2 id="you_should_also_read"><!--@You should also read-->æ‚¨è¿˜åº”è¯¥é˜…è¯»</h2>
<p><a href="app_identity.html"><!--@Identify User-->è®¤è¯ç”¨æˆ·</a><!--@ tutorial-->æ•™ç¨‹</p>

<h2 id="what_39_s_next_"><!--@What&#39;s next?-->æ¥ä¸‹æ¥åšä»€ä¹ˆï¼Ÿ</h2>

<p><!--@In-->åœ¨ <a href="app_codelab8_webresources.html">7 - <!--@Access Web Resources-->è®¿é—®ç½‘ç»œèµ„æº</a><!--@,
you will learn how to load and show images from a remote URL.-->
ä¸­ï¼Œæ‚¨å°†ä¼šå­¦ä¹ å¦‚ä½•åŠ è½½å¹¶æ˜¾ç¤ºæ¥è‡ªè¿œç¨‹ URL çš„å›¾ç‰‡ã€‚
</p>

<p class="note"><b><!--@Note:-->æ³¨æ„ï¼š</b><!--@  Up until now, the code in each lab builds upon the previous lab code sample.
We&#39;ve decided not to include the user identification code changes in the remainder of the lab since the <code>identity API</code> is still experimental and as such it would prevent you from publishing your final code to the Chrome Web Store.-->ç›´åˆ°ç°åœ¨ï¼Œæ¯ä¸€ä¸ªå®éªŒä¸­çš„ä»£ç éƒ½åŸºäºå‰ä¸€ä¸ªå®éªŒçš„ä»£ç ç¤ºä¾‹å»ºç«‹ã€‚æˆ‘ä»¬å†³å®šä¸å°†ç”¨æˆ·è®¤è¯ä»£ç çš„æ›´æ”¹åŒ…å«åœ¨å‰©ä¸‹çš„å®éªŒä¸­ï¼Œå› ä¸ºè®¤è¯
API è¿˜æ˜¯å®éªŒæ€§çš„ï¼Œè¿™æ ·ä¼šé˜»æ­¢æ‚¨å°†æ‚¨çš„æœ€ç»ˆä»£ç å‘å¸ƒåˆ° Chrome ç½‘ä¸Šåº”ç”¨åº—ã€‚</p>
      </div>
    </div>
  </body>

  <div id="gc-footer">
    <button class="google-button" id="scroll-to-top">â†‘</button>
    <button class="google-button" id="send-feedback" style="display:none">Send Feedback</button>
    <div class="text">
      <p>
        <!--@Except as otherwise <a href="http://code.google.com/policies.html#restrictions">noted</a>,
        the content of this page is licensed under the <a rel="license" href="http://creativecommons.org/licenses/by/3.0/">Creative Commons
        Attribution 3.0 License</a>, and code samples are licensed under the
        <a rel="license" href="http://code.google.com/google_bsd_license.html">BSD License</a>.-->
        è¯¥é¡µé¢ç¿»è¯‘è‡ª
        <a href="https://developer.chrome.com/extensions/">Google Chrome Extensions</a>
        ä¸
        <a href="https://developer.chrome.com/apps/">Google Chrome Apps</a>ã€‚é™¤éç‰¹åˆ«<a href="https://code.google.com/policies.html#restrictions">è¯´æ˜</a>ï¼Œè¯¥é¡µé¢çš„å†…å®¹éµå¾ª
        <a rel="license" href="http://creativecommons.org/licenses/by/3.0/">Creative Commons Attribution 3.0
        License</a>ï¼Œä»£ç ç¤ºä¾‹éµå¾ª
        <a rel="license" href="http://code.google.com/google_bsd_license.html">BSD License</a>ã€‚
      </p>
      <p class="crxdoczh-footer">
        <a href="https://code.google.com/p/crxdoczh/">crxdoczh é¡¹ç›®ä¸»é¡µ</a>
        <a href="https://code.google.com/p/crxdoczh/issues/entry?template=%E7%BD%91%E7%AB%99%E5%8F%8D%E9%A6%88">å‘é€åé¦ˆ</a>
        <a href="https:////plus.google.com/112419687097816423998?prsrc=3" rel="publisher">
          Google+ é¡µé¢
        </a>
        <a href="https://plus.google.com/communities/105384952265487436177">Google+ ç¤¾ç¾¤</a>
      </p>
      <script src="https://developer.chrome.com/static/js/platform_chooser.js" type="text/javascript"></script>
      <script src="https://developer.chrome.com/static/js/popup.js" type="text/javascript"></script>
      <script src="https://developer.chrome.com/static/js/prettify.js" type="text/javascript"></script>
      <script src="https://developer.chrome.com/static/js/scroll.js" type="text/javascript"></script>
      <script src="https://developer.chrome.com/static/js/sidebar.js" type="text/javascript"></script>
      <script src="https://developer.chrome.com/static/js/tabs.js" type="text/javascript"></script>
      <script>
        (function() {
          // Auto syntax highlight all pre tags.
          var preElements = document.getElementsByTagName('pre');
          for (var i = 0; i < preElements.length; i++) {
            var preElement = preElements[i];
            preElement.classList.add('prettyprint');
            var datasetFilename = preElement.getAttribute('data-filename');
            if (datasetFilename) {
              var filename = document.createElement('div');
              filename.className = 'filename nocode';
              filename.textContent = datasetFilename;
              preElement.insertBefore(filename, preElement.firstChild);
            }
          }
          prettyPrint();
        })();

        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-25062424-1']);
        _gaq.push(['_trackPageview']);

        (function() {
          var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
          ga.src = 'https://ssl.google-analytics.com/ga.js';
          var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();

        window.___gcfg = {
      Â  Â  lang: 'zh-CN'
      Â  };
      Â  (function() {
      Â  Â  var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
      Â  Â  po.src = 'https://apis.google.com/js/plusone.js';
      Â  Â  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
      Â  })();
      </script>
    </div>
  </div>
</html>
