<!DOCTYPE html>
<html>
  <head>
    <title>åˆ›å»º MVC - Google Chrome åº”ç”¨å¼€å‘æ–‡æ¡£ï¼ˆéå®˜æ–¹ä¸­æ–‡ç‰ˆï¼‰</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link href="/static/css/site.css" rel="stylesheet" type="text/css">
    <link href="https://developer.chrome.com/static/css/print.css" rel="stylesheet" type="text/css" media="print">
    <link href="https://developer.chrome.com/static/css/prettify.css" rel="stylesheet" type="text/css">
    <link href='//fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
  </head>

  <body>


<!-- Copyright © 2005. Spidersoft Ltd -->
<style>
A.applink:hover {border: 2px dotted #DCE6F4;padding:2px;background-color:#ffff00;color:green;text-decoration:none}
A.applink       {border: 2px dotted #DCE6F4;padding:2px;color:#2F5BFF;background:transparent;text-decoration:none}
A.info          {color:#2F5BFF;background:transparent;text-decoration:none}
A.info:hover    {color:green;background:transparent;text-decoration:underline}
</style>
<div style='BORDER: 1px solid #DCE6F4; MARGIN-TOP: 20px; MARGIN-BOTTOM: 20px; MARGIN-LEFT: 5px; MARGIN-RIGHT: 5px; PADDING: 5px; BACKGROUND-COLOR: #eef8ff;line-height:180%; COLOR: #000000; font-family: Arial; font-size: 8pt; width=100%; FILTER: progid:DXImageTransform.Microsoft.Gradient(GradientType=0, StartColorStr="#FFFFFFFF", EndColorStr="#F2F5FAFF");'>
This page was saved using <a class="applink" href="http://www.spidersoft.com"><b>WebZIP 7.0.3.1030</b></a> <a class="applink" href="http://www.spidersoft.com"><b>offline browser</b></a>  on  12/24/13 11:31:37.<br>
<b>Address:</b> <a class="info" href="https://crxdoc-zh.appspot.com/apps/app_codelab3_mvc.html">https://crxdoc-zh.appspot.com/apps/app_codelab3_mvc.html</a><br>
<b>Title:</b> åˆ›å»º MVC - Google Chrome åº”ç”¨å¼€å‘æ–‡æ¡£ï¼ˆéå®˜æ–¹ä¸­æ–‡ç‰ˆï¼‰ &nbsp;&bull;&nbsp; <b>Size:</b> 35581<br></div>
<!-- /Copyright © 2005. Spidersoft Ltd -->


    <div id="gc-topnav">
      <table><tr>
      <td id="chrome-logo">
        <a href="/apps/" title="Google Chrome åº”ç”¨" id="view-original">
          <img src="https://developer.chrome.com/static/images/chrome-logo.png" alt=""> chrome
        </a>
        <script type="text/javascript">
          document.getElementById('view-original').href = "https://developer.chrome.com" + location.pathname;
        </script>
        <div id="platform-chooser">
          <button id="platform-chooser-toggle" data-menu="platform-chooser-popup">
            åº”ç”¨ &#x25be;&#x202F;
          </button>
          <div id="platform-chooser-popup">
            <button class="apps" data-href="/apps/about_apps.html"><!--@apps-->åº”ç”¨</button>
            <button class="extensions" data-href="/extensions"><!--@extensions-->æ‰©å±•ç¨‹åº</button>
          </div>
        </div>ï¼ˆéå®˜æ–¹ä¸­æ–‡ç‰ˆï¼‰
      </td>
      <td>
        <ul>
          <li>
            <a href="/apps/samples.html"
               title="ç¤ºä¾‹ åº”ç”¨ï¼ˆåŒ…å«æºä»£ç ï¼‰"><!--@Samples-->ç¤ºä¾‹</a>
          </li>
          <li>
            <a href="http://groups.google.com/a/chromium.org/group/chromium-apps"
               title="Google Chrome åº”ç”¨å¼€å‘è€…è®ºå›"
               target="_blank"><!--@Group-->è®ºå›ï¼ˆè‹±æ–‡ï¼‰</a>
          </li>
          <li>
            <a href="http://stackoverflow.com/tags/google-chrome-app/info"
               title="Stack Overflow ä¸Šçš„ [google-chrome-app] æ ‡ç­¾"
               target="_blank">Stack overflow</a>
          </li>
        </ul>
      </td>
      </tr></table>
    </div>
    <div id="gc-topnav-space"></div>
    <div id="gc-container">
      <div id="gc-sidebar">
        <g:plusone></g:plusone>
        <ul 
            class="level1 ">
        <li class="level2">
              <span class="level2">å‘ç°</span>
          <ul 
              class="level2 ">
          <li class="level3">
                <a href="/apps/about_apps.html" class="level3 ">ä»€ä¹ˆæ˜¯ Chrome åº”ç”¨ï¼Ÿ</a>
          </li>
          </ul>
        </li><li class="level2">
              <span class="level2">å¼€å‘</span>
          <ul 
              class="level2 ">
          <li class="level3">
                <a href="/apps/first_app.html" class="level3 ">åˆ›å»ºæ‚¨çš„ç¬¬ä¸€ä¸ªåº”ç”¨</a>
          </li><li class="level3">
              <a class="button level3">
                <span class="level3">æ•™ç¨‹</span>
                <div class="toggleIndicator level3 toggled"></div>
              </a>
            <ul toggleable
                class="level3 ">
            <li class="level4">
                <a class="button level4">
                  <span class="level4">é€šè¿‡ä»£ç å®éªŒå®¤å­¦ä¹ </span>
                  <div class="toggleIndicator level4 toggled"></div>
                </a>
              <ul toggleable
                  class="level4 ">
              <li class="level5">
                    <a href="/apps/app_codelab.html" class="level5 ">å…³äºä»£ç å®éªŒå®¤</a>
              </li><li class="level5">
                    <a href="/apps/app_codelab1_setup.html" class="level5 ">1ã€è®¾ç½®å¼€å‘ç¯å¢ƒ</a>
              </li><li class="level5">
                    <a href="/apps/app_codelab2_basic.html" class="level5 ">2ã€åˆ›å»ºåŸºæœ¬çš„åº”ç”¨</a>
              </li><li class="level5">
                    <a  class="level5 selected">3ã€åˆ›å»º MVC</a>
              </li><li class="level5">
                    <a href="/apps/app_codelab5_data.html" class="level5 ">4ã€ä¿å­˜å’Œè·å–æ•°æ®</a>
              </li><li class="level5">
                    <a href="/apps/app_codelab6_lifecycle.html" class="level5 ">5ã€ç®¡ç†åº”ç”¨çš„ç”Ÿå‘½å‘¨æœŸ</a>
              </li><li class="level5">
                    <a href="/apps/app_codelab7_useridentification.html" class="level5 ">6ã€è®¿é—®ç”¨æˆ·æ•°æ®</a>
              </li><li class="level5">
                    <a href="/apps/app_codelab8_webresources.html" class="level5 ">7ã€è®¿é—®ç½‘ç»œèµ„æº</a>
              </li><li class="level5">
                    <a href="/apps/app_codelab_10_publishing.html" class="level5 ">8ã€å‘å¸ƒåº”ç”¨</a>
              </li>
              </ul>
            </li><li class="level4">
                <a class="button level4">
                  <span class="level4">MVC æ¶æ„ä¸æ¡†æ¶</span>
                  <div class="toggleIndicator level4"></div>
                </a>
              <ul toggleable
                  class="level4 hidden">
              <li class="level5">
                    <a href="/apps/app_frameworks.html" class="level5 ">å…³äº MVC æ¶æ„</a>
              </li><li class="level5">
                    <a href="/apps/angular_framework.html" class="level5 ">ç”¨ AngularJS å»ºç«‹åº”ç”¨</a>
              </li><li class="level5">
                    <a href="/apps/sencha_framework.html" class="level5 ">ç”¨ Sencha Ext JS å»ºç«‹åº”ç”¨</a>
              </li>
              </ul>
            </li>
            </ul>
          </li><li class="level3">
              <a class="button level3">
                <span class="level3">Chrome åº”ç”¨çš„æ¦‚å¿µ</span>
                <div class="toggleIndicator level3"></div>
              </a>
            <ul toggleable
                class="level3 hidden">
            <li class="level4">
                <a class="button level4">
                  <span class="level4">åŸºç¡€çŸ¥è¯†</span>
                  <div class="toggleIndicator level4"></div>
                </a>
              <ul toggleable
                  class="level4 hidden">
              <li class="level5">
                    <a href="/apps/app_architecture.html" class="level5 ">åº”ç”¨çš„æ¶æ„</a>
              </li><li class="level5">
                    <a href="/apps/app_lifecycle.html" class="level5 ">åº”ç”¨çš„ç”Ÿå‘½å‘¨æœŸ</a>
              </li><li class="level5">
                    <a href="/apps/offline_apps.html" class="level5 ">é¦–å…ˆè€ƒè™‘ç¦»çº¿</a>
              </li><li class="level5">
                    <a href="/apps/app_external.html" class="level5 ">å¤–éƒ¨å†…å®¹</a>
              </li>
              </ul>
            </li><li class="level4">
                <a class="button level4">
                  <span class="level4">å®‰å…¨æ€§</span>
                  <div class="toggleIndicator level4"></div>
                </a>
              <ul toggleable
                  class="level4 hidden">
              <li class="level5">
                    <a href="/apps/contentSecurityPolicy.html" class="level5 ">å†…å®¹å®‰å…¨ç­–ç•¥</a>
              </li>
              </ul>
            </li><li class="level4">
                <a class="button level4">
                  <span class="level4">å°†æ‚¨çš„åº”ç”¨ä¸äº‘ç«¯ç»“åˆ</span>
                  <div class="toggleIndicator level4"></div>
                </a>
              <ul toggleable
                  class="level4 hidden">
              <li class="level5">
                  <a class="button level5">
                    <span class="level5">äº‘æ¶ˆæ¯æœåŠ¡</span>
                    <div class="toggleIndicator level5"></div>
                  </a>
                <ul toggleable
                    class="level5 hidden">
                <li class="level6">
                      <a href="/apps/cloudMessaging.html" class="level6 ">å…³äºäº‘æ¶ˆæ¯æœåŠ¡</a>
                </li><li class="level6">
                      <a href="/apps/pushMessaging.html" class="level6 ">å®¢æˆ·ç«¯å‚è€ƒ</a>
                </li><li class="level6">
                      <a href="/apps/gcm_server.html" class="level6 ">æœåŠ¡å‚è€ƒ</a>
                </li><li class="level6">
                      <a href="/apps/gcm_tos.html" class="level6 ">æœåŠ¡æ¡æ¬¾</a>
                </li>
                </ul>
              </li><li class="level5">
                  <a class="button level5">
                    <span class="level5">äº‘å­˜å‚¨æœåŠ¡</span>
                    <div class="toggleIndicator level5"></div>
                  </a>
                <ul toggleable
                    class="level5 hidden">
                <li class="level6">
                      <a href="/apps/storage.html" class="level6 ">chrome.storage</a>
                </li>
                </ul>
              </li><li class="level5">
                    <a href="/apps/app_identity.html" class="level5 ">ç”¨æˆ·è®¤è¯</a>
              </li>
              </ul>
            </li><li class="level4">
                <a class="button level4">
                  <span class="level4">å­˜å‚¨ä¸è·å–æ•°æ®</span>
                  <div class="toggleIndicator level4"></div>
                </a>
              <ul toggleable
                  class="level4 hidden">
              <li class="level5">
                    <a href="/apps/app_storage.html" class="level5 ">å­˜å‚¨ API</a>
              </li>
              </ul>
            </li><li class="level4">
                <a class="button level4">
                  <span class="level4">ä½¿ç”¨ä½çº§ç³»ç»ŸæœåŠ¡</span>
                  <div class="toggleIndicator level4"></div>
                </a>
              <ul toggleable
                  class="level4 hidden">
              <li class="level5">
                    <a href="/apps/app_usb.html" class="level5 ">USB</a>
              </li><li class="level5">
                    <a href="/apps/app_serial.html" class="level5 ">ä¸²è¡Œç«¯å£</a>
              </li><li class="level5">
                    <a href="/apps/app_network.html" class="level5 ">ç½‘ç»œé€šä¿¡</a>
              </li>
              </ul>
            </li><li class="level4">
                <a class="button level4">
                  <span class="level4">ä¸ä¸»æœºå¹³å°äº¤äº’</span>
                  <div class="toggleIndicator level4"></div>
                </a>
              <ul toggleable
                  class="level4 hidden">
              <li class="level5">
                    <a href="/apps/desktop_notifications.html" class="level5 ">ä¸°å¯Œçš„é€šçŸ¥</a>
              </li>
              </ul>
            </li>
            </ul>
          </li>
          </ul>
        </li><li class="level2">
              <span class="level2">å‘å¸ƒ</span>
          <ul 
              class="level2 ">
          <li class="level3">
                <a href="/apps/publish_app.html" class="level3 ">å‘å¸ƒæ‚¨çš„åº”ç”¨</a>
          </li><li class="level3">
              <a class="button level3">
                <span class="level3">é€šè¿‡æ‚¨çš„åº”ç”¨è·åˆ©</span>
                <div class="toggleIndicator level3"></div>
              </a>
            <ul toggleable
                class="level3 hidden">
            <li class="level4">
                  <a href="/apps/google_wallet.html" class="level4 ">ç”¨äºæ•°å­—å•†å“çš„ Google ç”µå­é’±åŒ…</a>
            </li>
            </ul>
          </li><li class="level3">
                <a href="/apps/analytics.html" class="level3 ">Analyticsï¼ˆåˆ†æï¼‰</a>
          </li>
          </ul>
        </li><li class="level2">
              <span class="level2">å‚è€ƒ</span>
          <ul 
              class="level2 ">
          <li class="level3">
                <a href="/apps/api_index.html" class="level3 ">Chrome å¹³å° API</a>
          </li><li class="level3">
                <a href="/apps/tags/webview.html" class="level3 ">Webview æ ‡ç­¾</a>
          </li><li class="level3">
                <a href="/apps/api_other.html" class="level3 ">ç½‘é¡µ API</a>
          </li><li class="level3">
                <a href="/apps/manifest.html" class="level3 ">æ¸…å•æ–‡ä»¶æ ¼å¼</a>
          </li><li class="level3">
                <a href="/apps/app_deprecated.html" class="level3 ">ç¦ç”¨çš„ç½‘é¡µç‰¹æ€§</a>
          </li>
          </ul>
        </li><li class="level2">
              <span class="level2">ç¤ºä¾‹</span>
          <ul 
              class="level2 ">
          <li class="level3">
                <a href="/apps/samples.html" class="level3 ">ç¤ºä¾‹åº”ç”¨</a>
          </li>
          </ul>
        </li><li class="level2">
              <span class="level2">å¸®åŠ©</span>
          <ul 
              class="level2 ">
          <li class="level3">
                <a href="/apps/faq.html" class="level3 ">å¸¸è§é—®é¢˜</a>
          </li><li class="level3">
                <a href="https://groups.google.com/a/chromium.org/forum/#!forum/chromium-apps" class="level3 ">Google ç½‘ä¸Šè®ºå›</a>
          </li><li class="level3">
                <a href="http://stackoverflow.com/questions/tagged/google-chrome-app" class="level3 ">Stack Overflow</a>
          </li>
          </ul>
        </li>
        </ul>
      </div>
      <div id="gc-pagecontent">

<div id="toc">
  <ol>
    <li >
      <a href="#simple"
         data-list-item
         >åˆ›å»ºç®€å•è§†å›¾</a>
      <ol>
        <li >
          <a href="#basic-mvc"
             data-list-item
             >æ·»åŠ  MVC çš„åŸºæœ¬å†…å®¹</a>
        </li>
        <li >
          <a href="#update-view"
             data-list-item
             >æ›´æ–°è§†å›¾</a>
        </li>
        <li >
          <a href="#stylesheet"
             data-list-item
             >æ·»åŠ æ ·å¼è¡¨</a>
        </li>
        <li >
          <a href="#check1"
             data-list-item
             >æ£€æŸ¥ç»“æœ</a>
        </li>
      </ol>
    </li>
    <li >
      <a href="#real-todo"
         data-list-item
         >åˆ›å»ºçœŸæ­£çš„å¾…åŠäº‹é¡¹åˆ—è¡¨</a>
      <ol>
        <li >
          <a href="#controller"
             data-list-item
             >æ·»åŠ æ§åˆ¶å™¨</a>
        </li>
        <li >
          <a href="#index"
             data-list-item
             >æ›´æ–°è§†å›¾</a>
        </li>
        <li >
          <a href="#check2"
             data-list-item
             >æ£€æŸ¥ç»“æœ</a>
        </li>
      </ol>
    </li>
    <li >
      <a href="#takeaways_"
         data-list-item
         >æ›´å¤šä¿¡æ¯</a>
    </li>
    <li >
      <a href="#you_should_also_read"
         data-list-item
         >æ‚¨è¿˜åº”è¯¥é˜…è¯»</a>
    </li>
    <li >
      <a href="#what_39_s_next_"
         data-list-item
         >æ¥ä¸‹æ¥åšä»€ä¹ˆï¼Ÿ</a>
    </li>
  </ol>
</div>

<h1 id="lab_3_model_view_controller"><!--@Create-->åˆ›å»º MVC</h1>

<p><!--@Whenever your application grows beyond a single script with a few dozen lines,
it gets harder and harder to manage without a good separation
of roles among app components.
One of the most common models for structuring a complex application,
no matter what language, is the Model-View-Controller (MVC) and its variants,
like Model-View-Presentation (MVP).-->
å½“æ‚¨çš„åº”ç”¨çš„è§„æ¨¡è¶…å‡ºä¸€ä¸ªå‡ åè¡Œçš„è„šæœ¬æ—¶ï¼Œå¦‚æœåº”ç”¨çš„ç»„æˆéƒ¨åˆ†ä¹‹é—´æ²¡æœ‰è‰¯å¥½çš„è§’è‰²åˆ†ç¦»ï¼Œç®¡ç†èµ·æ¥å°±è¶Šå‘çš„å›°éš¾ã€‚æ— è®ºä½¿ç”¨å“ªç§è¯­è¨€ï¼Œç»„ç»‡å¤æ‚åº”ç”¨çš„ä¸€ç§æœ€å¸¸è§çš„æ¨¡å‹æ˜¯â€œæ¨¡å‹-è§†å›¾-æ§åˆ¶å™¨â€ï¼ˆMVCï¼‰åŠå…¶å˜ä½“ï¼Œå¦‚â€œæ¨¡å‹-è§†å›¾-å±•ç¤ºï¼ˆMVPï¼‰â€ã€‚
</p>

<p><!--@There are several frameworks to help apply
<a href="app_frameworks.html">MVC concepts</a>
to a Javascript application, and most of them,
as long as they are CSP compliant, can be used in a Chrome App.
In this lab,
we'll add an MVC model using both pure JavaScript and
the <a href="http://angularjs.org/">AngularJS</a> framework.
Most of the AngularJS code from this section was copied,
with small changes, from the AngularJS Todo tutorial.-->
æœ‰å¥½å‡ ç§æ¡†æ¶èƒ½å¤Ÿå¸®åŠ©æ‚¨å°† <a href="app_frameworks.html">MVC æ¦‚å¿µ</a>åº”ç”¨åˆ°
JavaScript åº”ç”¨ç¨‹åºä¸Šï¼Œå¤§éƒ¨åˆ†ä¹Ÿéƒ½èƒ½åœ¨ Chrome
åº”ç”¨ä¸­ä½¿ç”¨ã€‚åœ¨è¿™ä¸€ä»£ç å®éªŒå®¤ä¸­æˆ‘ä»¬å°†åˆ†åˆ«ä½¿ç”¨çº¯ JavaScript ä»¥åŠ
<a href="http://angularjs.org/">AngularJS</a>
æ¡†æ¶æ·»åŠ  MVC æ¨¡å‹ã€‚è¿™ä¸€éƒ¨åˆ†çš„å¤§éƒ¨åˆ† AngularJS ä»£ç éƒ½æ˜¯ä» AngularJSâ€œå¾…åŠäº‹é¡¹â€æ•™ç¨‹ä¸­å¤åˆ¶è¿‡æ¥çš„ï¼Œåªæ˜¯åšäº†ä¸€ç‚¹æ”¹åŠ¨ã€‚
</p>

<p class="note"><b><!--@Note:-->æ³¨æ„ï¼š</b><!--@
Chrome Apps don&#39;t enforce any specific framework or programming style.-->Chrome
åº”ç”¨å¹¶ä¸å¼ºåˆ¶è¦æ±‚ä½¿ç”¨ä»»ä½•ç‰¹å®šçš„æ¡†æ¶æˆ–ç¼–ç¨‹é£æ ¼ã€‚
</p>

<h2 id="simple"><!--@Create a simple view-->åˆ›å»ºç®€å•è§†å›¾</h2>

<h3 id="basic-mvc"><!--@Add MVC basics-->æ·»åŠ  MVC çš„åŸºæœ¬å†…å®¹</h3>

<p><!--@If using AngularJS, download the-->å¦‚æœæ‚¨ä½¿ç”¨ AngularJSï¼Œè¯·ä¸‹è½½
<a href="http://ajax.googleapis.com/ajax/libs/angularjs/1.0.2/angular.min.js">Angular <!--@script-->è„šæœ¬</a><!--@
and save it as-->å¹¶å°†å®ƒå­˜å‚¨ä¸º
<a href="https://github.com/GoogleChrome/chrome-app-codelab/blob/master/lab3_mvc/angularjs/simpleview/angular.min.js">angular.min.js</a><!--@.-->ã€‚</p>

<p><!--@If using JavaScript,
you will need to add a very simple controller with basic MVC functionalities:
-->
å¦‚æœä½¿ç”¨ JavaScriptï¼Œæ‚¨éœ€è¦æ·»åŠ ä¸€ä¸ªéå¸¸ç®€å•å¹¶å…·æœ‰åŸºæœ¬ MVC åŠŸèƒ½çš„
<a href="https://github.com/GoogleChrome/chrome-app-codelab/blob/master/lab3_mvc/javascript/simpleview/controller.js">JavaScript controller.js</a></p>

<h3 id="update-view"><!--@Update view-->æ›´æ–°è§†å›¾</h3>

<p><!--@Change the-->ä¿®æ”¹ <a href="https://github.com/GoogleChrome/chrome-app-codelab/blob/master/lab3_mvc/angularjs/simpleview/index.html">AngularJS index.html</a> <!--@or-->æˆ–
<a href="https://github.com/GoogleChrome/chrome-app-codelab/blob/master/lab3_mvc/javascript/simpleview/index.html">JavaScript index.html</a> <!--@to use a simple sample:-->ä½¿ç”¨ç®€å•çš„ç¤ºä¾‹ï¼š
</p>

<tabs data-group="source">

  <header tabindex="0" data-value="angular">Angular</header>
  <header tabindex="0" data-value="js">JavaScript</header>

  <content>
    <pre data-filename="index.html">
&lt;!doctype html&gt;
&lt;html ng-app ng-csp&gt;
  &lt;head&gt;
    &lt;script src=&quot;angular.min.js&quot;&gt;&lt;/script&gt;
    &lt;link rel="stylesheet" href="todo.css"&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;h2&gt;Todo&lt;/h2&gt;
    &lt;div&gt;
      &lt;ul&gt;
        &lt;li&gt;
          &#123;&#123;todoText&#125;&#125;
        &lt;/li&gt;
      &lt;/ul&gt;
      &lt;input type=&quot;text&quot; ng-model=&quot;todoText&quot;  size="30"
             placeholder=&quot;type your todo here&quot;&gt;
    &lt;/div&gt;
  &lt;/body&gt;
&lt;/html&gt;
    </pre>
  </content>
  <content>
    <pre data-filename="index.html">
&lt;!doctype html&gt;
&lt;html&gt;
  &lt;head&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;todo.css&quot;&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;h2&gt;Todo&lt;/h2&gt;
    &lt;div&gt;
      &lt;ul&gt;
        &lt;li id=&quot;todoText&quot;&gt;
        &lt;/li&gt;
      &lt;/ul&gt;
      &lt;input type=&quot;text&quot; id=&quot;newTodo&quot; size=&quot;30&quot;
             placeholder=&quot;type your todo here&quot;&gt;
    &lt;/div&gt;
    &lt;script src=&quot;controller.js&quot;&gt;&lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;
    </pre>
  </content>
</tabs>

<p class="note"><b><!--@Note:-->æ³¨æ„ï¼š</b><!--@  The --><code>ng-csp</code> <!--@directive tells Angular to run in a &quot;content security mode&quot;. You don&#39;t need this directive when using Angular v1.1.0+. We&#39;ve included it here so that the sample works regardless of the Angular version in use.-->
æŒ‡ç¤ºç¬¦å‘Šè¯‰ Angular ä»¥â€œå†…å®¹å®‰å…¨æ¨¡å¼â€è¿è¡Œï¼Œå¦‚æœæ‚¨ä½¿ç”¨
Angular v1.1.0+ï¼Œæ‚¨ä¸éœ€è¦è¯¥æŒ‡ç¤ºç¬¦ã€‚æˆ‘ä»¬åœ¨è¿™é‡ŒåŒ…å«äº†å®ƒï¼Œä»¥ä¾¿è®©ç¤ºä¾‹åœ¨ä»»ä½•ä½¿ç”¨çš„
Angular ç‰ˆæœ¬ä¸‹éƒ½èƒ½æ­£å¸¸å·¥ä½œã€‚
</p>

<h3 id="stylesheet"><!--@Add stylesheet-->æ·»åŠ æ ·å¼è¡¨</h3>

<p><a href="https://github.com/GoogleChrome/chrome-app-codelab/blob/master/lab3_mvc/angularjs/simpleview/todo.css">AngularJS todo.css</a> <!--@and-->å’Œ
<a href="https://github.com/GoogleChrome/chrome-app-codelab/blob/master/lab3_mvc/javascript/simpleview/todo.css">JavaScript todo.css</a> <!--@are the same:-->æ˜¯ç›¸åŒçš„ï¼š
</p>

<pre data-filename="todo.css">
body {
  font-family: "Helvetica Neue",Helvetica,Arial,sans-serif;
}

ul {
  list-style: none;
}

button, input[type=submit] {
  background-color: #0074CC;
  background-image: linear-gradient(top, #08C, #05C);
  border-color: rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.25);
  text-shadow: 0 -1px 0 rgba(0, 0, 0, 0.25);
  color: white;
}

.done-true {
  text-decoration: line-through;
  color: grey;
}
</pre>

<h3 id="check1"><!--@Check the results-->æ£€æŸ¥ç»“æœ</h3>

<p>
<!--@Check the results by reloading the app: open the app, right-click and select Reload App.</li>-->
é‡æ–°åŠ è½½åº”ç”¨ï¼Œæ£€æŸ¥ç»“æœï¼šæ‰“å¼€åº”ç”¨ï¼Œå•å‡»å³é”®å¹¶é€‰æ‹©â€œé‡æ–°åŠ è½½åº”ç”¨â€ã€‚
</p>

<h2 id="real-todo"><!--@Create real Todo list-->åˆ›å»ºçœŸæ­£çš„å¾…åŠäº‹é¡¹åˆ—è¡¨</h2>

<p>
<!--@The previous sample, although interesting, is not exactly useful.
Let&#39;s transform it into a real Todo list, instead of a simple Todo item.-->
å‰é¢çš„ç¤ºä¾‹å°½ç®¡å¾ˆæœ‰æ„æ€ï¼Œä½†æ˜¯å¹¶ä¸æ˜¯å¾ˆæœ‰ç”¨ï¼Œè®©æˆ‘ä»¬å°†å®ƒè½¬å˜æˆä¸€ä¸ªçœŸæ­£çš„â€œå¾…åŠäº‹é¡¹â€åˆ—è¡¨ã€‚
</p>

<h3 id="controller"><!--@Add controller-->æ·»åŠ æ§åˆ¶å™¨</h3>

<p>
<!--@Whether using pure JavaScript or AngularJS,
the controller manages the Todo list:
-->æ— è®ºæ˜¯ç”¨çº¯ JavaScript è¿˜æ˜¯ AngularJSï¼Œå¾…åŠäº‹é¡¹åˆ—è¡¨ç”±æ§åˆ¶å™¨ç®¡ç†ï¼š<a
href="https://github.com/GoogleChrome/chrome-app-codelab/blob/master/lab3_mvc/angularjs/withcontroller/controller.js">AngularJS controller.js</a> <!--@or-->æˆ–
<a href="https://github.com/GoogleChrome/chrome-app-codelab/blob/master/lab3_mvc/javascript/withcontroller/controller.js">JavaScript controller.js</a><!--@.-->ã€‚
</p>

<tabs data-group="source">

  <header tabindex="0" data-value="angular">Angular</header>
  <header tabindex="0" data-value="js">JavaScript</header>

  <content>
    <pre data-filename="controller.js">
function TodoCtrl($scope) {
  $scope.todos = [
    {text:&#39;learn angular&#39;, done:true},
    {text:&#39;build an angular Chrome packaged app&#39;, done:false}];

$scope.addTodo = function() {
    $scope.todos.push({text:$scope.todoText, done:false});
    $scope.todoText = &#39;&#39;;
  };

$scope.remaining = function() {
    var count = 0;
    angular.forEach($scope.todos, function(todo) {
      count += todo.done ? 0 : 1;
    });
    return count;
  };

$scope.archive = function() {
    var oldTodos = $scope.todos;
    $scope.todos = [];
    angular.forEach(oldTodos, function(todo) {
      if (!todo.done) $scope.todos.push(todo);
    });
  };
}
    </pre>
  </content>
  <content>
    <pre data-filename="controller.js">
(function(exports) {

  var nextId = 1;

  var TodoModel = function() {
    this.todos = {};
    this.listeners = [];
  }

  TodoModel.prototype.clearTodos = function() {
    this.todos = {};
    this.notifyListeners('removed');
  }

  TodoModel.prototype.archiveDone = function() {
    var oldTodos = this.todos;
    this.todos={};
    for (var id in oldTodos) {
      if ( ! oldTodos[id].isDone ) {
        this.todos[id] = oldTodos[id];
      }
    }
    this.notifyListeners('archived');
  }

  TodoModel.prototype.setTodoState = function(id, isDone) {
    if ( this.todos[id].isDone != isDone ) {
      this.todos[id].isDone = isDone;
      this.notifyListeners('stateChanged', id);
    }
  }

  TodoModel.prototype.addTodo = function(text, isDone) {
    var id = nextId++;
    this.todos[id]={'id': id, 'text': text, 'isDone': isDone};
    this.notifyListeners('added', id);
  }

  TodoModel.prototype.addListener = function(listener) {
    this.listeners.push(listener);
  }

  TodoModel.prototype.notifyListeners = function(change, param) {
    var this_ = this;
    this.listeners.forEach(function(listener) {
      listener(this_, change, param);
    });
  }

  exports.TodoModel = TodoModel;

})(window);


window.addEventListener('DOMContentLoaded', function() {

  var model = new TodoModel();
  var form = document.querySelector('form');
  var archive = document.getElementById('archive');
  var list = document.getElementById('list');
  var todoTemplate = document.querySelector('#templates &gt; [data-name="list"]');

  form.addEventListener('submit', function(e) {
    var textEl = e.target.querySelector('input[type="text"]');
    model.addTodo(textEl.value, false);
    textEl.value=null;
    e.preventDefault();
  });

  archive.addEventListener('click', function(e) {
    model.archiveDone();
    e.preventDefault();
  });

  model.addListener(function(model, changeType, param) {
    if ( changeType === 'removed' || changeType === 'archived') {
      redrawUI(model);
    } else if ( changeType === 'added' ) {
      drawTodo(model.todos[param], list);
    } else if ( changeType === 'stateChanged') {
      updateTodo(model.todos[param]);
    }
    updateCounters(model);
  });

  var redrawUI = function(model) {
    list.innerHTML='';
    for (var id in model.todos) {
      drawTodo(model.todos[id], list);
    }
  };
  
  var drawTodo = function(todoObj, container) {
    var el = todoTemplate.cloneNode(true);
    el.setAttribute('data-id', todoObj.id);
    container.appendChild(el);
    updateTodo(todoObj);
    var checkbox = el.querySelector('input[type="checkbox"]');
    checkbox.addEventListener('change', function(e) {
      model.setTodoState(todoObj.id, e.target.checked);
    });
  }

  var updateTodo = function(model) {
    var todoElement = list.querySelector('li[data-id="'+model.id+'"]');
    if (todoElement) {
      var checkbox = todoElement.querySelector('input[type="checkbox"]');
      var desc = todoElement.querySelector('span');
      checkbox.checked = model.isDone;
      desc.innerText = model.text;
      desc.className = "done-"+model.isDone;
    }
  }

  var updateCounters = function(model) {
    var count = 0;
    var notDone = 0;
    for (var id in model.todos) {
      count++;
      if ( ! model.todos[id].isDone ) {
        notDone ++;
      }
    }
    document.getElementById('remaining').innerText = notDone;
    document.getElementById('length').innerText = count;
  }

  updateCounters(model);

});
    </pre>
  </content>
</tabs>

<h3 id="index"><!--@Update view-->æ›´æ–°è§†å›¾</h3>

<p><!--@Change the-->ä¿®æ”¹ <a href="https://github.com/GoogleChrome/chrome-app-codelab/blob/master/lab3_mvc/angularjs/withcontroller/index.html">AngularJS index.html</a> <!--@or-->æˆ–
<a href="https://github.com/GoogleChrome/chrome-app-codelab/blob/master/lab3_mvc/javascript/withcontroller/index.html">JavaScript index.html</a><!--@:-->ï¼š
</p>

<tabs data-group="source">

  <header tabindex="0" data-value="angular">Angular</header>
  <header tabindex="0" data-value="js">JavaScript</header>

  <content>
    <pre data-filename="index.html">
&lt;html ng-app ng-csp&gt;
  &lt;head&gt;
    &lt;script src=&quot;angular.min.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;controller.js&quot;&gt;&lt;/script&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;todo.css&quot;&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;h2&gt;Todo&lt;/h2&gt;
    &lt;div ng-controller=&quot;TodoCtrl&quot;&gt;
      &lt;span&gt;&#123;&#123;remaining()&#125;&#125; of &#123;&#123;todos.length&#125;&#125; remaining&lt;/span&gt;
      [ &lt;a href=&quot;&quot; ng-click=&quot;archive()&quot;&gt;archive&lt;/a&gt; ]
      &lt;ul&gt;
        &lt;li ng-repeat=&quot;todo in todos&quot;&gt;
          &lt;input type=&quot;checkbox&quot; ng-model=&quot;todo.done&quot;&gt;
          &lt;span class=&quot;done-&#123;&#123;todo.done&#125;&#125;&quot;&gt;&#123;&#123;todo.text&#125;&#125;&lt;/span&gt;
        &lt;/li&gt;
      &lt;/ul&gt;
      &lt;form ng-submit=&quot;addTodo()&quot;&gt;
        &lt;input type=&quot;text&quot; ng-model=&quot;todoText&quot; size=&quot;30&quot;
               placeholder=&quot;add new todo here&quot;&gt;
        &lt;input class=&quot;btn-primary&quot; type=&quot;submit&quot; value=&quot;add&quot;&gt;
      &lt;/form&gt;
    &lt;/div&gt;
  &lt;/body&gt;
&lt;/html&gt;
    </pre>
  </content>
  <content>
    <pre data-filename="index.html">
&lt;!doctype html&gt;
&lt;html&gt;
  &lt;head&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;todo.css&quot;&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;h2&gt;Todo&lt;/h2&gt;
    &lt;div&gt;
      &lt;span&gt;&lt;span id=&quot;remaining&quot;&gt;&lt;/span&gt; of &lt;span id=&quot;length&quot;&gt;&lt;/span&gt; remaining&lt;/span&gt;
      [ &lt;a href=&quot;&quot; id=&quot;archive&quot;&gt;archive&lt;/a&gt; ]
      &lt;ul class=&quot;unstyled&quot; id=&quot;list&quot;&gt;
      &lt;/ul&gt;
      &lt;form&gt;
        &lt;input type=&quot;text&quot; size=&quot;30&quot;
               placeholder=&quot;add new todo here&quot;&gt;
        &lt;input class=&quot;btn-primary&quot; type=&quot;submit&quot; value=&quot;add&quot;&gt;
      &lt;/form&gt;
    &lt;/div&gt;

    &lt;!-- poor man's template --&gt;
    &lt;div id=&quot;templates&quot; style=&quot;display: none;&quot;&gt;
      &lt;li data-name=&quot;list&quot;&gt;
        &lt;input type=&quot;checkbox&quot;&gt;
        &lt;span&gt;&lt;/span&gt;
      &lt;/li&gt;
    &lt;/div&gt;

    &lt;script src=&quot;controller.js&quot;&gt;&lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;
    </pre>
  </content>
</tabs>

<p><!--@Note how the data, stored in an array inside the controller, binds to the view and is automatically updated when it is changed by the controller.-->
æ³¨æ„å‚¨å­˜åœ¨æ§åˆ¶å™¨ä¸­ä¸€ä¸ªæ•°ç»„å†…çš„æ•°æ®æ˜¯å¦‚ä½•ä¸è§†å›¾ç»‘å®šï¼Œå¹¶åœ¨æ§åˆ¶å™¨æ›´æ”¹å®ƒæ—¶è‡ªåŠ¨æ›´æ–°çš„ã€‚
</p>

<h3 id="check2"><!--@Check the results-->æ£€æŸ¥ç»“æœ</h3>

<p>
<!--@Check the results by reloading the app: open the app, right-click and select Reload App.</li>-->
é‡æ–°åŠ è½½åº”ç”¨ï¼Œæ£€æŸ¥ç»“æœï¼šæ‰“å¼€åº”ç”¨ï¼Œå•å‡»å³é”®å¹¶é€‰æ‹©â€œé‡æ–°åŠ è½½åº”ç”¨â€ã€‚
</p>

<h2 id="takeaways_"><!--@Takeaways-->æ›´å¤šä¿¡æ¯</h2>

<ul>
<li><p><!--@Chrome Apps are-->
Chrome åº”ç”¨<a href="offline_apps.html"><!--@offline first-->é€šå¸¸æ˜¯ç¦»çº¿çš„</a><!--@,
so the recommended way to include third-party scripts is to download
and package them inside your app.-->ï¼Œæ‰€ä»¥åŒ…å«ç¬¬ä¸‰æ–¹è„šæœ¬çš„æ¨èæ–¹æ³•æ˜¯ä¸‹è½½å¹¶å°†å®ƒæ‰“åŒ…åœ¨æ‚¨çš„åº”ç”¨å†…ã€‚</p></li>
<li><p><!--@You can use any framework you want,
as long as it complies with Content Security Policies
and other restrictions that Chrome Apps are enforced to follow.-->æ‚¨å¯ä»¥ä½¿ç”¨æ‚¨å¸Œæœ›ä½¿ç”¨çš„ä»»ä½•æ¡†æ¶ï¼Œåªè¦å®ƒéµå¾ªå†…å®¹å®‰å…¨ç­–ç•¥ä»¥åŠ
Chrome åº”ç”¨å¼ºåˆ¶éµå¾ªçš„å…¶ä»–é™åˆ¶ã€‚</p></li>
<li><p><!--@MVC frameworks make your life easier.
Use them, specially if you want to build a non-trivial application.-->MVC æ¡†æ¶ä½¿æ‚¨å¯ä»¥æ›´æ–¹ä¾¿åœ°å»ºç«‹åº”ç”¨ï¼Œå¦‚æœæ‚¨æƒ³å»ºç«‹ä¸€ä¸ªéå‡¡çš„åº”ç”¨ï¼Œè¯·ä½¿ç”¨å®ƒä»¬ã€‚</p></li>
</ul>

<h2 id="you_should_also_read"><!--@You should also read-->æ‚¨è¿˜åº”è¯¥é˜…è¯»</h2>

<ul>
<li><p><a href="angular_framework.html"><!--@Build Apps with AngularJS-->ç”¨ AngularJS å»ºç«‹åº”ç”¨</a><!--@ tutorial-->çš„æ•™ç¨‹</p></li>
<li><p><a href="http://angularjs.org/">AngularJS <!--@Todo-->å¾…åŠäº‹é¡¹</a><!--@ tutorial-->æ•™ç¨‹</p></li>
</ul>

<h2 id="what_39_s_next_"><!--@What's next?-->æ¥ä¸‹æ¥åšä»€ä¹ˆï¼Ÿ</h2>

<p><!--@In-->åœ¨ <a href="app_codelab5_data.html">4 - <!--@Save and Fetch Data-->ä¿å­˜å’Œè·å–æ•°æ®</a><!--@,
you will modify your Todo list app so that Todo items are saved.-->
ä¸­ï¼Œæ‚¨å°†ä¼šä¿®æ”¹æ‚¨çš„â€œå¾…åŠäº‹é¡¹â€åˆ—è¡¨åº”ç”¨ï¼Œå­˜å‚¨å¾…åŠäº‹é¡¹ã€‚
</p>
      </div>
    </div>
  </body>

  <div id="gc-footer">
    <button class="google-button" id="scroll-to-top">â†‘</button>
    <button class="google-button" id="send-feedback" style="display:none">Send Feedback</button>
    <div class="text">
      <p>
        <!--@Except as otherwise <a href="http://code.google.com/policies.html#restrictions">noted</a>,
        the content of this page is licensed under the <a rel="license" href="http://creativecommons.org/licenses/by/3.0/">Creative Commons
        Attribution 3.0 License</a>, and code samples are licensed under the
        <a rel="license" href="http://code.google.com/google_bsd_license.html">BSD License</a>.-->
        è¯¥é¡µé¢ç¿»è¯‘è‡ª
        <a href="https://developer.chrome.com/extensions/">Google Chrome Extensions</a>
        ä¸
        <a href="https://developer.chrome.com/apps/">Google Chrome Apps</a>ã€‚é™¤éç‰¹åˆ«<a href="https://code.google.com/policies.html#restrictions">è¯´æ˜</a>ï¼Œè¯¥é¡µé¢çš„å†…å®¹éµå¾ª
        <a rel="license" href="http://creativecommons.org/licenses/by/3.0/">Creative Commons Attribution 3.0
        License</a>ï¼Œä»£ç ç¤ºä¾‹éµå¾ª
        <a rel="license" href="http://code.google.com/google_bsd_license.html">BSD License</a>ã€‚
      </p>
      <p class="crxdoczh-footer">
        <a href="https://code.google.com/p/crxdoczh/">crxdoczh é¡¹ç›®ä¸»é¡µ</a>
        <a href="https://code.google.com/p/crxdoczh/issues/entry?template=%E7%BD%91%E7%AB%99%E5%8F%8D%E9%A6%88">å‘é€åé¦ˆ</a>
        <a href="https:////plus.google.com/112419687097816423998?prsrc=3" rel="publisher">
          Google+ é¡µé¢
        </a>
        <a href="https://plus.google.com/communities/105384952265487436177">Google+ ç¤¾ç¾¤</a>
      </p>
      <script src="https://developer.chrome.com/static/js/platform_chooser.js" type="text/javascript"></script>
      <script src="https://developer.chrome.com/static/js/popup.js" type="text/javascript"></script>
      <script src="https://developer.chrome.com/static/js/prettify.js" type="text/javascript"></script>
      <script src="https://developer.chrome.com/static/js/scroll.js" type="text/javascript"></script>
      <script src="https://developer.chrome.com/static/js/sidebar.js" type="text/javascript"></script>
      <script src="https://developer.chrome.com/static/js/tabs.js" type="text/javascript"></script>
      <script>
        (function() {
          // Auto syntax highlight all pre tags.
          var preElements = document.getElementsByTagName('pre');
          for (var i = 0; i < preElements.length; i++) {
            var preElement = preElements[i];
            preElement.classList.add('prettyprint');
            var datasetFilename = preElement.getAttribute('data-filename');
            if (datasetFilename) {
              var filename = document.createElement('div');
              filename.className = 'filename nocode';
              filename.textContent = datasetFilename;
              preElement.insertBefore(filename, preElement.firstChild);
            }
          }
          prettyPrint();
        })();

        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-25062424-1']);
        _gaq.push(['_trackPageview']);

        (function() {
          var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
          ga.src = 'https://ssl.google-analytics.com/ga.js';
          var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();

        window.___gcfg = {
      Â  Â  lang: 'zh-CN'
      Â  };
      Â  (function() {
      Â  Â  var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
      Â  Â  po.src = 'https://apis.google.com/js/plusone.js';
      Â  Â  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
      Â  })();
      </script>
    </div>
  </div>
</html>
