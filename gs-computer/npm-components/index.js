!function(t,s){"object"==typeof exports&&"object"==typeof module?module.exports=s():"function"==typeof define&&define.amd?define([],s):"object"==typeof exports?exports.VueDropUpload=s():t.VueDropUpload=s()}("undefined"!=typeof self?self:this,function(){return function(t){var s={};function e(i){if(s[i])return s[i].exports;var r=s[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,e),r.l=!0,r.exports}return e.m=t,e.c=s,e.d=function(t,s,i){e.o(t,s)||Object.defineProperty(t,s,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var s=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(s,"a",s),s},e.o=function(t,s){return Object.prototype.hasOwnProperty.call(t,s)},e.p="/",e(e.s=245)}({214:function(t,s,e){"use strict";var i=e(247);e.n(i);s.a={name:"BySlideCheck",props:{radius:{type:Number,default:10},src:{type:[String,Array],default:""},width:{type:Number,default:300},height:{type:Number,default:300},theme:{type:String,default:"#409EFF"}},data:function(){return{range:0,tips:"向右滑动完成拼图"}},computed:{showNextImg:function(){return Array.isArray(this.src)&&this.src.length>1}},mounted:function(){Array.isArray(this.src)?this.initCanvas(this.src[0]):this.initCanvas(this.src),this.initDomInfo()},methods:{onNextImg:function(){this.reset(),Array.isArray(this.src)?this.initCanvas(this.src[Math.floor(Math.random()*this.src.length)]):this.initCanvas(this.src)},initDomInfo:function(){this.pos=this.$refs.btn.getBoundingClientRect(),"#369"!==this.theme&&(this.$refs.slider.style.boxShadow="0 0 10px 0 "+this.theme,this.$refs.slider.style.color=this.theme,this.$refs.btn.style.background=this.theme,this.$refs.btn.style.boxShadow="0 0 10px 0 "+this.theme)},onMousedown:function(t){this.track={top:t.clientY,bottom:t.clientY},this.track2={top:t.clientY,bottom:t.clientY},this.isEnterDown=!0,this.clickPos=t.clientX,this.tips="向右滑动完成拼图",this.$refs.btn.style.transition="",this.$refs.card.style.transition="",this.$refs["progress-bar"].style.transition="",this.diff=t.clientX-this.pos.left},calcTrack:function(t){var s=this.track.top,e=this.track.bottom;t>this.track.top?(this.track.top=t,t>e&&(e=t)):t<this.track.bottom&&(this.track.bottom=t,t<s&&(s=t))},onMousemove:function(t){if(this.isEnterDown){var s=this.$refs.slider.clientWidth;t.clientX-this.pos.left-this.diff-10+50>s||t.clientX-this.pos.left-this.diff-10<0||(this.calcTrack(t.clientY),this.cardMovePos=(this.width-5*this.radius+2)/(this.$refs.slider.clientWidth-50)*(t.clientX-this.pos.left-this.diff-11),this.$refs.card.style.transform="translate3d("+this.cardMovePos+"px,0,0)",this.$refs.btn.style.transform="translate3d("+(t.clientX-this.pos.left-this.diff-10)+"px, 0, 0)",this.$refs["progress-bar"].style.width=t.clientX-this.pos.left-this.diff-10+"px",this.$refs["progress-bar"].style.background="#42c3fc")}},onMouseup:function(t){var s=this;this.isEnterDown&&(this.isEnterDown=!1,this.clickPos!==t.clientX&&(this.cardMovePos+3>this.x&&this.cardMovePos-3<this.x?(this.tips="验证通过",this.$refs["progress-bar"].style.background="#2cd277",setTimeout(function(){s.$emit("success",{top:Math.abs(s.track.bottom-s.track2.bottom),bottom:Math.abs(s.track.top-s.track2.top)})},1e3)):(setTimeout(function(){s.$emit("fail"),s.onStatusChange()},1e3),this.$refs["progress-bar"].style.background="#ff5b57")))},onStatusChange:function(){this.reset(),this.$refs["progress-bar"].style.transition="0.3s all",this.$refs["progress-bar"].style.width="0px",this.$refs.btn.style.transition="0.3s all",this.$refs.btn.style.transform="translate3d(0,0,0)",this.$refs.card.style.transition="0.3s all",this.$refs.card.style.transform="translate3d(0,0,0)",Array.isArray(this.src)?this.initCanvas(this.src[Math.floor(Math.random()*this.src.length)]):this.initCanvas(this.src)},random:function(t,s){return Math.floor(Math.random()*(s-t+1)+t)},initCanvas:function(t){var s=this,e=this.$refs.bg,i=this.$refs.card,r=e.getContext("2d"),n=i.getContext("2d"),o=this.radius,a=4*o,h=6*o;this.x=this.random(this.width/2,this.width-h);var c=this.random(2*o,this.height-h),l=new Image;l.crossOrigin="Anonymous",l.onload=function(){r.drawImage(l,0,0,s.width,s.height),n.drawImage(l,0,0,s.width,s.height);var t=c-2*o+3,e=n.getImageData(s.x,t,h,h);i.width=h,n.putImageData(e,0,t)};var d={x:this.x,y:c,w:a,r:o};l.src=t,this.draw(r,"fill",d),this.draw(n,"clip",d)},reset:function(){var t=this.$refs.bg.getContext("2d"),s=this.$refs.card,e=s.getContext("2d");t.clearRect(0,0,this.width,this.height),e.clearRect(0,0,this.width,this.height),s.width=this.width},draw:function(t,s,e){var i=Math.PI,r=e.x,n=e.y,o=e.w,a=e.r;t.beginPath(),t.lineTo(r,n),t.arc(r+o/2,n,a,i,0),t.lineTo(r+o,n),t.arc(r+o,n+o/2,a,1.5*i,.5*i),t.lineTo(r+o,n+o),t.lineTo(r,n+o),t.arc(r,n+o/2,a,.5*i,1.5*i,!0),t.closePath(),t.lineWidth=2,t.fillStyle="rgba(255, 255, 255, 0.7)",t.strokeStyle="rgba(255, 255, 255, 0.7)",t.stroke(),t[s](),t.globalCompositeOperation="destination-over"}}}},245:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var i=e(246);i.a.install=function(t){t.component(i.a.name,i.a)},s.default=i.a},246:function(t,s,e){"use strict";var i=e(214),r=e(248),n=e(7)(i.a,r.a,!1,null,null,null);s.a=n.exports},247:function(t,s){},248:function(t,s,e){"use strict";var i={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"slide-check-wrap",style:{width:t.width+"px"},on:{mouseup:t.onMouseup,mousemove:function(s){return s.stopPropagation(),t.onMousemove(s)},mouseleave:t.onMouseup}},[e("div",{staticClass:"tips-info"},[e("span",{staticClass:"tips"},[t._v("完成拼图验证")]),t._v(" "),t.showNextImg?e("span",{staticClass:"next-img",on:{click:t.onNextImg}},[t._v("换一张")]):t._e()]),t._v(" "),e("div",{staticClass:"slider-check-wrap",style:{width:t.width+"px"}},[e("canvas",{ref:"bg",staticClass:"bg-canvas",attrs:{width:t.width,height:t.height}}),t._v(" "),e("canvas",{ref:"card",staticClass:"card-canvas",attrs:{width:t.width,height:t.height}}),t._v(" "),e("div",{staticClass:"slider-wrap"},[e("div",{ref:"progress-bar",staticClass:"progress-bar"}),t._v(" "),e("div",{ref:"btn",staticClass:"btn",on:{mousedown:function(s){return s.stopPropagation(),t.onMousedown(s)}}},[t._v(">")]),t._v(" "),e("div",{ref:"slider",staticClass:"slider"},[t._v(t._s(t.tips))])])])])},staticRenderFns:[]};s.a=i},7:function(t,s){t.exports=function(t,s,e,i,r,n){var o,a=t=t||{},h=typeof t.default;"object"!==h&&"function"!==h||(o=t,a=t.default);var c,l="function"==typeof a?a.options:a;if(s&&(l.render=s.render,l.staticRenderFns=s.staticRenderFns,l._compiled=!0),e&&(l.functional=!0),r&&(l._scopeId=r),n?(c=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),i&&i.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(n)},l._ssrRegister=c):i&&(c=i),c){var d=l.functional,f=d?l.render:l.beforeCreate;d?(l._injectStyles=c,l.render=function(t,s){return c.call(s),f(t,s)}):l.beforeCreate=f?[].concat(f,c):[c]}return{esModule:o,exports:a,options:l}}}})});
//# sourceMappingURL=by-slide-check.js.map