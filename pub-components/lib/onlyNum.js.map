{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 3427d089a069508b7b79","webpack:///./src/directives/only-num.js"],"names":["root","factory","exports","module","define","amd","self","this","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","__webpack_exports__","value","el","binding","vnode","ele","tagName","querySelector","oninput","rel","data","directives","filter","item","context","$nextTick","rule","modifiers","float","integer","decimal","val","replace","len","length","isNaN","parseInt","substr","indexOf","option","expression","maxLen","attrs","role","currObj","key","undefined","arg","toString","string","split","forEach","args","_curObj","j","handleInput"],"mappings":"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","file":"onlyNum.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"VueDropUpload\"] = factory();\n\telse\n\t\troot[\"VueDropUpload\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 21);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 3427d089a069508b7b79","/**\r\n * [setValueWithExpressionVue 更新数据模型]\r\n * @param {Boolean} toString    [是否转化为字符串]\r\n * @param {[type]}  currObj    [当前的数据模型]\r\n * @param {[type]}  expression [指令表达式]\r\n * @param {[type]}  value      [指令的值]\r\n * @param {[type]}  key        [用于批量渲染时的跟踪键]\r\n * @param {[type]}  arg        [指令的参数]\r\n */\r\nconst setValueWithExpressionVue = (option) => {\r\n  let expression = option.expression.split('.')\r\n  expression.forEach((item, i) => {\r\n    if (i < expression.length - 1) {\r\n      option.currObj = option.currObj[item]\r\n    } else {\r\n      if (option.key !== undefined) {\r\n        let args = option.arg.split('-')\r\n        let _curObj = option.currObj[item][option.key]\r\n        args.forEach((arg, j) => {\r\n          if (j < args.length - 1) {\r\n            _curObj = _curObj[arg]\r\n          } else {\r\n            _curObj[arg] = (option.value === '' || option.toString) ? option.value : option.value * 1\r\n          }\r\n        })\r\n      } else {\r\n        option.currObj[item] = (option.value === '' || option.toString) ? option.value : option.value * 1\r\n      }\r\n    }\r\n  })\r\n}\r\n/**\r\n  * [handleInput 在输入阶段的处理逻辑]\r\n  * @param  {[DOM]} ele   [当前指令操作的dom对象]\r\n  * @param  {[虚拟节点]} vnode [当前指令渲染的虚拟节点]\r\n  * @param  {[指令信息]} rel   [当前指令的所有指令信息]\r\n  * @param  {[校验类型]} type  [输入阶段的校验类型]\r\n  *      \"number\": 仅支持输入数字\r\n  *      \"float\": 仅支持数字和小数点\r\n*/\r\nconst handleInput = (ele, vnode, rel) => {\r\n  let rule\r\n  switch (true) {\r\n    case rel.modifiers.float: // 浮点型\r\n      rule = /[^\\d\\\\.]/g\r\n      break\r\n    case rel.modifiers.integer: // 整数\r\n      rule = /[^\\-\\d]/g\r\n      break\r\n    case rel.modifiers.decimal: // 小数\r\n      rule = /[^\\-\\d\\\\.]/g\r\n      break\r\n    default: // 默认仅支持输入数字\r\n      rule = /\\D/g\r\n  }\r\n  let val = ele.value.replace(rule, '')\r\n  const len = val.length - 1\r\n  if (rel.modifiers.integer) {\r\n    if (val !== '-' && isNaN(parseInt(val))) {\r\n      val = val.substr(0, len)\r\n    } else if (val !== '-') {\r\n      val = '' + parseInt(val)\r\n    }\r\n  } else if (rel.modifiers.decimal) {\r\n    if ((val[len] === '.' && val.indexOf('.') !== (len)) ||\r\n      (val[len] === '-' && val.indexOf('-') !== (len)) ||\r\n      (val !== '-' && val[len] !== '.' && isNaN(parseInt(val)))) {\r\n      val = val.substr(0, len)\r\n    }\r\n    if (val === '-.') {\r\n      val = '-'\r\n    }\r\n  }\r\n  let maxLen = vnode.data.attrs && vnode.data.attrs['max-len'] ? vnode.data.attrs['max-len'] : 0\r\n  // 优先从data接受，其次从父组件的props接收\r\n  let role = vnode.data.attrs && vnode.data.attrs['role'] ? vnode.data.attrs['role'] : 'data'\r\n  if (maxLen > 0) { val = val.substr(0, maxLen) }\r\n  setValueWithExpressionVue({\r\n    currObj: vnode.context['$' + role],\r\n    expression: rel.expression,\r\n    value: val,\r\n    key: vnode.key !== undefined ? vnode.key : (vnode.data.attrs && vnode.data.attrs['index'] !== undefined ? vnode.data.attrs['index'] : undefined),\r\n    arg: rel.arg,\r\n    toString: rel.modifiers.string || rel.modifiers.float || rel.modifiers.integer || rel.modifiers.decimal\r\n  })\r\n}\r\n\r\nconst onlyNum = (el, binding, vnode) => {\r\n  let ele = el.tagName === 'INPUT' ? el : el.querySelector('input')\r\n  ele.oninput = () => {\r\n    // 获取相关的指令配置信息\r\n    let rel = vnode.data.directives.filter(item => {\r\n      return item.name === 'only-num'\r\n    })[0]\r\n    vnode.context.$nextTick(() => {\r\n      handleInput(ele, vnode, rel)\r\n    })\r\n  }\r\n}\r\n\r\nexport default onlyNum\n\n\n// WEBPACK FOOTER //\n// ./src/directives/only-num.js"],"sourceRoot":""}